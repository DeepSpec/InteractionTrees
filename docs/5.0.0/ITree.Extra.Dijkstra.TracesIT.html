<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="https://github.com/DeepSpec/InteractionTrees">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">ITree.Extra.Dijkstra.TracesIT</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#"><span class="id" title="library">Morphisms</span></a>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ExtLib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="library">Structures.Monad</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Paco</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">paco</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ITree</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Axioms.html#"><span class="id" title="library">Axioms</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.ITree.html#"><span class="id" title="library">ITree</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.ITreeFacts.html#"><span class="id" title="library">ITreeFacts</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Props.Infinite.html#"><span class="id" title="library">Props.Infinite</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Props.EuttNoRet.html#"><span class="id" title="library">Props.EuttNoRet</span></a>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ITree.Extra</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.Dijkstra.DijkstraMonad.html#"><span class="id" title="library">Dijkstra.DijkstraMonad</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.Dijkstra.PureITreeBasics.html#"><span class="id" title="library">Dijkstra.PureITreeBasics</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.Dijkstra.DelaySpecMonad.html#"><span class="id" title="library">Dijkstra.DelaySpecMonad</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#"><span class="id" title="library">ITrace.ITraceDefinition</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#"><span class="id" title="library">ITrace.ITraceFacts</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#"><span class="id" title="library">ITrace.ITraceBind</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.ITrace.ITracePreds.html#"><span class="id" title="library">ITrace.ITracePreds</span></a>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="ITree.Basics.Basics.html#Monads"><span class="id" title="module">Monads</span></a>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="module">MonadNotation</span>.<br/>

<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">monad_scope</span>.<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">delayspec_scope</span>.<br/>

<br/>
</div>

<div class="doc">
Contains TraceSpec, the type family of Specification Monads for uninterpretted ITrees. Also contains the effect observation from ITrees into TraceSpec and the proof that it is a monad morphism 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a id="TraceSpec" class="idref" href="#TraceSpec"><span class="id" title="section">TraceSpec</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<a id="E:1" class="idref" href="#E:1"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="TraceSpecInput" class="idref" href="#TraceSpecInput"><span class="id" title="definition">TraceSpecInput</span></a> (<a id="A:2" class="idref" href="#A:2"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>) := <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">{</span></a><a id="p:3" class="idref" href="#p:3"><span class="id" title="binder">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">:</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpec.E"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#A:2"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">|</span></a> <a class="idref" href="ITree.Extra.Dijkstra.PureITreeBasics.html#resp_eutt"><span class="id" title="abbreviation">resp_eutt</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#p:3"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">}</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a id="proper_eutt_spec_in" class="idref" href="#proper_eutt_spec_in"><span class="id" title="instance">proper_eutt_spec_in</span></a> {<a id="A:4" class="idref" href="#A:4"><span class="id" title="binder">A</span></a>} {<a id="p:5" class="idref" href="#p:5"><span class="id" title="binder">p</span></a> : <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpecInput"><span class="id" title="definition">TraceSpecInput</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#A:4"><span class="id" title="variable">A</span></a>} : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (@<a class="idref" href="ITree.Eq.Eqit.html#eutt"><span class="id" title="definition">eutt</span></a> <span class="id" title="var">_</span> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#A:4"><span class="id" title="variable">A</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#A:4"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#iff"><span class="id" title="definition">iff</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#p:5"><span class="id" title="variable">p</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">Heutt</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">p</span> <span class="id" title="var">Hp</span>]. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="TraceSpec" class="idref" href="#TraceSpec"><span class="id" title="definition">TraceSpec</span></a> (<a id="A:6" class="idref" href="#A:6"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>) := <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#ev_list"><span class="id" title="definition">ev_list</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpec.E"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">{</span></a><a id="w:7" class="idref" href="#w:7"><span class="id" title="binder">w</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">:</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpecInput"><span class="id" title="definition">TraceSpecInput</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#A:6"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">|</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="p:8" class="idref" href="#p:8"><span class="id" title="binder">p</span></a> <a id="p':9" class="idref" href="#p':9"><span class="id" title="binder">p'</span></a> : <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpecInput"><span class="id" title="definition">TraceSpecInput</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#A:6"><span class="id" title="variable">A</span></a>), <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="b:10" class="idref" href="#b:10"><span class="id" title="binder">b</span></a>, <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#b:10"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.Dijkstra.DelaySpecMonad.html#18a3a5e4581c6ce309a6851f9747d936"><span class="id" title="notation">∈</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#p:8"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#b:10"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.Dijkstra.DelaySpecMonad.html#18a3a5e4581c6ce309a6851f9747d936"><span class="id" title="notation">∈</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#p':9"><span class="id" title="variable">p'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#w:7"><span class="id" title="variable">w</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#p:8"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#w:7"><span class="id" title="variable">w</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#p':9"><span class="id" title="variable">p'</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">}</span></a>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="EqM_TraceSpec" class="idref" href="#EqM_TraceSpec"><span class="id" title="instance">EqM_TraceSpec</span></a> : <a class="idref" href="ITree.Basics.Monad.html#Eq1"><span class="id" title="class">Eq1</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpec"><span class="id" title="definition">TraceSpec</span></a> := <span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> <a id="w1:11" class="idref" href="#w1:11"><span class="id" title="binder">w1</span></a> <a id="w2:12" class="idref" href="#w2:12"><span class="id" title="binder">w2</span></a> ⇒ <span class="id" title="keyword">∀</span> <a id="log:13" class="idref" href="#log:13"><span class="id" title="binder">log</span></a> <a id="p:14" class="idref" href="#p:14"><span class="id" title="binder">p</span></a>, <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#w1:11"><span class="id" title="variable">w1</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#log:13"><span class="id" title="variable">log</span></a> <a class="idref" href="ITree.Extra.Dijkstra.DelaySpecMonad.html#906b5651d9232c6101ffe824c430eeb4"><span class="id" title="notation">∋</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#p:14"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#w2:12"><span class="id" title="variable">w2</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#log:13"><span class="id" title="variable">log</span></a> <a class="idref" href="ITree.Extra.Dijkstra.DelaySpecMonad.html#906b5651d9232c6101ffe824c430eeb4"><span class="id" title="notation">∋</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#p:14"><span class="id" title="variable">p</span></a>.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="EqMTS_equiv" class="idref" href="#EqMTS_equiv"><span class="id" title="instance">EqMTS_equiv</span></a> {<a id="R:15" class="idref" href="#R:15"><span class="id" title="binder">R</span></a>}: <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.RelationClasses.html#Equivalence"><span class="id" title="class">Equivalence</span></a> (<a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#EqM_TraceSpec"><span class="id" title="instance">EqM_TraceSpec</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#R:15"><span class="id" title="variable">R</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#EqM_TraceSpec"><span class="id" title="instance">EqM_TraceSpec</span></a> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;look&nbsp;over&nbsp;this&nbsp;code&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;https://github.com/FStarLang/FStar/blob/dm4all/examples/dm4all/IORWLocal.fst&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a id="5e7e09dac74334162e830b9942a3531a" class="idref" href="#5e7e09dac74334162e830b9942a3531a"><span class="id" title="notation">&quot;</span></a>↑ log" := (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#ev_list_to_stream"><span class="id" title="definition">ev_list_to_stream</span></a> <span class="id" title="var">log</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 30).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Program Definition</span> <a id="ret_ts1" class="idref" href="#ret_ts1"><span class="id" title="definition">ret_ts1</span></a> {<a id="A:16" class="idref" href="#A:16"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} (<a id="a:17" class="idref" href="#a:17"><span class="id" title="binder">a</span></a> : <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#A:16"><span class="id" title="variable">A</span></a>) : <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpec"><span class="id" title="definition">TraceSpec</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#A:16"><span class="id" title="variable">A</span></a> := <span class="id" title="keyword">fun</span> <a id="log:18" class="idref" href="#log:18"><span class="id" title="binder">log</span></a> <a id="p:19" class="idref" href="#p:19"><span class="id" title="binder">p</span></a> ⇒ <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#p:19"><span class="id" title="variable">p</span></a> ( <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#a:17"><span class="id" title="variable">a</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Program Definition</span> <a id="ret_ts2" class="idref" href="#ret_ts2"><span class="id" title="definition">ret_ts2</span></a> {<a id="A:20" class="idref" href="#A:20"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} (<a id="a:21" class="idref" href="#a:21"><span class="id" title="binder">a</span></a> : <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#A:20"><span class="id" title="variable">A</span></a>) : <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpec"><span class="id" title="definition">TraceSpec</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#A:20"><span class="id" title="variable">A</span></a> := <span class="id" title="keyword">fun</span> <a id="log:22" class="idref" href="#log:22"><span class="id" title="binder">log</span></a> <a id="p:23" class="idref" href="#p:23"><span class="id" title="binder">p</span></a> ⇒ <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#p:23"><span class="id" title="variable">p</span></a> (<a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#5e7e09dac74334162e830b9942a3531a"><span class="id" title="notation">↑</span></a><a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#log:22"><span class="id" title="variable">log</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#a:21"><span class="id" title="variable">a</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;RE&nbsp;:&nbsp;forall&nbsp;A&nbsp;B,&nbsp;E1&nbsp;A&nbsp;-&gt;&nbsp;A&nbsp;-&gt;&nbsp;E2&nbsp;B&nbsp;-&gt;&nbsp;B&nbsp;-&gt;&nbsp;Prop<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(forall&nbsp;a1&nbsp;a2,&nbsp;RE&nbsp;e1&nbsp;a1&nbsp;e2&nbsp;a2&nbsp;-&gt;&nbsp;corec&nbsp;(k1&nbsp;a1)&nbsp;(k2&nbsp;a2))&nbsp;-&gt;&nbsp;eutt&nbsp;VisF&nbsp;e1&nbsp;k1&nbsp;VisF&nbsp;e2&nbsp;k2<br/>
<br/>
*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Program Definition</span> <a id="bind_ts1_all" class="idref" href="#bind_ts1_all"><span class="id" title="definition">bind_ts1_all</span></a> {<a id="A:24" class="idref" href="#A:24"><span class="id" title="binder">A</span></a> <a id="B:25" class="idref" href="#B:25"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>} (<a id="w:26" class="idref" href="#w:26"><span class="id" title="binder">w</span></a> : <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpec"><span class="id" title="definition">TraceSpec</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#A:24"><span class="id" title="variable">A</span></a>) (<a id="g:27" class="idref" href="#g:27"><span class="id" title="binder">g</span></a> : <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#A:24"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpec"><span class="id" title="definition">TraceSpec</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#B:25"><span class="id" title="variable">B</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="log:28" class="idref" href="#log:28"><span class="id" title="binder">log</span></a> <a id="p:29" class="idref" href="#p:29"><span class="id" title="binder">p</span></a> ⇒ <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#w:26"><span class="id" title="variable">w</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#log:28"><span class="id" title="variable">log</span></a> (<span class="id" title="keyword">fun</span> <a id="b:30" class="idref" href="#b:30"><span class="id" title="binder">b</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#EvAns"><span class="id" title="inductive">EvAns</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpec.E"><span class="id" title="variable">E</span></a>) <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#A:24"><span class="id" title="variable">A</span></a>  ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="a:31" class="idref" href="#a:31"><span class="id" title="binder">a</span></a> <a id="log':32" class="idref" href="#log':32"><span class="id" title="binder">log'</span></a>, <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#b:30"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#5e7e09dac74334162e830b9942a3531a"><span class="id" title="notation">↑</span></a><a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#log':32"><span class="id" title="variable">log'</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#a:31"><span class="id" title="variable">a</span></a><a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#g:27"><span class="id" title="variable">g</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#a:31"><span class="id" title="variable">a</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#log':32"><span class="id" title="variable">log'</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#p:29"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Props.Infinite.html#all_infinite"><span class="id" title="definition">all_infinite</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#b:30"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#p:29"><span class="id" title="variable">p</span></a> (<a class="idref" href="ITree.Props.EuttNoRet.html#noret_cast"><span class="id" title="definition">noret_cast</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#b:30"><span class="id" title="variable">b</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>  ).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">Heutt</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">split</span>; <span class="id" title="var">basic_solve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heutt</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heutt</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heutt</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heutt</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heutt</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heutt</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Program Definition</span> <a id="bind_ts1" class="idref" href="#bind_ts1"><span class="id" title="definition">bind_ts1</span></a> {<a id="A:33" class="idref" href="#A:33"><span class="id" title="binder">A</span></a> <a id="B:34" class="idref" href="#B:34"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>} (<a id="w:35" class="idref" href="#w:35"><span class="id" title="binder">w</span></a> : <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpec"><span class="id" title="definition">TraceSpec</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#A:33"><span class="id" title="variable">A</span></a>) (<a id="g:36" class="idref" href="#g:36"><span class="id" title="binder">g</span></a> : <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#A:33"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpec"><span class="id" title="definition">TraceSpec</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#B:34"><span class="id" title="variable">B</span></a>) : <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpec"><span class="id" title="definition">TraceSpec</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#B:34"><span class="id" title="variable">B</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="log:37" class="idref" href="#log:37"><span class="id" title="binder">log</span></a> <a id="p:38" class="idref" href="#p:38"><span class="id" title="binder">p</span></a> ⇒ <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#w:35"><span class="id" title="variable">w</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#log:37"><span class="id" title="variable">log</span></a> (<span class="id" title="keyword">fun</span> <a id="b:39" class="idref" href="#b:39"><span class="id" title="binder">b</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#EvAns"><span class="id" title="inductive">EvAns</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpec.E"><span class="id" title="variable">E</span></a>) <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#A:33"><span class="id" title="variable">A</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="a:40" class="idref" href="#a:40"><span class="id" title="binder">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="log':41" class="idref" href="#log':41"><span class="id" title="binder">log'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#b:39"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#5e7e09dac74334162e830b9942a3531a"><span class="id" title="notation">↑</span></a><a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#log':41"><span class="id" title="variable">log'</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#a:40"><span class="id" title="variable">a</span></a><a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">)</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#g:36"><span class="id" title="variable">g</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#a:40"><span class="id" title="variable">a</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#log':41"><span class="id" title="variable">log'</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#p:38"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Props.Infinite.html#all_infinite"><span class="id" title="definition">all_infinite</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#b:39"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#p:38"><span class="id" title="variable">p</span></a> (<a class="idref" href="ITree.Props.EuttNoRet.html#noret_cast"><span class="id" title="definition">noret_cast</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#b:39"><span class="id" title="variable">b</span></a> )<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a> ).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">Heutt</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">basic_solve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">left</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">log'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heutt</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heutt</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">left</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">log'</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heutt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heutt</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">w</span> <span class="id" title="var">log</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">wl</span> <span class="id" title="var">Hwl</span>]. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">Hwl</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">basic_solve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">left</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">log'</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">g</span> <span class="id" title="var">a</span> <span class="id" title="var">log'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">gal</span> <span class="id" title="var">Hgal</span>]. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">Hgal</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="TraceSpecMonad" class="idref" href="#TraceSpecMonad"><span class="id" title="instance">TraceSpecMonad</span></a> : <span class="id" title="class">Monad</span> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpec"><span class="id" title="definition">TraceSpec</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">ret</span> := @<a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#ret_ts2"><span class="id" title="definition">ret_ts2</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">bind</span> := @<a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#bind_ts1"><span class="id" title="definition">bind_ts1</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*If&nbsp;initial&nbsp;logs&nbsp;are&nbsp;allow&nbsp;to&nbsp;be&nbsp;inf,&nbsp;and&nbsp;b&nbsp;in&nbsp;inf&nbsp;then&nbsp;for&nbsp;any&nbsp;a&nbsp;there&nbsp;is&nbsp;some&nbsp;log,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;b&nbsp;=&nbsp;log&nbsp;++&nbsp;ret&nbsp;a,&nbsp;even&nbsp;if&nbsp;b&nbsp;never&nbsp;actually&nbsp;returns&nbsp;it,&nbsp;this&nbsp;is&nbsp;problematic,&nbsp;so&nbsp;I&nbsp;will<br/>
&nbsp;&nbsp;&nbsp;&nbsp;restrict&nbsp;it,&nbsp;I&nbsp;think&nbsp;this&nbsp;restriction&nbsp;is&nbsp;justifiable*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="apply_monot" class="idref" href="#apply_monot"><span class="id" title="lemma">apply_monot</span></a> : <span class="id" title="keyword">∀</span> (<a id="A:42" class="idref" href="#A:42"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>) (<a id="w:43" class="idref" href="#w:43"><span class="id" title="binder">w</span></a> : <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpec"><span class="id" title="definition">TraceSpec</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#A:42"><span class="id" title="variable">A</span></a>) (<a id="log:44" class="idref" href="#log:44"><span class="id" title="binder">log</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#ev_list"><span class="id" title="definition">ev_list</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpec.E"><span class="id" title="variable">E</span></a>) (<a id="p:45" class="idref" href="#p:45"><span class="id" title="binder">p</span></a> <a id="p':46" class="idref" href="#p':46"><span class="id" title="binder">p'</span></a> : <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpecInput"><span class="id" title="definition">TraceSpecInput</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#A:42"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="b:47" class="idref" href="#b:47"><span class="id" title="binder">b</span></a>, <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#p:45"><span class="id" title="variable">p</span></a> <a class="idref" href="ITree.Extra.Dijkstra.DelaySpecMonad.html#906b5651d9232c6101ffe824c430eeb4"><span class="id" title="notation">∋</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#b:47"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#p':46"><span class="id" title="variable">p'</span></a> <a class="idref" href="ITree.Extra.Dijkstra.DelaySpecMonad.html#906b5651d9232c6101ffe824c430eeb4"><span class="id" title="notation">∋</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#b:47"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#w:43"><span class="id" title="variable">w</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#log:44"><span class="id" title="variable">log</span></a> <a class="idref" href="ITree.Extra.Dijkstra.DelaySpecMonad.html#906b5651d9232c6101ffe824c430eeb4"><span class="id" title="notation">∋</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#p:45"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#w:43"><span class="id" title="variable">w</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#log:44"><span class="id" title="variable">log</span></a> <a class="idref" href="ITree.Extra.Dijkstra.DelaySpecMonad.html#906b5651d9232c6101ffe824c430eeb4"><span class="id" title="notation">∋</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#p':46"><span class="id" title="variable">p'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">w</span> <span class="id" title="var">log</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">w'</span> <span class="id" title="var">Hw'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="var">Program</span> <span class="id" title="keyword">Instance</span> <a id="TraceSpecMonadLaws" class="idref" href="#TraceSpecMonadLaws"><span class="id" title="instance">TraceSpecMonadLaws</span></a> : <a class="idref" href="ITree.Basics.Monad.html#MonadLawsE"><span class="id" title="class">MonadLawsE</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpec"><span class="id" title="definition">TraceSpec</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">x</span> <span class="id" title="var">into</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">basic_solve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#inv_append_eutt"><span class="id" title="lemma">inv_append_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Props.Infinite.html#may_converge"><span class="id" title="inductive">may_converge</span></a> <span class="id" title="var">a</span> (<a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#5e7e09dac74334162e830b9942a3531a"><span class="id" title="notation">↑</span></a> <span class="id" title="var">log</span> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <span class="id" title="var">a</span>) ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#may_converge_append"><span class="id" title="lemma">may_converge_append</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#finite_list_to_stream"><span class="id" title="lemma">finite_list_to_stream</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Props.Infinite.html#all_infinite_not_converge"><span class="id" title="lemma">all_infinite_not_converge</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">left</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">log</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">x</span> <span class="id" title="var">into</span> <span class="id" title="var">w</span>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">basic_solve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#apply_monot"><span class="id" title="lemma">apply_monot</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">basic_solve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Props.EuttNoRet.html#noret_cast_nop"><span class="id" title="lemma">noret_cast_nop</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#apply_monot"><span class="id" title="lemma">apply_monot</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#classic_converge_itrace"><span class="id" title="lemma">classic_converge_itrace</span></a> <span class="id" title="var">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">basic_solve</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">r</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">log0</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Props.EuttNoRet.html#noret_cast_nop"><span class="id" title="lemma">noret_cast_nop</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">x</span> <span class="id" title="var">into</span> <span class="id" title="var">w</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">basic_solve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#apply_monot"><span class="id" title="lemma">apply_monot</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">basic_solve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">left</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">log'</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">exfalso</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Props.Infinite.html#may_converge"><span class="id" title="inductive">may_converge</span></a> <span class="id" title="var">a</span> (<a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#5e7e09dac74334162e830b9942a3531a"><span class="id" title="notation">↑</span></a><span class="id" title="var">log'</span> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <span class="id" title="var">a</span>) ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#may_converge_append"><span class="id" title="lemma">may_converge_append</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#finite_list_to_stream"><span class="id" title="lemma">finite_list_to_stream</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Props.Infinite.html#all_infinite"><span class="id" title="definition">all_infinite</span></a> (@<a class="idref" href="ITree.Props.EuttNoRet.html#noret_cast"><span class="id" title="definition">noret_cast</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#EvAns"><span class="id" title="inductive">EvAns</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpec.E"><span class="id" title="variable">E</span></a>) <span class="id" title="var">A</span> <span class="id" title="var">A</span> <span class="id" title="var">b</span>) ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Props.EuttNoRet.html#all_infinite_bind"><span class="id" title="lemma">all_infinite_bind</span></a>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Props.EuttNoRet.html#noret_cast"><span class="id" title="definition">noret_cast</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Props.Infinite.html#all_infinite_not_converge"><span class="id" title="lemma">all_infinite_not_converge</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">r</span> := <span class="id" title="var">a</span>) ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Props.EuttNoRet.html#all_infinite_bind"><span class="id" title="lemma">all_infinite_bind</span></a>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">p</span> <span class="id" title="var">Hp</span>]. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Eq.Eqit.html#eutt_clo_bind"><span class="id" title="lemma">eutt_clo_bind</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">UU</span> := <span class="id" title="keyword">fun</span> <a id="a:50" class="idref" href="#a:50"><span class="id" title="binder">a</span></a> <a id="b:51" class="idref" href="#b:51"><span class="id" title="binder">b</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a>); <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Props.EuttNoRet.html#noret_bind_nop"><span class="id" title="lemma">noret_bind_nop</span></a>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#apply_monot"><span class="id" title="lemma">apply_monot</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">basic_solve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">left</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">log'</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Props.EuttNoRet.html#all_infinite_bind"><span class="id" title="lemma">all_infinite_bind</span></a>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">p</span> <span class="id" title="var">Hp</span>]. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Eq.Eqit.html#eutt_clo_bind"><span class="id" title="lemma">eutt_clo_bind</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">UU</span> := <span class="id" title="keyword">fun</span> <a id="a:54" class="idref" href="#a:54"><span class="id" title="binder">a</span></a> <a id="b:55" class="idref" href="#b:55"><span class="id" title="binder">b</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a>); <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Props.EuttNoRet.html#euttNoRet_sym"><span class="id" title="lemma">euttNoRet_sym</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Props.EuttNoRet.html#noret_bind_nop"><span class="id" title="lemma">noret_bind_nop</span></a>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">w1</span> <span class="id" title="var">w2</span> <span class="id" title="var">Hw</span> <span class="id" title="var">k1</span> <span class="id" title="var">k2</span> <span class="id" title="var">Hk</span>. <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span>. <span class="id" title="tactic">do</span> 3 <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hk</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#bind_ts1"><span class="id" title="definition">bind_ts1</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hw</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">w1</span> <span class="id" title="var">log</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">w1l</span> <span class="id" title="var">Hw1l</span>]; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hw1l</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">basic_solve</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">log'</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hk</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hw</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">w2</span> <span class="id" title="var">log</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">w2l</span> <span class="id" title="var">Hw2l</span>]; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hw2l</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">basic_solve</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">log'</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hk</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Program Definition</span> <a id="obs_trace" class="idref" href="#obs_trace"><span class="id" title="definition">obs_trace</span></a> (<a id="A:56" class="idref" href="#A:56"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>) (<a id="t:57" class="idref" href="#t:57"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpec.E"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#A:56"><span class="id" title="variable">A</span></a>) : <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpec"><span class="id" title="definition">TraceSpec</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#A:56"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="log:58" class="idref" href="#log:58"><span class="id" title="binder">log</span></a> <a id="p:59" class="idref" href="#p:59"><span class="id" title="binder">p</span></a> ⇒ <span class="id" title="keyword">∀</span> <a id="b:60" class="idref" href="#b:60"><span class="id" title="binder">b</span></a>, <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#b:60"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#t:57"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#p:59"><span class="id" title="variable">p</span></a> (<a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#5e7e09dac74334162e830b9942a3531a"><span class="id" title="notation">↑</span></a><a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#log:58"><span class="id" title="variable">log</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#b:60"><span class="id" title="variable">b</span></a>).<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="TraceSpecObs" class="idref" href="#TraceSpecObs"><span class="id" title="instance">TraceSpecObs</span></a> : <a class="idref" href="ITree.Extra.Dijkstra.DijkstraMonad.html#EffectObs"><span class="id" title="class">EffectObs</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpec.E"><span class="id" title="variable">E</span></a>) <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpec"><span class="id" title="definition">TraceSpec</span></a> := <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#obs_trace"><span class="id" title="definition">obs_trace</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="bind_split_diverge" class="idref" href="#bind_split_diverge"><span class="id" title="lemma">bind_split_diverge</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="A:61" class="idref" href="#A:61"><span class="id" title="binder">A</span></a> <a id="B:62" class="idref" href="#B:62"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>) (<a id="log:63" class="idref" href="#log:63"><span class="id" title="binder">log</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#ev_list"><span class="id" title="definition">ev_list</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpec.E"><span class="id" title="variable">E</span></a>) (<a id="p:64" class="idref" href="#p:64"><span class="id" title="binder">p</span></a> : <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpecInput"><span class="id" title="definition">TraceSpecInput</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#B:62"><span class="id" title="variable">B</span></a>) (<a id="b:65" class="idref" href="#b:65"><span class="id" title="binder">b</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpec.E"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#B:62"><span class="id" title="variable">B</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="b':66" class="idref" href="#b':66"><span class="id" title="binder">b'</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#EvAns"><span class="id" title="inductive">EvAns</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpec.E"><span class="id" title="variable">E</span></a>) <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#A:61"><span class="id" title="variable">A</span></a>) (<a id="g':67" class="idref" href="#g':67"><span class="id" title="binder">g'</span></a> : <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#A:61"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#EvAns"><span class="id" title="inductive">EvAns</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpec.E"><span class="id" title="variable">E</span></a>) <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#B:62"><span class="id" title="variable">B</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#b':66"><span class="id" title="variable">b'</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#g':67"><span class="id" title="variable">g'</span></a> <a class="idref" href="ITree.Basics.Monad.html#20d7a3de27e35f38017a31a5b4c235e8"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#b:65"><span class="id" title="variable">b</span></a>)%<span class="id" title="var">itree</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Props.Infinite.html#all_infinite"><span class="id" title="definition">all_infinite</span></a> (<a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#5e7e09dac74334162e830b9942a3531a"><span class="id" title="notation">↑</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#log:63"><span class="id" title="variable">log</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#b':66"><span class="id" title="variable">b'</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#p:64"><span class="id" title="variable">p</span></a> <a class="idref" href="ITree.Extra.Dijkstra.DelaySpecMonad.html#906b5651d9232c6101ffe824c430eeb4"><span class="id" title="notation">∋</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> (<a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#5e7e09dac74334162e830b9942a3531a"><span class="id" title="notation">↑</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#log:63"><span class="id" title="variable">log</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#b':66"><span class="id" title="variable">b'</span></a>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> : <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#A:61"><span class="id" title="variable">A</span></a> ⇒ <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.spin"><span class="id" title="definition">ITree.spin</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#p:64"><span class="id" title="variable">p</span></a> <a class="idref" href="ITree.Extra.Dijkstra.DelaySpecMonad.html#906b5651d9232c6101ffe824c430eeb4"><span class="id" title="notation">∋</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#5e7e09dac74334162e830b9942a3531a"><span class="id" title="notation">↑</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#log:63"><span class="id" title="variable">log</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#b:65"><span class="id" title="variable">b</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">log</span> <span class="id" title="var">p</span> <span class="id" title="var">b</span> <span class="id" title="var">b'</span> <span class="id" title="var">g'</span> <span class="id" title="var">Hsplit</span> <span class="id" title="var">Hdiv</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hsplit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">enough</span> (<a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#5e7e09dac74334162e830b9942a3531a"><span class="id" title="notation">↑</span></a> <span class="id" title="var">log</span> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> <span class="id" title="var">b'</span> <span class="id" title="var">g'</span> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> (<a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#5e7e09dac74334162e830b9942a3531a"><span class="id" title="notation">↑</span></a> <span class="id" title="var">log</span> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <span class="id" title="var">b'</span>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.spin"><span class="id" title="definition">ITree.spin</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#append"><span class="id" title="definition">append</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_bind"><span class="id" title="lemma">bind_bind</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Eq.Eqit.html#eutt_clo_bind"><span class="id" title="lemma">eutt_clo_bind</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">RR</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>) (<span class="id" title="var">UU</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>); <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Props.EuttNoRet.html#euttNoRet_subrel"><span class="id" title="lemma">euttNoRet_subrel</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Props.EuttNoRet.html#euttNoRet_trans"><span class="id" title="lemma">euttNoRet_trans</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">t2</span> := <span class="id" title="var">b'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Props.EuttNoRet.html#euttNoRet_sym"><span class="id" title="lemma">euttNoRet_sym</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Props.EuttNoRet.html#noret_bind_nop"><span class="id" title="lemma">noret_bind_nop</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#all_infinite_bind_append"><span class="id" title="lemma">all_infinite_bind_append</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Props.EuttNoRet.html#noret_bind_nop"><span class="id" title="lemma">noret_bind_nop</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#all_infinite_bind_append"><span class="id" title="lemma">all_infinite_bind_append</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="TraceSpecMorph" class="idref" href="#TraceSpecMorph"><span class="id" title="instance">TraceSpecMorph</span></a> : <a class="idref" href="ITree.Extra.Dijkstra.DijkstraMonad.html#MonadMorphism"><span class="id" title="class">MonadMorphism</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpec.E"><span class="id" title="variable">E</span></a>) <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpec"><span class="id" title="definition">TraceSpec</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpecObs"><span class="id" title="instance">TraceSpecObs</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.Dijkstra.DijkstraMonad.html#obs"><span class="id" title="definition">obs</span></a>, <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpecObs"><span class="id" title="instance">TraceSpecObs</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#trace_refine_ret"><span class="id" title="lemma">trace_refine_ret</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#trace_refine_ret_inv_l"><span class="id" title="lemma">trace_refine_ret_inv_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#classic_converge_itrace"><span class="id" title="lemma">classic_converge_itrace</span></a> <span class="id" title="var">b</span>); <span class="id" title="var">basic_solve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">left</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">r</span>. <span class="id" title="tactic">setoid_rewrite</span> &lt;- <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<span class="id" title="var">log</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">log0</span>)%<span class="id" title="var">list</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#append_assoc"><span class="id" title="lemma">append_assoc</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">intros</span> <span class="id" title="var">bf</span> <span class="id" title="var">Hbf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="keyword">fun</span> <a id="r:69" class="idref" href="#r:69"><span class="id" title="binder">r</span></a> : <span class="id" title="var">A</span> ⇒ <span class="id" title="var">bf</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">g</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> ( <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> <span class="id" title="var">b</span> <span class="id" title="var">g</span> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#5e7e09dac74334162e830b9942a3531a"><span class="id" title="notation">↑</span></a><span class="id" title="var">log0</span> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <span class="id" title="var">bf</span><a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">)</span></a> ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H1</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#append"><span class="id" title="definition">append</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_bind"><span class="id" title="lemma">bind_bind</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_l"><span class="id" title="lemma">bind_ret_l</span></a>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">g</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#append_assoc"><span class="id" title="lemma">append_assoc</span></a>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H2</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">g</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#trace_refine_converge_bind"><span class="id" title="lemma">trace_refine_converge_bind</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">r</span> := <span class="id" title="var">r</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H1</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#may_converge_append"><span class="id" title="lemma">may_converge_append</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#finite_list_to_stream"><span class="id" title="lemma">finite_list_to_stream</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">right</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#append_div"><span class="id" title="lemma">append_div</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#append"><span class="id" title="definition">append</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_bind"><span class="id" title="lemma">bind_bind</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#trace_refine_diverge_bind"><span class="id" title="lemma">trace_refine_diverge_bind</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#decompose_trace_refine_bind"><span class="id" title="lemma">decompose_trace_refine_bind</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hbind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">basic_solve</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">as</span> ?<span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#classic_converge_itrace"><span class="id" title="lemma">classic_converge_itrace</span></a> <span class="id" title="var">b'</span>); <span class="id" title="var">basic_solve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;×<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;easily&nbsp;convince&nbsp;myself&nbsp;that&nbsp;H&nbsp;is&nbsp;unused&nbsp;without&nbsp;needing&nbsp;the&nbsp;refactor&nbsp;rest*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">H</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a>); <span class="id" title="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hbind</span> : (<a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> <span class="id" title="var">b'</span> <span class="id" title="var">g'</span> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> <span class="id" title="var">m</span> <span class="id" title="var">f</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H4</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_bind"><span class="id" title="lemma">bind_bind</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_l"><span class="id" title="lemma">bind_ret_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#5e7e09dac74334162e830b9942a3531a"><span class="id" title="notation">↑</span></a> <span class="id" title="var">log0</span> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">(</span></a><span class="id" title="var">g'</span> <span class="id" title="var">r</span><a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">)</span></a> <a class="idref" href="ITree.Basics.Monad.html#20d7a3de27e35f38017a31a5b4c235e8"><span class="id" title="notation">≈</span></a> <span class="id" title="var">b</span>)%<span class="id" title="var">itree</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H5</span> (<span class="id" title="var">g'</span> <span class="id" title="var">r</span>) ). <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H6</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#5e7e09dac74334162e830b9942a3531a"><span class="id" title="notation">↑</span></a><span class="id" title="var">log</span> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <span class="id" title="var">b</span> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#5e7e09dac74334162e830b9942a3531a"><span class="id" title="notation">↑</span></a><span class="id" title="var">log'</span> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <span class="id" title="var">g'</span> <span class="id" title="var">r</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">r</span>)%<span class="id" title="var">itree</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H6</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H4</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#append_assoc"><span class="id" title="lemma">append_assoc</span></a>. <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#append_assoc"><span class="id" title="lemma">append_assoc</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#inv_append_eutt"><span class="id" title="lemma">inv_append_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hevsplit</span> ?]. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hevsplit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*Hevsplit&nbsp;:&nbsp;log&nbsp;++&nbsp;n&nbsp;≈&nbsp;log'&nbsp;++&nbsp;g'&nbsp;r*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;then&nbsp;need&nbsp;to&nbsp;show&nbsp;g'&nbsp;r&nbsp;⊑&nbsp;f&nbsp;r*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H6</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;comes&nbsp;from&nbsp;trace_refine_bind_cont_inv<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;because&nbsp;b'&nbsp;converges&nbsp;to&nbsp;r&nbsp;and&nbsp;b'&nbsp;&gt;&gt;=&nbsp;g'&nbsp;⊑&nbsp;m&nbsp;&gt;&gt;=&nbsp;f<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#trace_refine_bind_cont_inv"><span class="id" title="lemma">trace_refine_bind_cont_inv</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">r</span>:= <span class="id" title="var">r</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hbind</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H4</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#may_converge_append"><span class="id" title="lemma">may_converge_append</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#finite_list_to_stream"><span class="id" title="lemma">finite_list_to_stream</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#bind_split_diverge"><span class="id" title="lemma">bind_split_diverge</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Props.Infinite.html#may_converge"><span class="id" title="inductive">may_converge</span></a> <span class="id" title="var">a</span> <span class="id" title="var">b'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#may_converge_two_list"><span class="id" title="lemma">may_converge_two_list</span></a>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exfalso</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Props.Infinite.html#all_infinite_not_converge"><span class="id" title="lemma">all_infinite_not_converge</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#bind_split_diverge"><span class="id" title="lemma">bind_split_diverge</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="TraceSpecOrder" class="idref" href="#TraceSpecOrder"><span class="id" title="instance">TraceSpecOrder</span></a> : <a class="idref" href="ITree.Extra.Dijkstra.DijkstraMonad.html#OrderM"><span class="id" title="class">OrderM</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpec"><span class="id" title="definition">TraceSpec</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> <a id="w1:70" class="idref" href="#w1:70"><span class="id" title="binder">w1</span></a> <a id="w2:71" class="idref" href="#w2:71"><span class="id" title="binder">w2</span></a> ⇒ <span class="id" title="keyword">∀</span> <a id="log:72" class="idref" href="#log:72"><span class="id" title="binder">log</span></a> <a id="p:73" class="idref" href="#p:73"><span class="id" title="binder">p</span></a>, <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#p:73"><span class="id" title="variable">p</span></a> <a class="idref" href="ITree.Extra.Dijkstra.DelaySpecMonad.html#18a3a5e4581c6ce309a6851f9747d936"><span class="id" title="notation">∈</span></a> <a class="idref" href="ITree.Extra.Dijkstra.DelaySpecMonad.html#18a3a5e4581c6ce309a6851f9747d936"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#w2:71"><span class="id" title="variable">w2</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#log:72"><span class="id" title="variable">log</span></a><a class="idref" href="ITree.Extra.Dijkstra.DelaySpecMonad.html#18a3a5e4581c6ce309a6851f9747d936"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#p:73"><span class="id" title="variable">p</span></a> <a class="idref" href="ITree.Extra.Dijkstra.DelaySpecMonad.html#18a3a5e4581c6ce309a6851f9747d936"><span class="id" title="notation">∈</span></a> <a class="idref" href="ITree.Extra.Dijkstra.DelaySpecMonad.html#18a3a5e4581c6ce309a6851f9747d936"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#w1:70"><span class="id" title="variable">w1</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#log:72"><span class="id" title="variable">log</span></a><a class="idref" href="ITree.Extra.Dijkstra.DelaySpecMonad.html#18a3a5e4581c6ce309a6851f9747d936"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="TraceSpecOrderLaws" class="idref" href="#TraceSpecOrderLaws"><span class="id" title="instance">TraceSpecOrderLaws</span></a> : <a class="idref" href="ITree.Extra.Dijkstra.DijkstraMonad.html#OrderedMonad"><span class="id" title="class">OrderedMonad</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpec"><span class="id" title="definition">TraceSpec</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">w2</span> <span class="id" title="var">log</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">w2'</span> <span class="id" title="var">Hw2</span>]. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hw2</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="var">basic_solve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">left</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">log'</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="verify_cond" class="idref" href="#verify_cond"><span class="id" title="definition">verify_cond</span></a> {<a id="A:74" class="idref" href="#A:74"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} : <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpec"><span class="id" title="definition">TraceSpec</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#A:74"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpec.E"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#A:74"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.Dijkstra.DijkstraMonad.html#DijkstraProp"><span class="id" title="definition">DijkstraProp</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpec.E"><span class="id" title="variable">E</span></a>) <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpec"><span class="id" title="definition">TraceSpec</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpecObs"><span class="id" title="instance">TraceSpecObs</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#A:74"><span class="id" title="variable">A</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Program Definition</span> <a id="encode" class="idref" href="#encode"><span class="id" title="definition">encode</span></a> {<a id="A:75" class="idref" href="#A:75"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} (<a id="post:76" class="idref" href="#post:76"><span class="id" title="binder">post</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpec.E"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#A:75"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>) (<a id="pre:77" class="idref" href="#pre:77"><span class="id" title="binder">pre</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#ev_list"><span class="id" title="definition">ev_list</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpec.E"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>) : <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpec"><span class="id" title="definition">TraceSpec</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#A:75"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="log:78" class="idref" href="#log:78"><span class="id" title="binder">log</span></a> <a id="p:79" class="idref" href="#p:79"><span class="id" title="binder">p</span></a> ⇒ <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#pre:77"><span class="id" title="variable">pre</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#log:78"><span class="id" title="variable">log</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <span class="id" title="keyword">∀</span> <a id="b:80" class="idref" href="#b:80"><span class="id" title="binder">b</span></a>, <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#post:76"><span class="id" title="variable">post</span></a> (<a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#5e7e09dac74334162e830b9942a3531a"><span class="id" title="notation">↑</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#log:78"><span class="id" title="variable">log</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#b:80"><span class="id" title="variable">b</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#p:79"><span class="id" title="variable">p</span></a> (<a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#5e7e09dac74334162e830b9942a3531a"><span class="id" title="notation">↑</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#log:78"><span class="id" title="variable">log</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#b:80"><span class="id" title="variable">b</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Program Definition</span> <a id="encode_dyn" class="idref" href="#encode_dyn"><span class="id" title="definition">encode_dyn</span></a> {<a id="A:81" class="idref" href="#A:81"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} (<a id="post:82" class="idref" href="#post:82"><span class="id" title="binder">post</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#ev_list"><span class="id" title="definition">ev_list</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpec.E"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpec.E"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#A:81"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>) (<a id="pre:83" class="idref" href="#pre:83"><span class="id" title="binder">pre</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#ev_list"><span class="id" title="definition">ev_list</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpec.E"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>) : <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpec"><span class="id" title="definition">TraceSpec</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#A:81"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="log:84" class="idref" href="#log:84"><span class="id" title="binder">log</span></a> <a id="p:85" class="idref" href="#p:85"><span class="id" title="binder">p</span></a> ⇒ <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#pre:83"><span class="id" title="variable">pre</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#log:84"><span class="id" title="variable">log</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <span class="id" title="keyword">∀</span> <a id="b:86" class="idref" href="#b:86"><span class="id" title="binder">b</span></a>, <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#post:82"><span class="id" title="variable">post</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#log:84"><span class="id" title="variable">log</span></a> (<a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#5e7e09dac74334162e830b9942a3531a"><span class="id" title="notation">↑</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#log:84"><span class="id" title="variable">log</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#b:86"><span class="id" title="variable">b</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#p:85"><span class="id" title="variable">p</span></a> (<a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#5e7e09dac74334162e830b9942a3531a"><span class="id" title="notation">↑</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#log:84"><span class="id" title="variable">log</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#b:86"><span class="id" title="variable">b</span></a>).<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpec"><span class="id" title="section">TraceSpec</span></a>.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpecMonad"><span class="id" title="instance">TraceSpecMonad</span></a> {<span class="id" title="var">E</span>}.<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpecMonadLaws"><span class="id" title="instance">TraceSpecMonadLaws</span></a> {<span class="id" title="var">E</span>}.<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpecOrder"><span class="id" title="instance">TraceSpecOrder</span></a> {<span class="id" title="var">E</span>}.<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpecOrderLaws"><span class="id" title="instance">TraceSpecOrderLaws</span></a> {<span class="id" title="var">E</span>}.<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpecObs"><span class="id" title="instance">TraceSpecObs</span></a> {<span class="id" title="var">E</span>}.<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpecMorph"><span class="id" title="instance">TraceSpecMorph</span></a> {<span class="id" title="var">E</span>}.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="NonDetExample" class="idref" href="#NonDetExample"><span class="id" title="section">NonDetExample</span></a>.<br/>

<br/>
<span class="id" title="keyword">Variant</span> <a id="NonDet" class="idref" href="#NonDet"><span class="id" title="inductive">NonDet</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;<a id="Decide" class="idref" href="#Decide"><span class="id" title="constructor">Decide</span></a> : <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#NonDet:87"><span class="id" title="inductive">NonDet</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="decide_ex" class="idref" href="#decide_ex"><span class="id" title="definition">decide_ex</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#NonDet"><span class="id" title="inductive">NonDet</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.iter"><span class="id" title="definition">ITree.iter</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> (<a class="idref" href="ITree.Core.Subevent.html#trigger"><span class="id" title="abbreviation">trigger</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#Decide"><span class="id" title="constructor">Decide</span></a>) (<span class="id" title="keyword">fun</span> <a id="b:89" class="idref" href="#b:89"><span class="id" title="binder">b</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> ⇒ <span class="id" title="keyword">if</span> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#b:89"><span class="id" title="variable">b</span></a> <span class="id" title="keyword">then</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>) <span class="id" title="keyword">else</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>) )) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="decide_ex_pre" class="idref" href="#decide_ex_pre"><span class="id" title="definition">decide_ex_pre</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#ev_list"><span class="id" title="definition">ev_list</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#NonDet"><span class="id" title="inductive">NonDet</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> := <span class="id" title="keyword">fun</span> <a id="log:90" class="idref" href="#log:90"><span class="id" title="binder">log</span></a> ⇒ <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#log:90"><span class="id" title="variable">log</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>.<br/>

<br/>
<span class="id" title="keyword">Variant</span> <a id="is_bool" class="idref" href="#is_bool"><span class="id" title="inductive">is_bool</span></a> (<a id="b:91" class="idref" href="#b:91"><span class="id" title="binder">b</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) : <span class="id" title="keyword">∀</span> <a id="A:92" class="idref" href="#A:92"><span class="id" title="binder">A</span></a>, <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#EvAns"><span class="id" title="inductive">EvAns</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#NonDet"><span class="id" title="inductive">NonDet</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#A:92"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a id="is_bool_matches" class="idref" href="#is_bool_matches"><span class="id" title="constructor">is_bool_matches</span></a> : <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#is_bool:93"><span class="id" title="inductive">is_bool</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#b:91"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evans"><span class="id" title="constructor">evans</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#Decide"><span class="id" title="constructor">Decide</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#b:91"><span class="id" title="variable">b</span></a>)<br/>
.<br/>

<br/>
<span class="id" title="keyword">Hint Constructors</span> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#is_bool"><span class="id" title="inductive">is_bool</span></a> : <span class="id" title="var">itree</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="fal_decide_ex" class="idref" href="#fal_decide_ex"><span class="id" title="definition">fal_decide_ex</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#NonDet"><span class="id" title="inductive">NonDet</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Extra.ITrace.ITracePreds.html#front_and_last"><span class="id" title="inductive">front_and_last</span></a> (<a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#is_bool"><span class="id" title="inductive">is_bool</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>) (<a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#is_bool"><span class="id" title="inductive">is_bool</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="decide_ex_post" class="idref" href="#decide_ex_post"><span class="id" title="definition">decide_ex_post</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#NonDet"><span class="id" title="inductive">NonDet</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="b:95" class="idref" href="#b:95"><span class="id" title="binder">b</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Props.Infinite.html#all_infinite"><span class="id" title="definition">all_infinite</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#b:95"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.ITrace.ITracePreds.html#trace_forall"><span class="id" title="definition">trace_forall</span></a> (<a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#is_bool"><span class="id" title="inductive">is_bool</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a>) <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#b:95"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Props.Infinite.html#may_converge"><span class="id" title="inductive">may_converge</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#b:95"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#fal_decide_ex"><span class="id" title="definition">fal_decide_ex</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#b:95"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="decide_ex_satisfies_spec" class="idref" href="#decide_ex_satisfies_spec"><span class="id" title="lemma">decide_ex_satisfies_spec</span></a> : <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#verify_cond"><span class="id" title="definition">verify_cond</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#NonDet"><span class="id" title="inductive">NonDet</span></a> (<a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#encode"><span class="id" title="definition">encode</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#NonDet"><span class="id" title="inductive">NonDet</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#decide_ex_post"><span class="id" title="definition">decide_ex_post</span></a> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#decide_ex_pre"><span class="id" title="definition">decide_ex_pre</span></a> ) <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#decide_ex"><span class="id" title="definition">decide_ex</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hlog</span> <span class="id" title="var">H</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlog</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#append"><span class="id" title="definition">append</span></a> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_l"><span class="id" title="lemma">bind_ret_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_l"><span class="id" title="lemma">bind_ret_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#decide_ex"><span class="id" title="definition">decide_ex</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">b</span>. <span class="id" title="var">pcofix</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">b</span> <span class="id" title="var">Hb</span> <span class="id" title="var">Hdiv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#unfold_iter"><span class="id" title="lemma">unfold_iter</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hb</span> <span class="id" title="tactic">at</span> 1. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_bind"><span class="id" title="lemma">bind_bind</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#bind_trigger_refine"><span class="id" title="lemma">bind_trigger_refine</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hb</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hb'</span>; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">∃</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>; <span class="id" title="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">basic_solve</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_l"><span class="id" title="lemma">bind_ret_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Hb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">enough</span> (<span class="id" title="definition">paco1</span> (<a class="idref" href="ITree.Extra.ITrace.ITracePreds.html#trace_forall_"><span class="id" title="definition">trace_forall_</span></a> (<a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#is_bool"><span class="id" title="inductive">is_bool</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a>) ) <span class="id" title="var">r</span> <span class="id" title="var">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">punfold</span> <span class="id" title="var">H1</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;×  <span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">right</span>. <span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">assert</span> (<span class="id" title="var">k1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> <a class="idref" href="ITree.Basics.Monad.html#20d7a3de27e35f38017a31a5b4c235e8"><span class="id" title="notation">≈</span></a> <span class="id" title="var">k'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>)%<span class="id" title="var">itree</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">REL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">x</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdiv</span>. <span class="id" title="var">pinversion</span> <span class="id" title="var">Hdiv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ddestruction</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;×  <span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHeqitF</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">x</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdiv</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdiv</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_l"><span class="id" title="lemma">bind_ret_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#trace_refine_ret_inv_l"><span class="id" title="lemma">trace_refine_ret_inv_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdiv</span>. <span class="id" title="var">pinversion</span> <span class="id" title="var">Hdiv</span>. <span class="id" title="var">ddestruction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="var">pinversion</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">red</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#append_nil"><span class="id" title="lemma">append_nil</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#append_nil"><span class="id" title="lemma">append_nil</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#decide_ex"><span class="id" title="definition">decide_ex</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#unfold_iter"><span class="id" title="lemma">unfold_iter</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_bind"><span class="id" title="lemma">bind_bind</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_trigger"><span class="id" title="lemma">bind_trigger</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#refine_ret_vis_contra"><span class="id" title="lemma">refine_ret_vis_contra</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">ev</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">ans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.ITrace.ITracePreds.html#front_and_last_cons"><span class="id" title="constructor">front_and_last_cons</span></a>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHmay_converge</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">IHmay_converge</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#unfold_iter"><span class="id" title="lemma">unfold_iter</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_bind"><span class="id" title="lemma">bind_bind</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#bind_trigger_refine"><span class="id" title="lemma">bind_trigger_refine</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">∃</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>; <span class="id" title="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">basic_solve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pinversion</span> <span class="id" title="var">H0</span>. <span class="id" title="var">ddestruction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> <a class="idref" href="ITree.Basics.Monad.html#20d7a3de27e35f38017a31a5b4c235e8"><span class="id" title="notation">≈</span></a> <span class="id" title="var">k'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>)%<span class="id" title="var">itree</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">REL</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_l"><span class="id" title="lemma">bind_ret_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">clear</span> <span class="id" title="var">IHmay_converge</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#unfold_iter"><span class="id" title="lemma">unfold_iter</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_bind"><span class="id" title="lemma">bind_bind</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#bind_trigger_refine"><span class="id" title="lemma">bind_trigger_refine</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">∃</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>; <span class="id" title="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">basic_solve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pinversion</span> <span class="id" title="var">H0</span>. <span class="id" title="var">ddestruction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_l"><span class="id" title="lemma">bind_ret_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#trace_refine_ret_inv_l"><span class="id" title="lemma">trace_refine_ret_inv_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.ITrace.ITracePreds.html#front_and_last_base"><span class="id" title="constructor">front_and_last_base</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">r</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>); <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H2</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">v</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#NonDetExample"><span class="id" title="section">NonDetExample</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
