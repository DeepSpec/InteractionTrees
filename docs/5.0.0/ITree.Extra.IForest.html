<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="https://github.com/DeepSpec/InteractionTrees">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">ITree.Extra.IForest</h1>

<div class="code">
</div>

<div class="doc">
<a id="lab169"></a><h1 class="section"><span class="inlinecode"><span class="id" title="library">IForest</span></span>: Sets of itrees</h1>

<div class="paragraph"> </div>

 A monad-like structure.

<div class="paragraph"> </div>

<br/>
<span class="inlinecode">&nbsp;&nbsp;<a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <span class="id" title="var">E</span> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#PrintMults.X"><span class="id" title="variable">X</span></a> := (<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <span class="id" title="var">E</span> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#PrintMults.X"><span class="id" title="variable">X</span></a> → <span class="id" title="keyword">Prop</span>)
<div class="paragraph"> </div>

</span>
<div class="paragraph"> </div>

   Its <span class="inlinecode"><a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">bind</span></a></span> is not associative. It only satisfies an "associativity to the right"
   inequality (<span class="inlinecode"><a class="idref" href="ITree.Extra.IForest.html#bind_bind_iforest"><span class="id" title="lemma">bind_bind_iforest</span></a></span>).

<div class="paragraph"> </div>

   TODO: There may be a better definition of <span class="inlinecode"><a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">bind</span></a></span>. 
</div>
<div class="code">

<br/>

<br/>
</div>

<div class="doc">
The <span class="inlinecode"><a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a></span> "monad", consisting of sets of <span class="inlinecode"><a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="iforest" class="idref" href="#iforest"><span class="id" title="definition">iforest</span></a> (<a id="E:1" class="idref" href="#E:1"><span class="id" title="binder">E</span></a>: <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="X:2" class="idref" href="#X:2"><span class="id" title="binder">X</span></a>: <span class="id" title="keyword">Type</span>): <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:1"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#X:2"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>.<br/>

<br/>
</div>

<div class="doc">
TODO: There may be a generalization to a kind of monad transformer
    <span class="inlinecode"><span class="id" title="var">PropT</span></span> <span class="inlinecode"><a class="idref" href="ITree.Basics.MonadState.html#State.M"><span class="id" title="variable">M</span></a></span> <span class="inlinecode"><a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#PrintMults.X"><span class="id" title="variable">X</span></a></span> <span class="inlinecode">:=</span> <span class="inlinecode"><a class="idref" href="ITree.Basics.MonadState.html#State.M"><span class="id" title="variable">M</span></a></span> <span class="inlinecode"><a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#PrintMults.X"><span class="id" title="variable">X</span></a></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="keyword">Prop</span></span>. 
<div class="paragraph"> </div>

 <span class="inlinecode"><a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a></span> are expected to be compatible with the <span class="inlinecode"><a class="idref" href="ITree.Eq.Eqit.html#eutt"><span class="id" title="definition">eutt</span></a></span> relation in the following sense: 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="eutt_closed" class="idref" href="#eutt_closed"><span class="id" title="definition">eutt_closed</span></a> {<a id="E:3" class="idref" href="#E:3"><span class="id" title="binder">E</span></a> <a id="X:4" class="idref" href="#X:4"><span class="id" title="binder">X</span></a>} (<a id="P:5" class="idref" href="#P:5"><span class="id" title="binder">P</span></a>: <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:3"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#X:4"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>): <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="ITree.Eq.Eqit.html#eutt"><span class="id" title="definition">eutt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#iff"><span class="id" title="definition">iff</span></a>) <a class="idref" href="ITree.Extra.IForest.html#P:5"><span class="id" title="variable">P</span></a>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="var">Polymorphic</span> <span class="id" title="keyword">Instance</span> <a id="Eq1_iforest" class="idref" href="#Eq1_iforest"><span class="id" title="instance">Eq1_iforest</span></a> {<a id="E:6" class="idref" href="#E:6"><span class="id" title="binder">E</span></a>} : <a class="idref" href="ITree.Basics.Monad.html#Eq1"><span class="id" title="class">Eq1</span></a> (<a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:6"><span class="id" title="variable">E</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="a:7" class="idref" href="#a:7"><span class="id" title="binder">a</span></a> <a id="PA:8" class="idref" href="#PA:8"><span class="id" title="binder">PA</span></a> <a id="PA':9" class="idref" href="#PA':9"><span class="id" title="binder">PA'</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="x:10" class="idref" href="#x:10"><span class="id" title="binder">x</span></a> <a id="y:11" class="idref" href="#y:11"><span class="id" title="binder">y</span></a>, <a class="idref" href="ITree.Extra.IForest.html#x:10"><span class="id" title="variable">x</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Extra.IForest.html#y:11"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.IForest.html#PA:8"><span class="id" title="variable">PA</span></a> <a class="idref" href="ITree.Extra.IForest.html#x:10"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="ITree.Extra.IForest.html#PA':9"><span class="id" title="variable">PA'</span></a> <a class="idref" href="ITree.Extra.IForest.html#y:11"><span class="id" title="variable">y</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.IForest.html#eutt_closed"><span class="id" title="definition">eutt_closed</span></a> <a class="idref" href="ITree.Extra.IForest.html#PA:8"><span class="id" title="variable">PA</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="ITree.Extra.IForest.html#eutt_closed"><span class="id" title="definition">eutt_closed</span></a> <a class="idref" href="ITree.Extra.IForest.html#PA':9"><span class="id" title="variable">PA'</span></a>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="Functor_iforest" class="idref" href="#Functor_iforest"><span class="id" title="instance">Functor_iforest</span></a> {<a id="E:12" class="idref" href="#E:12"><span class="id" title="binder">E</span></a>}<br/>
&nbsp;&nbsp;: <span class="id" title="class">Functor</span> (<a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:12"><span class="id" title="variable">E</span></a>) :=<br/>
&nbsp;&nbsp;{| <span class="id" title="method">fmap</span> := <span class="id" title="keyword">fun</span> <a id="A:13" class="idref" href="#A:13"><span class="id" title="binder">A</span></a> <a id="B:14" class="idref" href="#B:14"><span class="id" title="binder">B</span></a> <a id="f:15" class="idref" href="#f:15"><span class="id" title="binder">f</span></a> <a id="PA:16" class="idref" href="#PA:16"><span class="id" title="binder">PA</span></a> <a id="b:17" class="idref" href="#b:17"><span class="id" title="binder">b</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="a:18" class="idref" href="#a:18"><span class="id" title="binder">a</span></a>: <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <span class="id" title="var">E</span> <a class="idref" href="ITree.Extra.IForest.html#A:13"><span class="id" title="variable">A</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a> <a class="idref" href="ITree.Extra.IForest.html#PA:16"><span class="id" title="variable">PA</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:18"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="ITree.Extra.IForest.html#b:17"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="method">fmap</span> <a class="idref" href="ITree.Extra.IForest.html#f:15"><span class="id" title="variable">f</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:18"><span class="id" title="variable">a</span></a> |}.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="Returns" class="idref" href="#Returns"><span class="id" title="inductive">Returns</span></a> {<a id="E:19" class="idref" href="#E:19"><span class="id" title="binder">E</span></a>} {<a id="A:20" class="idref" href="#A:20"><span class="id" title="binder">A</span></a>: <span class="id" title="keyword">Type</span>} (<a id="a:21" class="idref" href="#a:21"><span class="id" title="binder">a</span></a>: <a class="idref" href="ITree.Extra.IForest.html#A:20"><span class="id" title="variable">A</span></a>) : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <span class="id" title="var">E</span> <span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
| <a id="ReturnsRet" class="idref" href="#ReturnsRet"><span class="id" title="constructor">ReturnsRet</span></a>: <span class="id" title="keyword">∀</span> <a id="t:24" class="idref" href="#t:24"><span class="id" title="binder">t</span></a>, <a class="idref" href="ITree.Extra.IForest.html#t:24"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:21"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.IForest.html#Returns:22"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:21"><span class="id" title="variable">a</span></a> <a class="idref" href="ITree.Extra.IForest.html#t:24"><span class="id" title="variable">t</span></a><br/>
| <a id="ReturnsTau" class="idref" href="#ReturnsTau"><span class="id" title="constructor">ReturnsTau</span></a>: <span class="id" title="keyword">∀</span> <a id="t:25" class="idref" href="#t:25"><span class="id" title="binder">t</span></a> <a id="u:26" class="idref" href="#u:26"><span class="id" title="binder">u</span></a>, <a class="idref" href="ITree.Extra.IForest.html#t:25"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Tau"><span class="id" title="abbreviation">Tau</span></a> <a class="idref" href="ITree.Extra.IForest.html#u:26"><span class="id" title="variable">u</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.IForest.html#Returns:22"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:21"><span class="id" title="variable">a</span></a> <a class="idref" href="ITree.Extra.IForest.html#u:26"><span class="id" title="variable">u</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.IForest.html#Returns:22"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:21"><span class="id" title="variable">a</span></a> <a class="idref" href="ITree.Extra.IForest.html#t:25"><span class="id" title="variable">t</span></a><br/>
| <a id="ReturnsVis" class="idref" href="#ReturnsVis"><span class="id" title="constructor">ReturnsVis</span></a>: <span class="id" title="keyword">∀</span> {<a id="X:27" class="idref" href="#X:27"><span class="id" title="binder">X</span></a>} (<a id="e:28" class="idref" href="#e:28"><span class="id" title="binder">e</span></a>: <a class="idref" href="ITree.Extra.IForest.html#E:19"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#X:27"><span class="id" title="variable">X</span></a>) (<a id="x:29" class="idref" href="#x:29"><span class="id" title="binder">x</span></a>: <a class="idref" href="ITree.Extra.IForest.html#X:27"><span class="id" title="variable">X</span></a>) <a id="t:30" class="idref" href="#t:30"><span class="id" title="binder">t</span></a> <a id="k:31" class="idref" href="#k:31"><span class="id" title="binder">k</span></a>, <a class="idref" href="ITree.Extra.IForest.html#t:30"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <a class="idref" href="ITree.Extra.IForest.html#e:28"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.Extra.IForest.html#k:31"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.IForest.html#Returns:22"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:21"><span class="id" title="variable">a</span></a> (<a class="idref" href="ITree.Extra.IForest.html#k:31"><span class="id" title="variable">k</span></a> <a class="idref" href="ITree.Extra.IForest.html#x:29"><span class="id" title="variable">x</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.IForest.html#Returns:22"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:21"><span class="id" title="variable">a</span></a> <a class="idref" href="ITree.Extra.IForest.html#t:30"><span class="id" title="variable">t</span></a><br/>
.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Constructors</span> <a class="idref" href="ITree.Extra.IForest.html#Returns"><span class="id" title="inductive">Returns</span></a>: <span class="id" title="var">itree</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="subtree" class="idref" href="#subtree"><span class="id" title="definition">subtree</span></a> {<a id="E:32" class="idref" href="#E:32"><span class="id" title="binder">E</span></a>} {<a id="A:33" class="idref" href="#A:33"><span class="id" title="binder">A</span></a> <a id="B:34" class="idref" href="#B:34"><span class="id" title="binder">B</span></a>} (<a id="ta:35" class="idref" href="#ta:35"><span class="id" title="binder">ta</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:32"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:33"><span class="id" title="variable">A</span></a>) (<a id="tb:36" class="idref" href="#tb:36"><span class="id" title="binder">tb</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:32"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#B:34"><span class="id" title="variable">B</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="k:37" class="idref" href="#k:37"><span class="id" title="binder">k</span></a> : <a class="idref" href="ITree.Extra.IForest.html#A:33"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:32"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#B:34"><span class="id" title="variable">B</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a> <a class="idref" href="ITree.Extra.IForest.html#tb:36"><span class="id" title="variable">tb</span></a> <a class="idref" href="ITree.Basics.Monad.html#20d7a3de27e35f38017a31a5b4c235e8"><span class="id" title="notation">≈</span></a> <span class="id" title="method">bind</span> <a class="idref" href="ITree.Extra.IForest.html#ta:35"><span class="id" title="variable">ta</span></a> <a class="idref" href="ITree.Extra.IForest.html#k:37"><span class="id" title="variable">k</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;Definition&nbsp;5.1&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="bind_iforest" class="idref" href="#bind_iforest"><span class="id" title="definition">bind_iforest</span></a> {<a id="E:38" class="idref" href="#E:38"><span class="id" title="binder">E</span></a>}<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">∀</span> <a id="A:39" class="idref" href="#A:39"><span class="id" title="binder">A</span></a> <a id="B:40" class="idref" href="#B:40"><span class="id" title="binder">B</span></a>, <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:38"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:39"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.IForest.html#A:39"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:38"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#B:40"><span class="id" title="variable">B</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:38"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#B:40"><span class="id" title="variable">B</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="A:41" class="idref" href="#A:41"><span class="id" title="binder">A</span></a> <a id="B:42" class="idref" href="#B:42"><span class="id" title="binder">B</span></a> (<a id="specA:43" class="idref" href="#specA:43"><span class="id" title="binder">specA</span></a> : <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:38"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:41"><span class="id" title="variable">A</span></a>) (<a id="K:44" class="idref" href="#K:44"><span class="id" title="binder">K</span></a>: <a class="idref" href="ITree.Extra.IForest.html#A:41"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:38"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#B:42"><span class="id" title="variable">B</span></a>) (<a id="tb:45" class="idref" href="#tb:45"><span class="id" title="binder">tb</span></a>: <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:38"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#B:42"><span class="id" title="variable">B</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="ta:46" class="idref" href="#ta:46"><span class="id" title="binder">ta</span></a>: <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:38"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:41"><span class="id" title="variable">A</span></a>) (<a id="k:47" class="idref" href="#k:47"><span class="id" title="binder">k</span></a>: <a class="idref" href="ITree.Extra.IForest.html#A:41"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:38"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#B:42"><span class="id" title="variable">B</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.IForest.html#specA:43"><span class="id" title="variable">specA</span></a> <a class="idref" href="ITree.Extra.IForest.html#ta:46"><span class="id" title="variable">ta</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.IForest.html#tb:45"><span class="id" title="variable">tb</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <span class="id" title="method">bind</span> <a class="idref" href="ITree.Extra.IForest.html#ta:46"><span class="id" title="variable">ta</span></a> <a class="idref" href="ITree.Extra.IForest.html#k:47"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="a:48" class="idref" href="#a:48"><span class="id" title="binder">a</span></a>, <a class="idref" href="ITree.Extra.IForest.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:48"><span class="id" title="variable">a</span></a> <a class="idref" href="ITree.Extra.IForest.html#ta:46"><span class="id" title="variable">ta</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.IForest.html#K:44"><span class="id" title="variable">K</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:48"><span class="id" title="variable">a</span></a> (<a class="idref" href="ITree.Extra.IForest.html#k:47"><span class="id" title="variable">k</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:48"><span class="id" title="variable">a</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="bind_iforest_stronger" class="idref" href="#bind_iforest_stronger"><span class="id" title="definition">bind_iforest_stronger</span></a> {<a id="E:49" class="idref" href="#E:49"><span class="id" title="binder">E</span></a>}<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">∀</span> <a id="A:50" class="idref" href="#A:50"><span class="id" title="binder">A</span></a> <a id="B:51" class="idref" href="#B:51"><span class="id" title="binder">B</span></a>, <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:49"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:50"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.IForest.html#A:50"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:49"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#B:51"><span class="id" title="variable">B</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:49"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#B:51"><span class="id" title="variable">B</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="A:52" class="idref" href="#A:52"><span class="id" title="binder">A</span></a> <a id="B:53" class="idref" href="#B:53"><span class="id" title="binder">B</span></a> (<a id="PA:54" class="idref" href="#PA:54"><span class="id" title="binder">PA</span></a>: <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:49"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:52"><span class="id" title="variable">A</span></a>) (<a id="K:55" class="idref" href="#K:55"><span class="id" title="binder">K</span></a>: <a class="idref" href="ITree.Extra.IForest.html#A:52"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:49"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#B:53"><span class="id" title="variable">B</span></a>) (<a id="tb:56" class="idref" href="#tb:56"><span class="id" title="binder">tb</span></a>: <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:49"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#B:53"><span class="id" title="variable">B</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="ta:57" class="idref" href="#ta:57"><span class="id" title="binder">ta</span></a>: <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:49"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:52"><span class="id" title="variable">A</span></a>) (<a id="k:58" class="idref" href="#k:58"><span class="id" title="binder">k</span></a>: <a class="idref" href="ITree.Extra.IForest.html#A:52"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:49"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#B:53"><span class="id" title="variable">B</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.IForest.html#PA:54"><span class="id" title="variable">PA</span></a> <a class="idref" href="ITree.Extra.IForest.html#ta:57"><span class="id" title="variable">ta</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.IForest.html#tb:56"><span class="id" title="variable">tb</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <span class="id" title="method">bind</span> <a class="idref" href="ITree.Extra.IForest.html#ta:57"><span class="id" title="variable">ta</span></a> <a class="idref" href="ITree.Extra.IForest.html#k:58"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="a:59" class="idref" href="#a:59"><span class="id" title="binder">a</span></a>, <a class="idref" href="ITree.Extra.IForest.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:59"><span class="id" title="variable">a</span></a> <a class="idref" href="ITree.Extra.IForest.html#ta:57"><span class="id" title="variable">ta</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.IForest.html#K:55"><span class="id" title="variable">K</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:59"><span class="id" title="variable">a</span></a> (<a class="idref" href="ITree.Extra.IForest.html#k:58"><span class="id" title="variable">k</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:59"><span class="id" title="variable">a</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>.<br/>

<br/>
</div>

<div class="doc">
Alternate, logically equivalent version of <span class="inlinecode"><a class="idref" href="ITree.Extra.IForest.html#bind_iforest"><span class="id" title="definition">bind_iforest</span></a></span>.
  It should not matter which one we use. Since <span class="inlinecode"><a class="idref" href="ITree.Extra.IForest.html#bind_iforest"><span class="id" title="definition">bind_iforest</span></a></span> has fewer cases, we should
  stick to it.
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="bind_iforest'" class="idref" href="#bind_iforest'"><span class="id" title="definition">bind_iforest'</span></a> {<a id="E:60" class="idref" href="#E:60"><span class="id" title="binder">E</span></a>}<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">∀</span> <a id="A:61" class="idref" href="#A:61"><span class="id" title="binder">A</span></a> <a id="B:62" class="idref" href="#B:62"><span class="id" title="binder">B</span></a>, <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:60"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:61"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.IForest.html#A:61"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:60"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#B:62"><span class="id" title="variable">B</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:60"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#B:62"><span class="id" title="variable">B</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="A:63" class="idref" href="#A:63"><span class="id" title="binder">A</span></a> <a id="B:64" class="idref" href="#B:64"><span class="id" title="binder">B</span></a> (<a id="PA:65" class="idref" href="#PA:65"><span class="id" title="binder">PA</span></a>: <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:60"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:63"><span class="id" title="variable">A</span></a>) (<a id="K:66" class="idref" href="#K:66"><span class="id" title="binder">K</span></a>: <a class="idref" href="ITree.Extra.IForest.html#A:63"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:60"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#B:64"><span class="id" title="variable">B</span></a>) (<a id="tb:67" class="idref" href="#tb:67"><span class="id" title="binder">tb</span></a>: <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:60"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#B:64"><span class="id" title="variable">B</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="ta:68" class="idref" href="#ta:68"><span class="id" title="binder">ta</span></a>: <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:60"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:63"><span class="id" title="variable">A</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a>  <a class="idref" href="ITree.Extra.IForest.html#PA:65"><span class="id" title="variable">PA</span></a> <a class="idref" href="ITree.Extra.IForest.html#ta:68"><span class="id" title="variable">ta</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="k:69" class="idref" href="#k:69"><span class="id" title="binder">k</span></a>: <a class="idref" href="ITree.Extra.IForest.html#A:63"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:60"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#B:64"><span class="id" title="variable">B</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="a:70" class="idref" href="#a:70"><span class="id" title="binder">a</span></a>, <a class="idref" href="ITree.Extra.IForest.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:70"><span class="id" title="variable">a</span></a> <a class="idref" href="ITree.Extra.IForest.html#ta:68"><span class="id" title="variable">ta</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.IForest.html#K:66"><span class="id" title="variable">K</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:70"><span class="id" title="variable">a</span></a> (<a class="idref" href="ITree.Extra.IForest.html#k:69"><span class="id" title="variable">k</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:70"><span class="id" title="variable">a</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="ITree.Extra.IForest.html#tb:67"><span class="id" title="variable">tb</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <span class="id" title="method">bind</span> <a class="idref" href="ITree.Extra.IForest.html#ta:68"><span class="id" title="variable">ta</span></a> <a class="idref" href="ITree.Extra.IForest.html#k:69"><span class="id" title="variable">k</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="k:71" class="idref" href="#k:71"><span class="id" title="binder">k</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="a:72" class="idref" href="#a:72"><span class="id" title="binder">a</span></a>, <a class="idref" href="ITree.Extra.IForest.html#K:66"><span class="id" title="variable">K</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:72"><span class="id" title="variable">a</span></a> (<a class="idref" href="ITree.Extra.IForest.html#k:71"><span class="id" title="variable">k</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:72"><span class="id" title="variable">a</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="ITree.Extra.IForest.html#tb:67"><span class="id" title="variable">tb</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <span class="id" title="method">bind</span> <a class="idref" href="ITree.Extra.IForest.html#ta:68"><span class="id" title="variable">ta</span></a> <a class="idref" href="ITree.Extra.IForest.html#k:71"><span class="id" title="variable">k</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="bind_iforest_bind_iforest'" class="idref" href="#bind_iforest_bind_iforest'"><span class="id" title="lemma">bind_iforest_bind_iforest'</span></a> {<a id="E:73" class="idref" href="#E:73"><span class="id" title="binder">E</span></a>}:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="A:74" class="idref" href="#A:74"><span class="id" title="binder">A</span></a> <a id="B:75" class="idref" href="#B:75"><span class="id" title="binder">B</span></a> <a id="PA:76" class="idref" href="#PA:76"><span class="id" title="binder">PA</span></a> <a id="K:77" class="idref" href="#K:77"><span class="id" title="binder">K</span></a> (<a id="tb:78" class="idref" href="#tb:78"><span class="id" title="binder">tb</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:73"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#B:75"><span class="id" title="variable">B</span></a>), <a class="idref" href="ITree.Extra.IForest.html#bind_iforest"><span class="id" title="definition">bind_iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:74"><span class="id" title="variable">A</span></a> <a class="idref" href="ITree.Extra.IForest.html#B:75"><span class="id" title="variable">B</span></a> <a class="idref" href="ITree.Extra.IForest.html#PA:76"><span class="id" title="variable">PA</span></a> <a class="idref" href="ITree.Extra.IForest.html#K:77"><span class="id" title="variable">K</span></a> <a class="idref" href="ITree.Extra.IForest.html#tb:78"><span class="id" title="variable">tb</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="ITree.Extra.IForest.html#bind_iforest'"><span class="id" title="definition">bind_iforest'</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:74"><span class="id" title="variable">A</span></a> <a class="idref" href="ITree.Extra.IForest.html#B:75"><span class="id" title="variable">B</span></a> <a class="idref" href="ITree.Extra.IForest.html#PA:76"><span class="id" title="variable">PA</span></a> <a class="idref" href="ITree.Extra.IForest.html#K:77"><span class="id" title="variable">K</span></a> <a class="idref" href="ITree.Extra.IForest.html#tb:78"><span class="id" title="variable">tb</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">red</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">ta</span> &amp; <span class="id" title="var">ka</span> &amp; <span class="id" title="var">HPA</span> &amp; <span class="id" title="var">eq</span> &amp; <span class="id" title="var">HR</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">ta</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">ka</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span>  (<span class="id" title="var">ta</span> &amp; <span class="id" title="var">EQ1</span> &amp; [(<span class="id" title="var">k</span> &amp; <span class="id" title="var">KA</span> &amp; <span class="id" title="var">EQ2</span>) | <span class="id" title="var">HX</span>]).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">∃</span> <span class="id" title="var">ta</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">k</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">∃</span> <span class="id" title="var">ta</span>. <span class="id" title="tactic">∃</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.spin"><span class="id" title="definition">ITree.spin</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">HX</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.spin"><span class="id" title="definition">ITree.spin</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HX</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">HA</span> &amp; <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Definition&nbsp;5.1&nbsp;*)</span><br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="Monad_iforest" class="idref" href="#Monad_iforest"><span class="id" title="instance">Monad_iforest</span></a> {<a id="E:79" class="idref" href="#E:79"><span class="id" title="binder">E</span></a>} : <span class="id" title="class">Monad</span> (<a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:79"><span class="id" title="variable">E</span></a>) :=<br/>
&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">ret</span> := <span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> <a id="x:80" class="idref" href="#x:80"><span class="id" title="binder">x</span></a> <a id="y:81" class="idref" href="#y:81"><span class="id" title="binder">y</span></a> ⇒ <a class="idref" href="ITree.Extra.IForest.html#y:81"><span class="id" title="variable">y</span></a> <a class="idref" href="ITree.Basics.Monad.html#20d7a3de27e35f38017a31a5b4c235e8"><span class="id" title="notation">≈</span></a> <span class="id" title="method">ret</span> <a class="idref" href="ITree.Extra.IForest.html#x:80"><span class="id" title="variable">x</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="method">bind</span> := <a class="idref" href="ITree.Extra.IForest.html#bind_iforest"><span class="id" title="definition">bind_iforest</span></a><br/>
&nbsp;&nbsp;|}.<br/>

<br/>
<span class="comment">(*&nbsp;Definition&nbsp;5.3:&nbsp;Handler&nbsp;Correctness&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="handler_correct" class="idref" href="#handler_correct"><span class="id" title="definition">handler_correct</span></a> {<a id="E:82" class="idref" href="#E:82"><span class="id" title="binder">E</span></a> <a id="F:83" class="idref" href="#F:83"><span class="id" title="binder">F</span></a>} (<a id="h_spec:84" class="idref" href="#h_spec:84"><span class="id" title="binder">h_spec</span></a>: <a class="idref" href="ITree.Extra.IForest.html#E:82"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Basics.Basics.html#f7397da22bdab7f77b06c5d98764e7b9"><span class="id" title="notation">~&gt;</span></a> <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#F:83"><span class="id" title="variable">F</span></a>) (<a id="h:85" class="idref" href="#h:85"><span class="id" title="binder">h</span></a>: <a class="idref" href="ITree.Extra.IForest.html#E:82"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Basics.Basics.html#f7397da22bdab7f77b06c5d98764e7b9"><span class="id" title="notation">~&gt;</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#F:83"><span class="id" title="variable">F</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <a id="T:86" class="idref" href="#T:86"><span class="id" title="binder">T</span></a> <a id="e:87" class="idref" href="#e:87"><span class="id" title="binder">e</span></a>, <a class="idref" href="ITree.Extra.IForest.html#h_spec:84"><span class="id" title="variable">h_spec</span></a> <a class="idref" href="ITree.Extra.IForest.html#T:86"><span class="id" title="variable">T</span></a> <a class="idref" href="ITree.Extra.IForest.html#e:87"><span class="id" title="variable">e</span></a> (<a class="idref" href="ITree.Extra.IForest.html#h:85"><span class="id" title="variable">h</span></a> <a class="idref" href="ITree.Extra.IForest.html#T:86"><span class="id" title="variable">T</span></a> <a class="idref" href="ITree.Extra.IForest.html#e:87"><span class="id" title="variable">e</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="interp_iforestF" class="idref" href="#interp_iforestF"><span class="id" title="inductive">interp_iforestF</span></a> {<a id="E:88" class="idref" href="#E:88"><span class="id" title="binder">E</span></a> <a id="F:89" class="idref" href="#F:89"><span class="id" title="binder">F</span></a>} (<a id="h_spec:91" class="idref" href="#h_spec:91"><span class="id" title="binder">h_spec</span></a> : <span class="id" title="keyword">∀</span> <a id="T:90" class="idref" href="#T:90"><span class="id" title="binder">T</span></a>, <a class="idref" href="ITree.Extra.IForest.html#E:88"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#T:90"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#F:89"><span class="id" title="variable">F</span></a> <a class="idref" href="ITree.Extra.IForest.html#T:90"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="R:92" class="idref" href="#R:92"><span class="id" title="binder">R</span></a> : <span class="id" title="keyword">Type</span>} (<a id="RR:93" class="idref" href="#RR:93"><span class="id" title="binder">RR</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:92"><span class="id" title="variable">R</span></a>) (<a id="sim:94" class="idref" href="#sim:94"><span class="id" title="binder">sim</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:88"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:92"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#F:89"><span class="id" title="variable">F</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:92"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="ITree.Core.ITreeDefinition.html#itree'"><span class="id" title="abbreviation">itree'</span></a> <span class="id" title="var">E</span> <span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <span class="id" title="var">F</span> <span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
| <a id="Interp_iforest_Ret" class="idref" href="#Interp_iforest_Ret"><span class="id" title="constructor">Interp_iforest_Ret</span></a> : <span class="id" title="keyword">∀</span> <a id="r1:97" class="idref" href="#r1:97"><span class="id" title="binder">r1</span></a> <a id="r2:98" class="idref" href="#r2:98"><span class="id" title="binder">r2</span></a> (<a id="REL:99" class="idref" href="#REL:99"><span class="id" title="binder">REL</span></a>: <a class="idref" href="ITree.Extra.IForest.html#RR:93"><span class="id" title="variable">RR</span></a> <a class="idref" href="ITree.Extra.IForest.html#r1:97"><span class="id" title="variable">r1</span></a> <a class="idref" href="ITree.Extra.IForest.html#r2:98"><span class="id" title="variable">r2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="t2:100" class="idref" href="#t2:100"><span class="id" title="binder">t2</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#F:89"><span class="id" title="variable">F</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:92"><span class="id" title="variable">R</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="eq2:101" class="idref" href="#eq2:101"><span class="id" title="binder">eq2</span></a> : <a class="idref" href="ITree.Extra.IForest.html#t2:100"><span class="id" title="variable">t2</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.Extra.IForest.html#r2:98"><span class="id" title="variable">r2</span></a><a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">)</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.IForest.html#interp_iforestF:95"><span class="id" title="inductive">interp_iforestF</span></a> <a class="idref" href="ITree.Extra.IForest.html#h_spec:91"><span class="id" title="variable">h_spec</span></a> <a class="idref" href="ITree.Extra.IForest.html#RR:93"><span class="id" title="variable">RR</span></a> <a class="idref" href="ITree.Extra.IForest.html#sim:94"><span class="id" title="variable">sim</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#RetF"><span class="id" title="constructor">RetF</span></a> <a class="idref" href="ITree.Extra.IForest.html#r1:97"><span class="id" title="variable">r1</span></a>) <a class="idref" href="ITree.Extra.IForest.html#t2:100"><span class="id" title="variable">t2</span></a><br/>
<br/>
| <a id="Interp_iforest_Tau" class="idref" href="#Interp_iforest_Tau"><span class="id" title="constructor">Interp_iforest_Tau</span></a> : <span class="id" title="keyword">∀</span> <a id="t1:102" class="idref" href="#t1:102"><span class="id" title="binder">t1</span></a> <a id="t2:103" class="idref" href="#t2:103"><span class="id" title="binder">t2</span></a> (<a id="HS:104" class="idref" href="#HS:104"><span class="id" title="binder">HS</span></a>: <a class="idref" href="ITree.Extra.IForest.html#sim:94"><span class="id" title="variable">sim</span></a> <a class="idref" href="ITree.Extra.IForest.html#t1:102"><span class="id" title="variable">t1</span></a> <a class="idref" href="ITree.Extra.IForest.html#t2:103"><span class="id" title="variable">t2</span></a>), <a class="idref" href="ITree.Extra.IForest.html#interp_iforestF:95"><span class="id" title="inductive">interp_iforestF</span></a> <a class="idref" href="ITree.Extra.IForest.html#h_spec:91"><span class="id" title="variable">h_spec</span></a> <a class="idref" href="ITree.Extra.IForest.html#RR:93"><span class="id" title="variable">RR</span></a> <a class="idref" href="ITree.Extra.IForest.html#sim:94"><span class="id" title="variable">sim</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#TauF"><span class="id" title="constructor">TauF</span></a> <a class="idref" href="ITree.Extra.IForest.html#t1:102"><span class="id" title="variable">t1</span></a>) <a class="idref" href="ITree.Extra.IForest.html#t2:103"><span class="id" title="variable">t2</span></a><br/>
<br/>
| <a id="Interp_iforest_Vis" class="idref" href="#Interp_iforest_Vis"><span class="id" title="constructor">Interp_iforest_Vis</span></a> : <span class="id" title="keyword">∀</span> <a id="A:105" class="idref" href="#A:105"><span class="id" title="binder">A</span></a> (<a id="e:106" class="idref" href="#e:106"><span class="id" title="binder">e</span></a> : <a class="idref" href="ITree.Extra.IForest.html#E:88"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:105"><span class="id" title="variable">A</span></a>) (<a id="k1:107" class="idref" href="#k1:107"><span class="id" title="binder">k1</span></a> : <a class="idref" href="ITree.Extra.IForest.html#A:105"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:88"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:92"><span class="id" title="variable">R</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="t2:108" class="idref" href="#t2:108"><span class="id" title="binder">t2</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#F:89"><span class="id" title="variable">F</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:92"><span class="id" title="variable">R</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="ta:109" class="idref" href="#ta:109"><span class="id" title="binder">ta</span></a> :<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#F:89"><span class="id" title="variable">F</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:105"><span class="id" title="variable">A</span></a>)  (<a id="k2:110" class="idref" href="#k2:110"><span class="id" title="binder">k2</span></a> : <a class="idref" href="ITree.Extra.IForest.html#A:105"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#F:89"><span class="id" title="variable">F</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:92"><span class="id" title="variable">R</span></a>) (<a id="HTA:111" class="idref" href="#HTA:111"><span class="id" title="binder">HTA</span></a>: <a class="idref" href="ITree.Extra.IForest.html#h_spec:91"><span class="id" title="variable">h_spec</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:105"><span class="id" title="variable">A</span></a> <a class="idref" href="ITree.Extra.IForest.html#e:106"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.Extra.IForest.html#ta:109"><span class="id" title="variable">ta</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="eq2:112" class="idref" href="#eq2:112"><span class="id" title="binder">eq2</span></a> : <a class="idref" href="ITree.Extra.IForest.html#t2:108"><span class="id" title="variable">t2</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">(</span></a><span class="id" title="method">bind</span> <a class="idref" href="ITree.Extra.IForest.html#ta:109"><span class="id" title="variable">ta</span></a> <a class="idref" href="ITree.Extra.IForest.html#k2:110"><span class="id" title="variable">k2</span></a><a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="HK:114" class="idref" href="#HK:114"><span class="id" title="binder">HK</span></a> : <span class="id" title="keyword">∀</span> (<a id="a:113" class="idref" href="#a:113"><span class="id" title="binder">a</span></a> : <a class="idref" href="ITree.Extra.IForest.html#A:105"><span class="id" title="variable">A</span></a>), <a class="idref" href="ITree.Extra.IForest.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:113"><span class="id" title="variable">a</span></a> <a class="idref" href="ITree.Extra.IForest.html#ta:109"><span class="id" title="variable">ta</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a>  <a class="idref" href="ITree.Extra.IForest.html#sim:94"><span class="id" title="variable">sim</span></a> (<a class="idref" href="ITree.Extra.IForest.html#k1:107"><span class="id" title="variable">k1</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:113"><span class="id" title="variable">a</span></a>) (<a class="idref" href="ITree.Extra.IForest.html#k2:110"><span class="id" title="variable">k2</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:113"><span class="id" title="variable">a</span></a>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.IForest.html#interp_iforestF:95"><span class="id" title="inductive">interp_iforestF</span></a> <a class="idref" href="ITree.Extra.IForest.html#h_spec:91"><span class="id" title="variable">h_spec</span></a> <a class="idref" href="ITree.Extra.IForest.html#RR:93"><span class="id" title="variable">RR</span></a> <a class="idref" href="ITree.Extra.IForest.html#sim:94"><span class="id" title="variable">sim</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> <a class="idref" href="ITree.Extra.IForest.html#e:106"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.Extra.IForest.html#k1:107"><span class="id" title="variable">k1</span></a>) <a class="idref" href="ITree.Extra.IForest.html#t2:108"><span class="id" title="variable">t2</span></a>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Constructors</span> <a class="idref" href="ITree.Extra.IForest.html#interp_iforestF"><span class="id" title="inductive">interp_iforestF</span></a> : <span class="id" title="var">itree</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="interp_iforestF_mono" class="idref" href="#interp_iforestF_mono"><span class="id" title="lemma">interp_iforestF_mono</span></a> <a id="E:115" class="idref" href="#E:115"><span class="id" title="binder">E</span></a> <a id="F:116" class="idref" href="#F:116"><span class="id" title="binder">F</span></a> <a id="h_spec:117" class="idref" href="#h_spec:117"><span class="id" title="binder">h_spec</span></a> <a id="R:118" class="idref" href="#R:118"><span class="id" title="binder">R</span></a> <a id="RR:119" class="idref" href="#RR:119"><span class="id" title="binder">RR</span></a>  (<a id="t0:120" class="idref" href="#t0:120"><span class="id" title="binder">t0</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree'"><span class="id" title="abbreviation">itree'</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:115"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:118"><span class="id" title="variable">R</span></a>) (<a id="t1:121" class="idref" href="#t1:121"><span class="id" title="binder">t1</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#F:116"><span class="id" title="variable">F</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:118"><span class="id" title="variable">R</span></a>) <a id="sim:122" class="idref" href="#sim:122"><span class="id" title="binder">sim</span></a> <a id="sim':123" class="idref" href="#sim':123"><span class="id" title="binder">sim'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="IN:124" class="idref" href="#IN:124"><span class="id" title="binder">IN</span></a> : <a class="idref" href="ITree.Extra.IForest.html#interp_iforestF"><span class="id" title="inductive">interp_iforestF</span></a> <a class="idref" href="ITree.Extra.IForest.html#h_spec:117"><span class="id" title="variable">h_spec</span></a> <a class="idref" href="ITree.Extra.IForest.html#RR:119"><span class="id" title="variable">RR</span></a> <a class="idref" href="ITree.Extra.IForest.html#sim:122"><span class="id" title="variable">sim</span></a> <a class="idref" href="ITree.Extra.IForest.html#t0:120"><span class="id" title="variable">t0</span></a> <a class="idref" href="ITree.Extra.IForest.html#t1:121"><span class="id" title="variable">t1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="LE:125" class="idref" href="#LE:125"><span class="id" title="binder">LE</span></a> : <a class="idref" href="ITree.Extra.IForest.html#sim:122"><span class="id" title="variable">sim</span></a> <span class="id" title="notation">&lt;2=</span> <a class="idref" href="ITree.Extra.IForest.html#sim':123"><span class="id" title="variable">sim'</span></a>) :<br/>
&nbsp;&nbsp;(<a class="idref" href="ITree.Extra.IForest.html#interp_iforestF"><span class="id" title="inductive">interp_iforestF</span></a> <a class="idref" href="ITree.Extra.IForest.html#h_spec:117"><span class="id" title="variable">h_spec</span></a> <a class="idref" href="ITree.Extra.IForest.html#RR:119"><span class="id" title="variable">RR</span></a> <a class="idref" href="ITree.Extra.IForest.html#sim':123"><span class="id" title="variable">sim'</span></a> <a class="idref" href="ITree.Extra.IForest.html#t0:120"><span class="id" title="variable">t0</span></a> <a class="idref" href="ITree.Extra.IForest.html#t1:121"><span class="id" title="variable">t1</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">IN</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Resolve</span> <span class="id" title="var">interp_iforestF_mono</span> : <span class="id" title="var">paco</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="interp_iforest_" class="idref" href="#interp_iforest_"><span class="id" title="definition">interp_iforest_</span></a> <a id="E:126" class="idref" href="#E:126"><span class="id" title="binder">E</span></a> <a id="F:127" class="idref" href="#F:127"><span class="id" title="binder">F</span></a> <a id="h_spec:128" class="idref" href="#h_spec:128"><span class="id" title="binder">h_spec</span></a> <a id="R:129" class="idref" href="#R:129"><span class="id" title="binder">R</span></a> <a id="RR:130" class="idref" href="#RR:130"><span class="id" title="binder">RR</span></a> <a id="sim:131" class="idref" href="#sim:131"><span class="id" title="binder">sim</span></a> (<a id="t0:132" class="idref" href="#t0:132"><span class="id" title="binder">t0</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:126"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:129"><span class="id" title="variable">R</span></a>) (<a id="t1:133" class="idref" href="#t1:133"><span class="id" title="binder">t1</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#F:127"><span class="id" title="variable">F</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:129"><span class="id" title="variable">R</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Extra.IForest.html#interp_iforestF"><span class="id" title="inductive">interp_iforestF</span></a> <a class="idref" href="ITree.Extra.IForest.html#h_spec:128"><span class="id" title="variable">h_spec</span></a> <a class="idref" href="ITree.Extra.IForest.html#RR:130"><span class="id" title="variable">RR</span></a> <a class="idref" href="ITree.Extra.IForest.html#sim:131"><span class="id" title="variable">sim</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <a class="idref" href="ITree.Extra.IForest.html#t0:132"><span class="id" title="variable">t0</span></a>) <a class="idref" href="ITree.Extra.IForest.html#t1:133"><span class="id" title="variable">t1</span></a>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Unfold</span> <a class="idref" href="ITree.Extra.IForest.html#interp_iforest_"><span class="id" title="definition">interp_iforest_</span></a> : <span class="id" title="var">itree</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="interp_iforest__mono" class="idref" href="#interp_iforest__mono"><span class="id" title="lemma">interp_iforest__mono</span></a> <a id="E:134" class="idref" href="#E:134"><span class="id" title="binder">E</span></a> <a id="F:135" class="idref" href="#F:135"><span class="id" title="binder">F</span></a> <a id="h_spec:136" class="idref" href="#h_spec:136"><span class="id" title="binder">h_spec</span></a> <a id="R:137" class="idref" href="#R:137"><span class="id" title="binder">R</span></a> <a id="RR:138" class="idref" href="#RR:138"><span class="id" title="binder">RR</span></a> : <span class="id" title="definition">monotone2</span> (<a class="idref" href="ITree.Extra.IForest.html#interp_iforest_"><span class="id" title="definition">interp_iforest_</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:134"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#F:135"><span class="id" title="variable">F</span></a> <a class="idref" href="ITree.Extra.IForest.html#h_spec:136"><span class="id" title="variable">h_spec</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:137"><span class="id" title="variable">R</span></a> <a class="idref" href="ITree.Extra.IForest.html#RR:138"><span class="id" title="variable">RR</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">red</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.IForest.html#interp_iforestF_mono"><span class="id" title="lemma">interp_iforestF_mono</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Resolve</span> <span class="id" title="var">interp_iforest__mono</span> : <span class="id" title="var">paco</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Definition&nbsp;5.2&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="interp_iforest" class="idref" href="#interp_iforest"><span class="id" title="definition">interp_iforest</span></a> {<a id="E:139" class="idref" href="#E:139"><span class="id" title="binder">E</span></a> <a id="F:140" class="idref" href="#F:140"><span class="id" title="binder">F</span></a>} (<a id="h_spec:141" class="idref" href="#h_spec:141"><span class="id" title="binder">h_spec</span></a> : <a class="idref" href="ITree.Extra.IForest.html#E:139"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Basics.Basics.html#f7397da22bdab7f77b06c5d98764e7b9"><span class="id" title="notation">~&gt;</span></a> <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#F:140"><span class="id" title="variable">F</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="R:142" class="idref" href="#R:142"><span class="id" title="binder">R</span></a> (<a id="RR:143" class="idref" href="#RR:143"><span class="id" title="binder">RR</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:142"><span class="id" title="variable">R</span></a>), <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:139"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:142"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#F:140"><span class="id" title="variable">F</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:142"><span class="id" title="variable">R</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="R:144" class="idref" href="#R:144"><span class="id" title="binder">R</span></a> (<a id="RR:145" class="idref" href="#RR:145"><span class="id" title="binder">RR</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:144"><span class="id" title="variable">R</span></a>) ⇒  <span class="id" title="definition">paco2</span> (<a class="idref" href="ITree.Extra.IForest.html#interp_iforest_"><span class="id" title="definition">interp_iforest_</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:139"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#F:140"><span class="id" title="variable">F</span></a> <a class="idref" href="ITree.Extra.IForest.html#h_spec:141"><span class="id" title="variable">h_spec</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:144"><span class="id" title="variable">R</span></a> <a class="idref" href="ITree.Extra.IForest.html#RR:145"><span class="id" title="variable">RR</span></a>) <span class="id" title="definition">bot2</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Figure&nbsp;7:&nbsp;Interpreter&nbsp;law&nbsp;for&nbsp;Ret&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="interp_iforest_ret" class="idref" href="#interp_iforest_ret"><span class="id" title="lemma">interp_iforest_ret</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="R:146" class="idref" href="#R:146"><span class="id" title="binder">R</span></a> <a id="E:147" class="idref" href="#E:147"><span class="id" title="binder">E</span></a> <a id="F:148" class="idref" href="#F:148"><span class="id" title="binder">F</span></a> (<a id="h_spec:149" class="idref" href="#h_spec:149"><span class="id" title="binder">h_spec</span></a> : <a class="idref" href="ITree.Extra.IForest.html#E:147"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Basics.Basics.html#f7397da22bdab7f77b06c5d98764e7b9"><span class="id" title="notation">~&gt;</span></a> <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#F:148"><span class="id" title="variable">F</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="r:150" class="idref" href="#r:150"><span class="id" title="binder">r</span></a> : <a class="idref" href="ITree.Extra.IForest.html#R:146"><span class="id" title="variable">R</span></a>)<br/>
&nbsp;&nbsp;, <a class="idref" href="ITree.Extra.IForest.html#Eq1_iforest"><span class="id" title="instance">Eq1_iforest</span></a> <span class="id" title="var">_</span> (<a class="idref" href="ITree.Extra.IForest.html#interp_iforest"><span class="id" title="definition">interp_iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#h_spec:149"><span class="id" title="variable">h_spec</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:146"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> (<span class="id" title="method">ret</span> <a class="idref" href="ITree.Extra.IForest.html#r:150"><span class="id" title="variable">r</span></a>)) (<span class="id" title="method">ret</span> <a class="idref" href="ITree.Extra.IForest.html#r:150"><span class="id" title="variable">r</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [| <span class="id" title="tactic">split</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.IForest.html#interp_iforest"><span class="id" title="definition">interp_iforest</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pinversion</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">pstep</span>. <span class="id" title="tactic">econstructor</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">do</span> 3 <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span> <span class="id" title="var">eq</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>; <span class="id" title="var">pinversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">red</span>. <span class="id" title="var">pstep</span>. <span class="id" title="tactic">econstructor</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">eq</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">red</span>. <span class="id" title="var">pstep</span>. <span class="id" title="tactic">econstructor</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;- <span class="id" title="tactic">do</span> 3 <span class="id" title="tactic">red</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="interp_iforestF_Proper" class="idref" href="#interp_iforestF_Proper"><span class="id" title="instance">interp_iforestF_Proper</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="E:151" class="idref" href="#E:151"><span class="id" title="binder">E</span></a> <a id="F:152" class="idref" href="#F:152"><span class="id" title="binder">F</span></a>} (<a id="h_spec:153" class="idref" href="#h_spec:153"><span class="id" title="binder">h_spec</span></a> : <a class="idref" href="ITree.Extra.IForest.html#E:151"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Basics.Basics.html#f7397da22bdab7f77b06c5d98764e7b9"><span class="id" title="notation">~&gt;</span></a> <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#F:152"><span class="id" title="variable">F</span></a>) <a id="R:154" class="idref" href="#R:154"><span class="id" title="binder">R</span></a> <a id="RR:155" class="idref" href="#RR:155"><span class="id" title="binder">RR</span></a> (<a id="t:156" class="idref" href="#t:156"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree'"><span class="id" title="abbreviation">itree'</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:151"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:154"><span class="id" title="variable">R</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="sim:157" class="idref" href="#sim:157"><span class="id" title="binder">sim</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:151"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:154"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#F:152"><span class="id" title="variable">F</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:154"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="HS:159" class="idref" href="#HS:159"><span class="id" title="binder">HS</span></a>: <span class="id" title="keyword">∀</span> <a id="t:158" class="idref" href="#t:158"><span class="id" title="binder">t</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a>(<a class="idref" href="ITree.Eq.Eqit.html#eutt"><span class="id" title="definition">eutt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Program.Basics.html#flip"><span class="id" title="definition">flip</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Program.Basics.html#impl"><span class="id" title="definition">impl</span></a>) (<a class="idref" href="ITree.Extra.IForest.html#sim:157"><span class="id" title="variable">sim</span></a> <a class="idref" href="ITree.Extra.IForest.html#t:158"><span class="id" title="variable">t</span></a>))<br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a>(<a class="idref" href="ITree.Eq.Eqit.html#eutt"><span class="id" title="definition">eutt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#iff"><span class="id" title="definition">iff</span></a>) (<a class="idref" href="ITree.Extra.IForest.html#interp_iforestF"><span class="id" title="inductive">interp_iforestF</span></a> <a class="idref" href="ITree.Extra.IForest.html#h_spec:153"><span class="id" title="variable">h_spec</span></a> <a class="idref" href="ITree.Extra.IForest.html#RR:155"><span class="id" title="variable">RR</span></a> <a class="idref" href="ITree.Extra.IForest.html#sim:157"><span class="id" title="variable">sim</span></a> <a class="idref" href="ITree.Extra.IForest.html#t:156"><span class="id" title="variable">t</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">specialize</span> (<span class="id" title="var">HS</span> <span class="id" title="var">t1</span>). <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span>. <span class="id" title="tactic">assumption</span>.<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">HS</span> <span class="id" title="var">t1</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="interp_iforest_Proper" class="idref" href="#interp_iforest_Proper"><span class="id" title="instance">interp_iforest_Proper</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="E:160" class="idref" href="#E:160"><span class="id" title="binder">E</span></a> <a id="F:161" class="idref" href="#F:161"><span class="id" title="binder">F</span></a>} (<a id="h_spec:162" class="idref" href="#h_spec:162"><span class="id" title="binder">h_spec</span></a> : <a class="idref" href="ITree.Extra.IForest.html#E:160"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Basics.Basics.html#f7397da22bdab7f77b06c5d98764e7b9"><span class="id" title="notation">~&gt;</span></a> <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#F:161"><span class="id" title="variable">F</span></a>) <a id="R:163" class="idref" href="#R:163"><span class="id" title="binder">R</span></a> <a id="RR:164" class="idref" href="#RR:164"><span class="id" title="binder">RR</span></a> (<a id="t:165" class="idref" href="#t:165"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:160"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:163"><span class="id" title="variable">R</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a>(<a class="idref" href="ITree.Eq.Eqit.html#eq_itree"><span class="id" title="definition">eq_itree</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">Logic.eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#iff"><span class="id" title="definition">iff</span></a>) (<a class="idref" href="ITree.Extra.IForest.html#interp_iforest"><span class="id" title="definition">interp_iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#h_spec:162"><span class="id" title="variable">h_spec</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:163"><span class="id" title="variable">R</span></a> <a class="idref" href="ITree.Extra.IForest.html#RR:164"><span class="id" title="variable">RR</span></a> <a class="idref" href="ITree.Extra.IForest.html#t:165"><span class="id" title="variable">t</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">revert</span> <span class="id" title="var">t</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pcofix</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">t</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">eq</span> <span class="id" title="var">HI</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HI</span>. <span class="id" title="var">punfold</span> <span class="id" title="var">HI</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HI</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pstep</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">genobs</span> <span class="id" title="var">t</span> <span class="id" title="var">ot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HI</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">eq</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">eq</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">eq2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">HK</span> <span class="id" title="var">a</span> <span class="id" title="var">H0</span>). <span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>. 2 : { <span class="id" title="tactic">apply</span> <span class="id" title="var">HK</span>. } <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">revert</span> <span class="id" title="var">t</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pcofix</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">t</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">eq</span> <span class="id" title="var">HI</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HI</span>. <span class="id" title="var">punfold</span> <span class="id" title="var">HI</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HI</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pstep</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">genobs</span> <span class="id" title="var">t</span> <span class="id" title="var">ot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HI</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">eq2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">HK</span> <span class="id" title="var">a</span> <span class="id" title="var">H0</span>). <span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>. 2 : { <span class="id" title="tactic">apply</span> <span class="id" title="var">HK</span>. } <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="interp_iforest_Proper2" class="idref" href="#interp_iforest_Proper2"><span class="id" title="instance">interp_iforest_Proper2</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="E:166" class="idref" href="#E:166"><span class="id" title="binder">E</span></a> <a id="F:167" class="idref" href="#F:167"><span class="id" title="binder">F</span></a>} (<a id="h_spec:168" class="idref" href="#h_spec:168"><span class="id" title="binder">h_spec</span></a> : <a class="idref" href="ITree.Extra.IForest.html#E:166"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Basics.Basics.html#f7397da22bdab7f77b06c5d98764e7b9"><span class="id" title="notation">~&gt;</span></a> <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#F:167"><span class="id" title="variable">F</span></a>) <a id="R:169" class="idref" href="#R:169"><span class="id" title="binder">R</span></a> <a id="RR:170" class="idref" href="#RR:170"><span class="id" title="binder">RR</span></a> (<a id="t:171" class="idref" href="#t:171"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:166"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:169"><span class="id" title="variable">R</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a>(<a class="idref" href="ITree.Eq.Eqit.html#eutt"><span class="id" title="definition">eutt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">Logic.eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#iff"><span class="id" title="definition">iff</span></a>) (<a class="idref" href="ITree.Extra.IForest.html#interp_iforest"><span class="id" title="definition">interp_iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#h_spec:168"><span class="id" title="variable">h_spec</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:169"><span class="id" title="variable">R</span></a> <a class="idref" href="ITree.Extra.IForest.html#RR:170"><span class="id" title="variable">RR</span></a> <a class="idref" href="ITree.Extra.IForest.html#t:171"><span class="id" title="variable">t</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">revert</span> <span class="id" title="var">t</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pcofix</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">t</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">eq</span> <span class="id" title="var">HI</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HI</span>. <span class="id" title="var">punfold</span> <span class="id" title="var">HI</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HI</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pstep</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">genobs</span> <span class="id" title="var">t</span> <span class="id" title="var">ot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HI</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">eq</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">eq</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">eq2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">HK</span> <span class="id" title="var">a</span> <span class="id" title="var">H0</span>). <span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>. 2 : { <span class="id" title="tactic">apply</span> <span class="id" title="var">HK</span>. } <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">revert</span> <span class="id" title="var">t</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pcofix</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">t</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">eq</span> <span class="id" title="var">HI</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HI</span>. <span class="id" title="var">punfold</span> <span class="id" title="var">HI</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HI</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pstep</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">genobs</span> <span class="id" title="var">t</span> <span class="id" title="var">ot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HI</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">eq2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">HK</span> <span class="id" title="var">a</span> <span class="id" title="var">H0</span>). <span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>. 2 : { <span class="id" title="tactic">apply</span> <span class="id" title="var">HK</span>. } <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;This&nbsp;exists&nbsp;in&nbsp;the&nbsp;stdlib&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">ProofIrrelevance.inj_pair2</span></span>,&nbsp;but&nbsp;we&nbsp;reprove<br/>
&nbsp;it&nbsp;to&nbsp;not&nbsp;depend&nbsp;on&nbsp;proof&nbsp;irrelevance&nbsp;(we&nbsp;use&nbsp;axiom&nbsp;<span class="inlinecode"><span class="id" title="var">JMeq.JMeq_eq</span></span>&nbsp;instead).<br/>
&nbsp;The&nbsp;itree&nbsp;library&nbsp;now&nbsp;avoids&nbsp;as&nbsp;much&nbsp;as&nbsp;possible&nbsp;using&nbsp;this&nbsp;axiom,&nbsp;we&nbsp;may&nbsp;want<br/>
&nbsp;to&nbsp;see&nbsp;if&nbsp;it's&nbsp;possible&nbsp;to&nbsp;do&nbsp;so&nbsp;here.<br/>
&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="inj_pair2" class="idref" href="#inj_pair2"><span class="id" title="lemma">inj_pair2</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="U:172" class="idref" href="#U:172"><span class="id" title="binder">U</span></a> : <span class="id" title="keyword">Type</span>) (<a id="P:173" class="idref" href="#P:173"><span class="id" title="binder">P</span></a> : <a class="idref" href="ITree.Extra.IForest.html#U:172"><span class="id" title="variable">U</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="p:174" class="idref" href="#p:174"><span class="id" title="binder">p</span></a> : <a class="idref" href="ITree.Extra.IForest.html#U:172"><span class="id" title="variable">U</span></a>) (<a id="x:175" class="idref" href="#x:175"><span class="id" title="binder">x</span></a> <a id="y:176" class="idref" href="#y:176"><span class="id" title="binder">y</span></a> : <a class="idref" href="ITree.Extra.IForest.html#P:173"><span class="id" title="variable">P</span></a> <a class="idref" href="ITree.Extra.IForest.html#p:174"><span class="id" title="variable">p</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <a class="idref" href="ITree.Extra.IForest.html#P:173"><span class="id" title="variable">P</span></a> <a class="idref" href="ITree.Extra.IForest.html#p:174"><span class="id" title="variable">p</span></a> <a class="idref" href="ITree.Extra.IForest.html#x:175"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <a class="idref" href="ITree.Extra.IForest.html#P:173"><span class="id" title="variable">P</span></a> <a class="idref" href="ITree.Extra.IForest.html#p:174"><span class="id" title="variable">p</span></a> <a class="idref" href="ITree.Extra.IForest.html#y:176"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.IForest.html#x:175"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.Extra.IForest.html#y:176"><span class="id" title="variable">y</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Logic.JMeq.html#JMeq_eq"><span class="id" title="lemma">JMeq.JMeq_eq</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">w</span> <span class="id" title="keyword">return</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Logic.JMeq.html#JMeq"><span class="id" title="inductive">JMeq.JMeq</span></a> <span class="id" title="var">x</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> <a class="idref" href="ITree.Extra.IForest.html#w:178"><span class="id" title="variable">w</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Logic.JMeq.html#JMeq_refl"><span class="id" title="constructor">JMeq.JMeq_refl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="interp_iforest_Proper3" class="idref" href="#interp_iforest_Proper3"><span class="id" title="instance">interp_iforest_Proper3</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="E:181" class="idref" href="#E:181"><span class="id" title="binder">E</span></a> <a id="F:182" class="idref" href="#F:182"><span class="id" title="binder">F</span></a>} (<a id="h_spec:183" class="idref" href="#h_spec:183"><span class="id" title="binder">h_spec</span></a> : <a class="idref" href="ITree.Extra.IForest.html#E:181"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Basics.Basics.html#f7397da22bdab7f77b06c5d98764e7b9"><span class="id" title="notation">~&gt;</span></a> <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#F:182"><span class="id" title="variable">F</span></a>) <a id="R:184" class="idref" href="#R:184"><span class="id" title="binder">R</span></a> <a id="RR:185" class="idref" href="#RR:185"><span class="id" title="binder">RR</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a>(<a class="idref" href="ITree.Eq.Eqit.html#eq_itree"><span class="id" title="definition">eq_itree</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#iff"><span class="id" title="definition">iff</span></a>) (<a class="idref" href="ITree.Extra.IForest.html#interp_iforest"><span class="id" title="definition">interp_iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#h_spec:183"><span class="id" title="variable">h_spec</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:184"><span class="id" title="variable">R</span></a> <a class="idref" href="ITree.Extra.IForest.html#RR:185"><span class="id" title="variable">RR</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">do</span> 4 <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">H</span> <span class="id" title="var">y0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pcofix</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">eq</span> <span class="id" title="var">t</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pstep</span>; <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">genobs</span> <span class="id" title="var">x</span> <span class="id" title="var">obsx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">genobs</span> <span class="id" title="var">y</span> <span class="id" title="var">obsy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">Heqobsx</span> <span class="id" title="var">Heqobsy</span> <span class="id" title="var">t</span> <span class="id" title="var">H</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">eq</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">Heqobsx</span> <span class="id" title="var">Heqobsy</span> <span class="id" title="var">t</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">pclearbot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">econstructor</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">REL</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">HS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.IForest.html#inj_pair2"><span class="id" title="lemma">inj_pair2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.IForest.html#inj_pair2"><span class="id" title="lemma">inj_pair2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">X</span> <span class="id" title="var">HX</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">REL</span> <span class="id" title="var">X</span>). <span class="id" title="tactic">specialize</span> (<span class="id" title="var">HK</span> <span class="id" title="var">X</span> <span class="id" title="var">HX</span>). <span class="id" title="var">pclearbot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHeq</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">HS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">econstructor</span>. <span class="id" title="tactic">left</span>. <span class="id" title="var">pstep</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHeq</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">econstructor</span>. <span class="id" title="tactic">left</span>. <span class="id" title="var">pstep</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHeq</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">econstructor</span>. <span class="id" title="tactic">left</span>. <span class="id" title="var">pstep</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHeq</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">assumption</span>.<br/>

<br/>
&nbsp;- <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">H</span> <span class="id" title="var">y0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pcofix</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">eq</span> <span class="id" title="var">t</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pstep</span>; <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">genobs</span> <span class="id" title="var">x</span> <span class="id" title="var">obsx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">genobs</span> <span class="id" title="var">y</span> <span class="id" title="var">obsy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">Heqobsx</span> <span class="id" title="var">Heqobsy</span> <span class="id" title="var">t</span> <span class="id" title="var">H</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">eq</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">Heqobsx</span> <span class="id" title="var">Heqobsy</span> <span class="id" title="var">t</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">pclearbot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">econstructor</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">REL</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">HS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.IForest.html#inj_pair2"><span class="id" title="lemma">inj_pair2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.IForest.html#inj_pair2"><span class="id" title="lemma">inj_pair2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">X</span> <span class="id" title="var">HX</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">REL</span> <span class="id" title="var">X</span>). <span class="id" title="tactic">specialize</span> (<span class="id" title="var">HK</span> <span class="id" title="var">X</span> <span class="id" title="var">HX</span>). <span class="id" title="var">pclearbot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">econstructor</span>. <span class="id" title="tactic">left</span>. <span class="id" title="var">pstep</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHeq</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">econstructor</span>. <span class="id" title="tactic">left</span>. <span class="id" title="var">pstep</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHeq</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">econstructor</span>. <span class="id" title="tactic">left</span>. <span class="id" title="var">pstep</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHeq</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHeq</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="var">punfold</span> <span class="id" title="var">HS</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Lemma&nbsp;5.4:&nbsp;interp_iforest_correct&nbsp;-&nbsp;note&nbsp;that&nbsp;the&nbsp;paper&nbsp;presents&nbsp;a&nbsp;slightly&nbsp;simpler&nbsp;formulation&nbsp;where&nbsp;t&nbsp;=&nbsp;t'&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="interp_iforest_correct_exec" class="idref" href="#interp_iforest_correct_exec"><span class="id" title="lemma">interp_iforest_correct_exec</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<a id="E:186" class="idref" href="#E:186"><span class="id" title="binder">E</span></a> <a id="F:187" class="idref" href="#F:187"><span class="id" title="binder">F</span></a>} (<a id="h_spec:188" class="idref" href="#h_spec:188"><span class="id" title="binder">h_spec</span></a>: <a class="idref" href="ITree.Extra.IForest.html#E:186"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Basics.Basics.html#f7397da22bdab7f77b06c5d98764e7b9"><span class="id" title="notation">~&gt;</span></a> <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#F:187"><span class="id" title="variable">F</span></a>) (<a id="h:189" class="idref" href="#h:189"><span class="id" title="binder">h</span></a>: <a class="idref" href="ITree.Extra.IForest.html#E:186"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Basics.Basics.html#f7397da22bdab7f77b06c5d98764e7b9"><span class="id" title="notation">~&gt;</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#F:187"><span class="id" title="variable">F</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.IForest.html#handler_correct"><span class="id" title="definition">handler_correct</span></a> <a class="idref" href="ITree.Extra.IForest.html#h_spec:188"><span class="id" title="variable">h_spec</span></a> <a class="idref" href="ITree.Extra.IForest.html#h:189"><span class="id" title="variable">h</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="R:190" class="idref" href="#R:190"><span class="id" title="binder">R</span></a> <a id="RR:191" class="idref" href="#RR:191"><span class="id" title="binder">RR</span></a> `{<a id="H:192" class="idref" href="#H:192"><span class="id" title="binder">Reflexive</span></a> <a id="H:192" class="idref" href="#H:192"><span class="id" title="binder">_</span></a> <a id="H:192" class="idref" href="#H:192"><span class="id" title="binder">RR</span></a>} <a id="t:193" class="idref" href="#t:193"><span class="id" title="binder">t</span></a> <a id="t':194" class="idref" href="#t':194"><span class="id" title="binder">t'</span></a>, <a class="idref" href="ITree.Extra.IForest.html#t:193"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Extra.IForest.html#t':194"><span class="id" title="variable">t'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.IForest.html#interp_iforest"><span class="id" title="definition">interp_iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#h_spec:188"><span class="id" title="variable">h_spec</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:190"><span class="id" title="variable">R</span></a> <a class="idref" href="ITree.Extra.IForest.html#RR:191"><span class="id" title="variable">RR</span></a> <a class="idref" href="ITree.Extra.IForest.html#t:193"><span class="id" title="variable">t</span></a> (<a class="idref" href="ITree.Interp.Interp.html#interp"><span class="id" title="definition">interp</span></a> <a class="idref" href="ITree.Extra.IForest.html#h:189"><span class="id" title="variable">h</span></a> <a class="idref" href="ITree.Extra.IForest.html#t':194"><span class="id" title="variable">t'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">t</span> <span class="id" title="var">t'</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">pcofix</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">t</span> <span class="id" title="var">t'</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">pstep</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Interp.Interp.html#interp"><span class="id" title="definition">interp</span></a>, <a class="idref" href="ITree.Basics.Basics.html#iter"><span class="id" title="definition">Basics.iter</span></a>, <a class="idref" href="ITree.Core.ITreeDefinition.html#MonadIter_itree"><span class="id" title="instance">MonadIter_itree</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a> <span class="id" title="var">t</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">eq</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#unfold_iter"><span class="id" title="lemma">unfold_iter</span></a>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_l"><span class="id" title="lemma">Eqit.bind_ret_l</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>. <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2 : { <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">eq</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#unfold_iter"><span class="id" title="lemma">unfold_iter</span></a>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.map"><span class="id" title="definition">ITree.map</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_bind"><span class="id" title="lemma">Eqit.bind_bind</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_l"><span class="id" title="lemma">Eqit.bind_ret_l</span></a> <span class="id" title="tactic">at</span> 1. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Interp.Interp.html#interp"><span class="id" title="definition">interp</span></a>, <a class="idref" href="ITree.Basics.Basics.html#iter"><span class="id" title="definition">Basics.iter</span></a>, <a class="idref" href="ITree.Core.ITreeDefinition.html#MonadIter_itree"><span class="id" title="instance">MonadIter_itree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="method">fmap</span>, <a class="idref" href="ITree.Core.ITreeDefinition.html#Functor_itree"><span class="id" title="instance">Functor_itree</span></a>, <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.map"><span class="id" title="definition">ITree.map</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">CIH</span> (<span class="id" title="var">k</span> <span class="id" title="var">a</span>) (<span class="id" title="var">k</span> <span class="id" title="var">a</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Lemma&nbsp;5.5&nbsp;-&nbsp;note&nbsp;that&nbsp;the&nbsp;paper&nbsp;presents&nbsp;this&nbsp;lemma&nbsp;after&nbsp;unfolding&nbsp;the&nbsp;definition&nbsp;of&nbsp;Proper.<br/>
&nbsp;*)</span><br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="interp_iforest_Proper_eq" class="idref" href="#interp_iforest_Proper_eq"><span class="id" title="instance">interp_iforest_Proper_eq</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="R:195" class="idref" href="#R:195"><span class="id" title="binder">R</span></a> (<a id="RR:196" class="idref" href="#RR:196"><span class="id" title="binder">RR</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:195"><span class="id" title="variable">R</span></a>) (<a id="HR:197" class="idref" href="#HR:197"><span class="id" title="binder">HR</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.RelationClasses.html#Reflexive"><span class="id" title="class">Reflexive</span></a> <a class="idref" href="ITree.Extra.IForest.html#RR:196"><span class="id" title="variable">RR</span></a>) (<a id="HT:198" class="idref" href="#HT:198"><span class="id" title="binder">HT</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.RelationClasses.html#Transitive"><span class="id" title="class">Transitive</span></a> <a class="idref" href="ITree.Extra.IForest.html#RR:196"><span class="id" title="variable">RR</span></a>) <a id="E:199" class="idref" href="#E:199"><span class="id" title="binder">E</span></a> <a id="F:200" class="idref" href="#F:200"><span class="id" title="binder">F</span></a> (<a id="h_spec:201" class="idref" href="#h_spec:201"><span class="id" title="binder">h_spec</span></a> : <a class="idref" href="ITree.Extra.IForest.html#E:199"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Basics.Basics.html#f7397da22bdab7f77b06c5d98764e7b9"><span class="id" title="notation">~&gt;</span></a> <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#F:200"><span class="id" title="variable">F</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (@<a class="idref" href="ITree.Eq.Eqit.html#eutt"><span class="id" title="definition">eutt</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="ITree.Extra.IForest.html#RR:196"><span class="id" title="variable">RR</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Program.Basics.html#flip"><span class="id" title="definition">flip</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Program.Basics.html#impl"><span class="id" title="definition">Basics.impl</span></a>) (@<a class="idref" href="ITree.Extra.IForest.html#interp_iforest"><span class="id" title="definition">interp_iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:199"><span class="id" title="variable">E</span></a> <span class="id" title="var">_</span> <a class="idref" href="ITree.Extra.IForest.html#h_spec:201"><span class="id" title="variable">h_spec</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:195"><span class="id" title="variable">R</span></a> <a class="idref" href="ITree.Extra.IForest.html#RR:196"><span class="id" title="variable">RR</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">do</span> 5 <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span> <span class="id" title="var">eqt</span> <span class="id" title="var">s'</span> <span class="id" title="var">s</span> <span class="id" title="var">eqs</span> <span class="id" title="var">HI</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span> <span class="id" title="var">eqt</span> <span class="id" title="var">s</span> <span class="id" title="var">HI</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">pcofix</span> <span class="id" title="var">CIH</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">pstep</span>. <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">HI</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HI</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">eqt</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">eqt</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">genobs</span> <span class="id" title="var">t1</span> <span class="id" title="var">obst1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">genobs</span> <span class="id" title="var">t2</span> <span class="id" title="var">obst2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span> <span class="id" title="var">Heqobst1</span> <span class="id" title="var">Heqobst2</span> <span class="id" title="var">s</span> <span class="id" title="var">HI</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">eqt</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">HI</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>. <span class="id" title="var">etransitivity</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">HI</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>. <span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">HI</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.IForest.html#inj_pair2"><span class="id" title="lemma">inj_pair2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.IForest.html#inj_pair2"><span class="id" title="lemma">inj_pair2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">HTA</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">eq2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">REL</span> <span class="id" title="var">a</span>). <span class="id" title="tactic">specialize</span> (<span class="id" title="var">HK</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>). <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">REL</span>. <span class="id" title="var">pclearbot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">REL</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">HK</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span>. <span class="id" title="var">pstep</span>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHeqt</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="var">eassumption</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">HI</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pclearbot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHeqt</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pinversion</span> <span class="id" title="var">HS</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="Returns_eutt" class="idref" href="#Returns_eutt"><span class="id" title="instance">Returns_eutt</span></a> {<a id="E:202" class="idref" href="#E:202"><span class="id" title="binder">E</span></a> <a id="A:203" class="idref" href="#A:203"><span class="id" title="binder">A</span></a>} <a id="a:204" class="idref" href="#a:204"><span class="id" title="binder">a</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="ITree.Eq.Eqit.html#eutt"><span class="id" title="definition">eutt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#iff"><span class="id" title="definition">iff</span></a>) (@<a class="idref" href="ITree.Extra.IForest.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:202"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:203"><span class="id" title="variable">A</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:204"><span class="id" title="variable">a</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">HRet</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">revert</span> <span class="id" title="var">y</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">HRet</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span>, <span class="id" title="var">H0</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHHRet</span>, <a class="idref" href="ITree.Eq.Eqit.html#eqit_inv_Tau_l"><span class="id" title="lemma">eqit_inv_Tau_l</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H0</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span> 3; [<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H0</span>, <span class="id" title="var">H</span>; <span class="id" title="tactic">reflexivity</span> | <span class="id" title="tactic">apply</span> <span class="id" title="var">IHHRet</span>; <span class="id" title="tactic">reflexivity</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="var">revert</span> <span class="id" title="var">x</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">HRet</span>; <span class="id" title="tactic">intros</span> ? <span class="id" title="var">EQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHHRet</span>, <a class="idref" href="ITree.Eq.Eqit.html#eqit_inv_Tau_r"><span class="id" title="lemma">eqit_inv_Tau_r</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">EQ</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span> 3; [<span class="id" title="tactic">rewrite</span> <span class="id" title="var">EQ</span>, <span class="id" title="var">H</span>; <span class="id" title="tactic">reflexivity</span> | <span class="id" title="tactic">apply</span> <span class="id" title="var">IHHRet</span>; <span class="id" title="tactic">reflexivity</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Returns_Vis_sub" class="idref" href="#Returns_Vis_sub"><span class="id" title="lemma">Returns_Vis_sub</span></a> :  <span class="id" title="keyword">∀</span> {<a id="E:205" class="idref" href="#E:205"><span class="id" title="binder">E</span></a>} {<a id="R:206" class="idref" href="#R:206"><span class="id" title="binder">R</span></a>} <a id="X:207" class="idref" href="#X:207"><span class="id" title="binder">X</span></a> (<a id="e:208" class="idref" href="#e:208"><span class="id" title="binder">e</span></a> : <a class="idref" href="ITree.Extra.IForest.html#E:205"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#X:207"><span class="id" title="variable">X</span></a>) (<a id="k:209" class="idref" href="#k:209"><span class="id" title="binder">k</span></a> : <a class="idref" href="ITree.Extra.IForest.html#X:207"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:205"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:206"><span class="id" title="variable">R</span></a>) <a id="u:210" class="idref" href="#u:210"><span class="id" title="binder">u</span></a> <a id="x:211" class="idref" href="#x:211"><span class="id" title="binder">x</span></a>, <a class="idref" href="ITree.Extra.IForest.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.Extra.IForest.html#u:210"><span class="id" title="variable">u</span></a> (<a class="idref" href="ITree.Extra.IForest.html#k:209"><span class="id" title="variable">k</span></a> <a class="idref" href="ITree.Extra.IForest.html#x:211"><span class="id" title="variable">x</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.IForest.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.Extra.IForest.html#u:210"><span class="id" title="variable">u</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <a class="idref" href="ITree.Extra.IForest.html#e:208"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.Extra.IForest.html#k:209"><span class="id" title="variable">k</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.IForest.html#ReturnsVis"><span class="id" title="constructor">ReturnsVis</span></a>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eutt_Returns_" class="idref" href="#eutt_Returns_"><span class="id" title="lemma">eutt_Returns_</span></a> : <span class="id" title="keyword">∀</span> {<a id="E:212" class="idref" href="#E:212"><span class="id" title="binder">E</span></a>} {<a id="R:213" class="idref" href="#R:213"><span class="id" title="binder">R</span></a>} (<a id="RR:214" class="idref" href="#RR:214"><span class="id" title="binder">RR</span></a> : <a class="idref" href="ITree.Extra.IForest.html#R:213"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>) (<a id="ta:215" class="idref" href="#ta:215"><span class="id" title="binder">ta</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:212"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:213"><span class="id" title="variable">R</span></a>)<br/>
&nbsp;&nbsp;&nbsp;(<a id="IN:217" class="idref" href="#IN:217"><span class="id" title="binder">IN</span></a>: <span class="id" title="keyword">∀</span> (<a id="a:216" class="idref" href="#a:216"><span class="id" title="binder">a</span></a> : <a class="idref" href="ITree.Extra.IForest.html#R:213"><span class="id" title="variable">R</span></a>), <a class="idref" href="ITree.Extra.IForest.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:216"><span class="id" title="variable">a</span></a> <a class="idref" href="ITree.Extra.IForest.html#ta:215"><span class="id" title="variable">ta</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.IForest.html#RR:214"><span class="id" title="variable">RR</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:216"><span class="id" title="variable">a</span></a>), <a class="idref" href="ITree.Eq.Eqit.html#eutt"><span class="id" title="definition">eutt</span></a> (<span class="id" title="keyword">fun</span> <a id="u1:218" class="idref" href="#u1:218"><span class="id" title="binder">u1</span></a> <a id="u2:219" class="idref" href="#u2:219"><span class="id" title="binder">u2</span></a> ⇒ <a class="idref" href="ITree.Extra.IForest.html#u1:218"><span class="id" title="variable">u1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.Extra.IForest.html#u2:219"><span class="id" title="variable">u2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="ITree.Extra.IForest.html#RR:214"><span class="id" title="variable">RR</span></a> <a class="idref" href="ITree.Extra.IForest.html#u1:218"><span class="id" title="variable">u1</span></a>) <a class="idref" href="ITree.Extra.IForest.html#ta:215"><span class="id" title="variable">ta</span></a> <a class="idref" href="ITree.Extra.IForest.html#ta:215"><span class="id" title="variable">ta</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">ginit</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">gcofix</span> <span class="id" title="var">CIH</span>; <span class="id" title="tactic">intros</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> (<a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a> <span class="id" title="var">ta</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">IN</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">gstep</span>. <span class="id" title="tactic">red</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">ta</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IN</span>. <span class="id" title="tactic">econstructor</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>. <span class="id" title="var">gfinal</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IN</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">gfinal</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IN</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.IForest.html#Returns_Vis_sub"><span class="id" title="lemma">Returns_Vis_sub</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eutt_Returns" class="idref" href="#eutt_Returns"><span class="id" title="lemma">eutt_Returns</span></a> : <span class="id" title="keyword">∀</span> <a id="E:220" class="idref" href="#E:220"><span class="id" title="binder">E</span></a> <a id="R:221" class="idref" href="#R:221"><span class="id" title="binder">R</span></a> (<a id="ta:222" class="idref" href="#ta:222"><span class="id" title="binder">ta</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:220"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:221"><span class="id" title="variable">R</span></a>), <a class="idref" href="ITree.Eq.Eqit.html#eutt"><span class="id" title="definition">eutt</span></a> (<span class="id" title="keyword">fun</span> <a id="u1:223" class="idref" href="#u1:223"><span class="id" title="binder">u1</span></a> <a id="u2:224" class="idref" href="#u2:224"><span class="id" title="binder">u2</span></a> ⇒ <a class="idref" href="ITree.Extra.IForest.html#u1:223"><span class="id" title="variable">u1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.Extra.IForest.html#u2:224"><span class="id" title="variable">u2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="ITree.Extra.IForest.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.Extra.IForest.html#u1:223"><span class="id" title="variable">u1</span></a> <a class="idref" href="ITree.Extra.IForest.html#ta:222"><span class="id" title="variable">ta</span></a>) <a class="idref" href="ITree.Extra.IForest.html#ta:222"><span class="id" title="variable">ta</span></a> <a class="idref" href="ITree.Extra.IForest.html#ta:222"><span class="id" title="variable">ta</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.IForest.html#eutt_Returns_"><span class="id" title="lemma">eutt_Returns_</span></a>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Figure&nbsp;7:&nbsp;interp&nbsp;Trigger&nbsp;law&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;morally,&nbsp;we&nbsp;should&nbsp;only&nbsp;work&nbsp;with&nbsp;"proper"&nbsp;triggers&nbsp;everywhere&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="interp_iforest_trigger" class="idref" href="#interp_iforest_trigger"><span class="id" title="lemma">interp_iforest_trigger</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="E:225" class="idref" href="#E:225"><span class="id" title="binder">E</span></a> <a id="F:226" class="idref" href="#F:226"><span class="id" title="binder">F</span></a> (<a id="h_spec:227" class="idref" href="#h_spec:227"><span class="id" title="binder">h_spec</span></a> : <a class="idref" href="ITree.Extra.IForest.html#E:225"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Basics.Basics.html#f7397da22bdab7f77b06c5d98764e7b9"><span class="id" title="notation">~&gt;</span></a> <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#F:226"><span class="id" title="variable">F</span></a>) <a id="R:228" class="idref" href="#R:228"><span class="id" title="binder">R</span></a> (<a id="e:229" class="idref" href="#e:229"><span class="id" title="binder">e</span></a> : <a class="idref" href="ITree.Extra.IForest.html#E:225"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:228"><span class="id" title="variable">R</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="HP:231" class="idref" href="#HP:231"><span class="id" title="binder">HP</span></a> : <span class="id" title="keyword">∀</span> <a id="T:230" class="idref" href="#T:230"><span class="id" title="binder">T</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="ITree.Extra.IForest.html#Eq1_iforest"><span class="id" title="instance">Eq1_iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#T:230"><span class="id" title="variable">T</span></a>) (<a class="idref" href="ITree.Extra.IForest.html#h_spec:227"><span class="id" title="variable">h_spec</span></a> <a class="idref" href="ITree.Extra.IForest.html#T:230"><span class="id" title="variable">T</span></a>))<br/>
&nbsp;&nbsp;, <a class="idref" href="ITree.Extra.IForest.html#Eq1_iforest"><span class="id" title="instance">Eq1_iforest</span></a> <span class="id" title="var">_</span> (<a class="idref" href="ITree.Extra.IForest.html#interp_iforest"><span class="id" title="definition">interp_iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#h_spec:227"><span class="id" title="variable">h_spec</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:228"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> (<a class="idref" href="ITree.Core.Subevent.html#trigger"><span class="id" title="abbreviation">trigger</span></a> <a class="idref" href="ITree.Extra.IForest.html#e:229"><span class="id" title="variable">e</span></a>)) (<a class="idref" href="ITree.Extra.IForest.html#h_spec:227"><span class="id" title="variable">h_spec</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:228"><span class="id" title="variable">R</span></a> <a class="idref" href="ITree.Extra.IForest.html#e:229"><span class="id" title="variable">e</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [| <span class="id" title="tactic">split</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <span class="id" title="var">trigger</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pinversion</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.IForest.html#inj_pair2"><span class="id" title="lemma">inj_pair2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.IForest.html#inj_pair2"><span class="id" title="lemma">inj_pair2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.Subevent.html#subevent"><span class="id" title="definition">subevent</span></a>, <a class="idref" href="ITree.Basics.CategoryOps.html#resum"><span class="id" title="definition">resum</span></a>, <a class="idref" href="ITree.Basics.CategoryOps.html#ReSum_id"><span class="id" title="instance">ReSum_id</span></a>, <a class="idref" href="ITree.Indexed.Function.html#Id_IFun"><span class="id" title="instance">Id_IFun</span></a>, <a class="idref" href="ITree.Basics.CategoryOps.html#id_"><span class="id" title="definition">id_</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HTA</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">eq2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a id="x:233" class="idref" href="#x:233"><span class="id" title="binder">x</span></a> <span class="id" title="notation">&lt;-</span> <span class="id" title="var">ta</span> <span class="id" title="notation">;;</span> <span class="id" title="var">k2</span> <a class="idref" href="ITree.Extra.IForest.html#x:232"><span class="id" title="variable">x</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <span class="id" title="var">ta</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="ITree.Eq.Eqit.html#bind_ret_r"><span class="id" title="lemma">Eqit.bind_ret_r</span></a> <span class="id" title="var">ta</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#eutt_clo_bind"><span class="id" title="lemma">eutt_clo_bind</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">UU</span> := <span class="id" title="keyword">fun</span> <a id="u1:236" class="idref" href="#u1:236"><span class="id" title="binder">u1</span></a> <a id="u2:237" class="idref" href="#u2:237"><span class="id" title="binder">u2</span></a> ⇒ <a class="idref" href="ITree.Extra.IForest.html#u1:234"><span class="id" title="variable">u1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.Extra.IForest.html#u2:235"><span class="id" title="variable">u2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="ITree.Extra.IForest.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.Extra.IForest.html#u1:234"><span class="id" title="variable">u1</span></a> <span class="id" title="var">ta</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_r"><span class="id" title="lemma">Eqit.bind_ret_r</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.IForest.html#eutt_Returns"><span class="id" title="lemma">eutt_Returns</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">HK</span> <span class="id" title="var">u2</span> <span class="id" title="var">H2</span>). <span class="id" title="var">pclearbot</span>. <span class="id" title="var">pinversion</span> <span class="id" title="var">HK</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">HP</span> <span class="id" title="var">R</span> <span class="id" title="var">e</span> <span class="id" title="var">e</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>). <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.IForest.html#Eq1_iforest"><span class="id" title="instance">Eq1_iforest</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HP</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">HP</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">P</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">P</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">HTA</span>. <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <span class="id" title="var">trigger</span>, <a class="idref" href="ITree.Core.Subevent.html#subevent"><span class="id" title="definition">subevent</span></a>, <a class="idref" href="ITree.Basics.CategoryOps.html#resum"><span class="id" title="definition">resum</span></a>, <a class="idref" href="ITree.Basics.CategoryOps.html#ReSum_id"><span class="id" title="instance">ReSum_id</span></a>, <a class="idref" href="ITree.Indexed.Function.html#Id_IFun"><span class="id" title="instance">Id_IFun</span></a>, <a class="idref" href="ITree.Basics.CategoryOps.html#id_"><span class="id" title="definition">id_</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span>. <span class="id" title="var">pstep</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.IForest.html#Interp_iforest_Vis"><span class="id" title="constructor">Interp_iforest_Vis</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">k2</span> := (<span class="id" title="keyword">fun</span> <a id="x:239" class="idref" href="#x:239"><span class="id" title="binder">x</span></a> : <span class="id" title="var">R</span> ⇒ <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.Extra.IForest.html#x:238"><span class="id" title="variable">x</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">unfold</span> <span class="id" title="method">bind</span>, <a class="idref" href="ITree.Core.ITreeDefinition.html#Monad_itree"><span class="id" title="instance">Monad_itree</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_r"><span class="id" title="lemma">Eqit.bind_ret_r</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">left</span>. <span class="id" title="var">pstep</span>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">econstructor</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">do</span> 4 <span class="id" title="tactic">red</span>. <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">do</span> 4 <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">HP</span> <span class="id" title="var">R</span> <span class="id" title="var">e</span> <span class="id" title="var">e</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">HP</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">P</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">P</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">HP</span> <span class="id" title="var">R</span> <span class="id" title="var">e</span> <span class="id" title="var">e</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">HP</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">P</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">P</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;&nbsp;Interesting&nbsp;observations&nbsp;about&nbsp;interp_iforest:<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Suppose&nbsp;h_spec&nbsp;:&nbsp;E&nbsp;~&gt;&nbsp;Prop&nbsp;T&nbsp;F<br/>
&nbsp;&nbsp;&nbsp;&nbsp;then&nbsp;(interp_iforest&nbsp;h_spec&nbsp;_&nbsp;eq&nbsp;spin)&nbsp;:&nbsp;iforest&nbsp;F<br/>
&nbsp;&nbsp;&nbsp;&nbsp;which&nbsp;itrees&nbsp;should&nbsp;be&nbsp;accepted&nbsp;by&nbsp;that&nbsp;predicate?<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;we&nbsp;know&nbsp;by&nbsp;interp_iforest_correct_exe&nbsp;that&nbsp;if&nbsp;there&nbsp;is&nbsp;an&nbsp;h&nbsp;such&nbsp;that&nbsp;handler_correct&nbsp;h_spec&nbsp;h&nbsp;then&nbsp;spin&nbsp;is&nbsp;accepted.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(I&nbsp;believe&nbsp;we&nbsp;could&nbsp;eliminate&nbsp;the&nbsp;requirement&nbsp;that&nbsp;there&nbsp;is&nbsp;such&nbsp;an&nbsp;h)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;what&nbsp;other&nbsp;trees&nbsp;are&nbsp;accepted?<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Answer:&nbsp;all&nbsp;of&nbsp;them!<br/>
&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="interp_iforest_spin_accepts_anything" class="idref" href="#interp_iforest_spin_accepts_anything"><span class="id" title="lemma">interp_iforest_spin_accepts_anything</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="E:240" class="idref" href="#E:240"><span class="id" title="binder">E</span></a> <a id="F:241" class="idref" href="#F:241"><span class="id" title="binder">F</span></a> (<a id="h_spec:242" class="idref" href="#h_spec:242"><span class="id" title="binder">h_spec</span></a> : <a class="idref" href="ITree.Extra.IForest.html#E:240"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Basics.Basics.html#f7397da22bdab7f77b06c5d98764e7b9"><span class="id" title="notation">~&gt;</span></a> <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#F:241"><span class="id" title="variable">F</span></a>) <a id="R:243" class="idref" href="#R:243"><span class="id" title="binder">R</span></a> <a id="RR:244" class="idref" href="#RR:244"><span class="id" title="binder">RR</span></a> (<a id="t:245" class="idref" href="#t:245"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#F:241"><span class="id" title="variable">F</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:243"><span class="id" title="variable">R</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.IForest.html#interp_iforest"><span class="id" title="definition">interp_iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#h_spec:242"><span class="id" title="variable">h_spec</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:243"><span class="id" title="variable">R</span></a> <a class="idref" href="ITree.Extra.IForest.html#RR:244"><span class="id" title="variable">RR</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.spin"><span class="id" title="definition">ITree.spin</span></a> <a class="idref" href="ITree.Extra.IForest.html#t:245"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">pcofix</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">pstep</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">econstructor</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">CIH</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Figure&nbsp;7:&nbsp;Structural&nbsp;law&nbsp;for&nbsp;tau&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="interp_iforest_tau" class="idref" href="#interp_iforest_tau"><span class="id" title="lemma">interp_iforest_tau</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="E:246" class="idref" href="#E:246"><span class="id" title="binder">E</span></a> <a id="F:247" class="idref" href="#F:247"><span class="id" title="binder">F</span></a> (<a id="h_spec:248" class="idref" href="#h_spec:248"><span class="id" title="binder">h_spec</span></a> : <a class="idref" href="ITree.Extra.IForest.html#E:246"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Basics.Basics.html#f7397da22bdab7f77b06c5d98764e7b9"><span class="id" title="notation">~&gt;</span></a> <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#F:247"><span class="id" title="variable">F</span></a>) <a id="R:249" class="idref" href="#R:249"><span class="id" title="binder">R</span></a> <a id="RR:250" class="idref" href="#RR:250"><span class="id" title="binder">RR</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="t_spec:251" class="idref" href="#t_spec:251"><span class="id" title="binder">t_spec</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:246"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:249"><span class="id" title="variable">R</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.IForest.html#Eq1_iforest"><span class="id" title="instance">Eq1_iforest</span></a> <span class="id" title="var">_</span> (<a class="idref" href="ITree.Extra.IForest.html#interp_iforest"><span class="id" title="definition">interp_iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#h_spec:248"><span class="id" title="variable">h_spec</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:249"><span class="id" title="variable">R</span></a> <a class="idref" href="ITree.Extra.IForest.html#RR:250"><span class="id" title="variable">RR</span></a> <a class="idref" href="ITree.Extra.IForest.html#t_spec:251"><span class="id" title="variable">t_spec</span></a>) (<a class="idref" href="ITree.Extra.IForest.html#interp_iforest"><span class="id" title="definition">interp_iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#h_spec:248"><span class="id" title="variable">h_spec</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:249"><span class="id" title="variable">R</span></a> <a class="idref" href="ITree.Extra.IForest.html#RR:250"><span class="id" title="variable">RR</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Tau"><span class="id" title="abbreviation">Tau</span></a> <a class="idref" href="ITree.Extra.IForest.html#t_spec:251"><span class="id" title="variable">t_spec</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [| <span class="id" title="tactic">split</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pstep</span>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">econstructor</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pinversion</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">HS</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">red</span>. <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">red</span>. <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="interp_iforest_ret_inv" class="idref" href="#interp_iforest_ret_inv"><span class="id" title="lemma">interp_iforest_ret_inv</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="E:252" class="idref" href="#E:252"><span class="id" title="binder">E</span></a> <a id="F:253" class="idref" href="#F:253"><span class="id" title="binder">F</span></a> (<a id="h_spec:254" class="idref" href="#h_spec:254"><span class="id" title="binder">h_spec</span></a> : <a class="idref" href="ITree.Extra.IForest.html#E:252"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Basics.Basics.html#f7397da22bdab7f77b06c5d98764e7b9"><span class="id" title="notation">~&gt;</span></a> <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#F:253"><span class="id" title="variable">F</span></a>) <a id="R:255" class="idref" href="#R:255"><span class="id" title="binder">R</span></a> <a id="RR:256" class="idref" href="#RR:256"><span class="id" title="binder">RR</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="r1:257" class="idref" href="#r1:257"><span class="id" title="binder">r1</span></a> : <a class="idref" href="ITree.Extra.IForest.html#R:255"><span class="id" title="variable">R</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="t:258" class="idref" href="#t:258"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#F:253"><span class="id" title="variable">F</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:255"><span class="id" title="variable">R</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="H:259" class="idref" href="#H:259"><span class="id" title="binder">H</span></a> : <a class="idref" href="ITree.Extra.IForest.html#interp_iforest"><span class="id" title="definition">interp_iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#h_spec:254"><span class="id" title="variable">h_spec</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:255"><span class="id" title="variable">R</span></a> <a class="idref" href="ITree.Extra.IForest.html#RR:256"><span class="id" title="variable">RR</span></a> (<span class="id" title="method">ret</span> <a class="idref" href="ITree.Extra.IForest.html#r1:257"><span class="id" title="variable">r1</span></a>) <a class="idref" href="ITree.Extra.IForest.html#t:258"><span class="id" title="variable">t</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a>  <a id="r2:260" class="idref" href="#r2:260"><span class="id" title="binder">r2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="ITree.Extra.IForest.html#RR:256"><span class="id" title="variable">RR</span></a> <a class="idref" href="ITree.Extra.IForest.html#r1:257"><span class="id" title="variable">r1</span></a> <a class="idref" href="ITree.Extra.IForest.html#r2:260"><span class="id" title="variable">r2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="ITree.Extra.IForest.html#t:258"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <span class="id" title="method">ret</span> <a class="idref" href="ITree.Extra.IForest.html#r2:260"><span class="id" title="variable">r2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">r2</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="interp_iforest_vis_inv" class="idref" href="#interp_iforest_vis_inv"><span class="id" title="lemma">interp_iforest_vis_inv</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="E:261" class="idref" href="#E:261"><span class="id" title="binder">E</span></a> <a id="F:262" class="idref" href="#F:262"><span class="id" title="binder">F</span></a> (<a id="h_spec:263" class="idref" href="#h_spec:263"><span class="id" title="binder">h_spec</span></a> : <a class="idref" href="ITree.Extra.IForest.html#E:261"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Basics.Basics.html#f7397da22bdab7f77b06c5d98764e7b9"><span class="id" title="notation">~&gt;</span></a> <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#F:262"><span class="id" title="variable">F</span></a>) <a id="R:264" class="idref" href="#R:264"><span class="id" title="binder">R</span></a> <a id="RR:265" class="idref" href="#RR:265"><span class="id" title="binder">RR</span></a> <a id="S:266" class="idref" href="#S:266"><span class="id" title="binder">S</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="e:267" class="idref" href="#e:267"><span class="id" title="binder">e</span></a> : <a class="idref" href="ITree.Extra.IForest.html#E:261"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#S:266"><span class="id" title="variable">S</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="k:268" class="idref" href="#k:268"><span class="id" title="binder">k</span></a> : <a class="idref" href="ITree.Extra.IForest.html#S:266"><span class="id" title="variable">S</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:261"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:264"><span class="id" title="variable">R</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="t:269" class="idref" href="#t:269"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#F:262"><span class="id" title="variable">F</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:264"><span class="id" title="variable">R</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="H:270" class="idref" href="#H:270"><span class="id" title="binder">H</span></a> : <a class="idref" href="ITree.Extra.IForest.html#interp_iforest"><span class="id" title="definition">interp_iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#h_spec:263"><span class="id" title="variable">h_spec</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:264"><span class="id" title="variable">R</span></a> <a class="idref" href="ITree.Extra.IForest.html#RR:265"><span class="id" title="variable">RR</span></a> (<a class="idref" href="ITree.Core.Subevent.html#vis"><span class="id" title="abbreviation">vis</span></a> <a class="idref" href="ITree.Extra.IForest.html#e:267"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.Extra.IForest.html#k:268"><span class="id" title="variable">k</span></a>) <a class="idref" href="ITree.Extra.IForest.html#t:269"><span class="id" title="variable">t</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a>  <a id="ms:271" class="idref" href="#ms:271"><span class="id" title="binder">ms</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="ks:272" class="idref" href="#ks:272"><span class="id" title="binder">ks</span></a> : <a class="idref" href="ITree.Extra.IForest.html#S:266"><span class="id" title="variable">S</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#F:262"><span class="id" title="variable">F</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:264"><span class="id" title="variable">R</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.IForest.html#h_spec:263"><span class="id" title="variable">h_spec</span></a> <a class="idref" href="ITree.Extra.IForest.html#S:266"><span class="id" title="variable">S</span></a> <a class="idref" href="ITree.Extra.IForest.html#e:267"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.Extra.IForest.html#ms:271"><span class="id" title="variable">ms</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="ITree.Extra.IForest.html#t:269"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">(</span></a><span class="id" title="method">bind</span> <a class="idref" href="ITree.Extra.IForest.html#ms:271"><span class="id" title="variable">ms</span></a> <a class="idref" href="ITree.Extra.IForest.html#ks:272"><span class="id" title="variable">ks</span></a><a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.IForest.html#inj_pair2"><span class="id" title="lemma">inj_pair2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.IForest.html#inj_pair2"><span class="id" title="lemma">inj_pair2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">ta</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">k2</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="interp_iforest_tau_inv" class="idref" href="#interp_iforest_tau_inv"><span class="id" title="lemma">interp_iforest_tau_inv</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="E:273" class="idref" href="#E:273"><span class="id" title="binder">E</span></a> <a id="F:274" class="idref" href="#F:274"><span class="id" title="binder">F</span></a> (<a id="h_spec:275" class="idref" href="#h_spec:275"><span class="id" title="binder">h_spec</span></a> : <a class="idref" href="ITree.Extra.IForest.html#E:273"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Basics.Basics.html#f7397da22bdab7f77b06c5d98764e7b9"><span class="id" title="notation">~&gt;</span></a> <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#F:274"><span class="id" title="variable">F</span></a>) <a id="R:276" class="idref" href="#R:276"><span class="id" title="binder">R</span></a> <a id="RR:277" class="idref" href="#RR:277"><span class="id" title="binder">RR</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:278" class="idref" href="#s:278"><span class="id" title="binder">s</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:273"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:276"><span class="id" title="variable">R</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="t:279" class="idref" href="#t:279"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#F:274"><span class="id" title="variable">F</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:276"><span class="id" title="variable">R</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="H:280" class="idref" href="#H:280"><span class="id" title="binder">H</span></a> : <a class="idref" href="ITree.Extra.IForest.html#interp_iforest"><span class="id" title="definition">interp_iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#h_spec:275"><span class="id" title="variable">h_spec</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:276"><span class="id" title="variable">R</span></a> <a class="idref" href="ITree.Extra.IForest.html#RR:277"><span class="id" title="variable">RR</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Tau"><span class="id" title="abbreviation">Tau</span></a> <a class="idref" href="ITree.Extra.IForest.html#s:278"><span class="id" title="variable">s</span></a>) <a class="idref" href="ITree.Extra.IForest.html#t:279"><span class="id" title="variable">t</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.IForest.html#interp_iforest"><span class="id" title="definition">interp_iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#h_spec:275"><span class="id" title="variable">h_spec</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:276"><span class="id" title="variable">R</span></a> <a class="idref" href="ITree.Extra.IForest.html#RR:277"><span class="id" title="variable">RR</span></a> <a class="idref" href="ITree.Extra.IForest.html#s:278"><span class="id" title="variable">s</span></a> <a class="idref" href="ITree.Extra.IForest.html#t:279"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">pclearbot</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">HS</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Returns_ret_inv_" class="idref" href="#Returns_ret_inv_"><span class="id" title="lemma">Returns_ret_inv_</span></a> : <span class="id" title="keyword">∀</span> {<a id="E:281" class="idref" href="#E:281"><span class="id" title="binder">E</span></a>} <a id="A:282" class="idref" href="#A:282"><span class="id" title="binder">A</span></a> (<a id="a:283" class="idref" href="#a:283"><span class="id" title="binder">a</span></a> <a id="b:284" class="idref" href="#b:284"><span class="id" title="binder">b</span></a> : <a class="idref" href="ITree.Extra.IForest.html#A:282"><span class="id" title="variable">A</span></a>) (<a id="t:285" class="idref" href="#t:285"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:281"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:282"><span class="id" title="variable">A</span></a>), <a class="idref" href="ITree.Extra.IForest.html#t:285"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.Extra.IForest.html#b:284"><span class="id" title="variable">b</span></a><a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.IForest.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:283"><span class="id" title="variable">a</span></a> <a class="idref" href="ITree.Extra.IForest.html#t:285"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:283"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.Extra.IForest.html#b:284"><span class="id" title="variable">b</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">A</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">t</span> <span class="id" title="var">eq</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">b</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#eqit_Ret"><span class="id" title="lemma">Eqit.eqit_Ret</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHReturns</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#eqit_inv"><span class="id" title="lemma">eqit_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">eq</span>; <span class="id" title="var">inv</span> <span class="id" title="var">eq</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Returns_ret_inv" class="idref" href="#Returns_ret_inv"><span class="id" title="lemma">Returns_ret_inv</span></a> :  <span class="id" title="keyword">∀</span> {<a id="E:286" class="idref" href="#E:286"><span class="id" title="binder">E</span></a>} <a id="A:287" class="idref" href="#A:287"><span class="id" title="binder">A</span></a> (<a id="a:288" class="idref" href="#a:288"><span class="id" title="binder">a</span></a> <a id="b:289" class="idref" href="#b:289"><span class="id" title="binder">b</span></a> : <a class="idref" href="ITree.Extra.IForest.html#A:287"><span class="id" title="variable">A</span></a>), <a class="idref" href="ITree.Extra.IForest.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:288"><span class="id" title="variable">a</span></a> ((<span class="id" title="method">ret</span> <a class="idref" href="ITree.Extra.IForest.html#b:289"><span class="id" title="variable">b</span></a>) : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:286"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:287"><span class="id" title="variable">A</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:288"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.Extra.IForest.html#b:289"><span class="id" title="variable">b</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.IForest.html#Returns_ret_inv_"><span class="id" title="lemma">Returns_ret_inv_</span></a>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="case_iforest_handler_correct" class="idref" href="#case_iforest_handler_correct"><span class="id" title="lemma">case_iforest_handler_correct</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<a id="E1:290" class="idref" href="#E1:290"><span class="id" title="binder">E1</span></a> <a id="E2:291" class="idref" href="#E2:291"><span class="id" title="binder">E2</span></a> <a id="F:292" class="idref" href="#F:292"><span class="id" title="binder">F</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="h1_spec:293" class="idref" href="#h1_spec:293"><span class="id" title="binder">h1_spec</span></a>: <a class="idref" href="ITree.Extra.IForest.html#E1:290"><span class="id" title="variable">E1</span></a> <a class="idref" href="ITree.Basics.Basics.html#f7397da22bdab7f77b06c5d98764e7b9"><span class="id" title="notation">~&gt;</span></a> <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#F:292"><span class="id" title="variable">F</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="h2_spec:294" class="idref" href="#h2_spec:294"><span class="id" title="binder">h2_spec</span></a>: <a class="idref" href="ITree.Extra.IForest.html#E2:291"><span class="id" title="variable">E2</span></a> <a class="idref" href="ITree.Basics.Basics.html#f7397da22bdab7f77b06c5d98764e7b9"><span class="id" title="notation">~&gt;</span></a> <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#F:292"><span class="id" title="variable">F</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="h1:295" class="idref" href="#h1:295"><span class="id" title="binder">h1</span></a>: <a class="idref" href="ITree.Extra.IForest.html#E1:290"><span class="id" title="variable">E1</span></a> <a class="idref" href="ITree.Basics.Basics.html#f7397da22bdab7f77b06c5d98764e7b9"><span class="id" title="notation">~&gt;</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#F:292"><span class="id" title="variable">F</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="h2:296" class="idref" href="#h2:296"><span class="id" title="binder">h2</span></a>: <a class="idref" href="ITree.Extra.IForest.html#E2:291"><span class="id" title="variable">E2</span></a> <a class="idref" href="ITree.Basics.Basics.html#f7397da22bdab7f77b06c5d98764e7b9"><span class="id" title="notation">~&gt;</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#F:292"><span class="id" title="variable">F</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="C1:297" class="idref" href="#C1:297"><span class="id" title="binder">C1</span></a>: <a class="idref" href="ITree.Extra.IForest.html#handler_correct"><span class="id" title="definition">handler_correct</span></a> <a class="idref" href="ITree.Extra.IForest.html#h1_spec:293"><span class="id" title="variable">h1_spec</span></a> <a class="idref" href="ITree.Extra.IForest.html#h1:295"><span class="id" title="variable">h1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="C2:298" class="idref" href="#C2:298"><span class="id" title="binder">C2</span></a>: <a class="idref" href="ITree.Extra.IForest.html#handler_correct"><span class="id" title="definition">handler_correct</span></a> <a class="idref" href="ITree.Extra.IForest.html#h2_spec:294"><span class="id" title="variable">h2_spec</span></a> <a class="idref" href="ITree.Extra.IForest.html#h2:296"><span class="id" title="variable">h2</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.IForest.html#handler_correct"><span class="id" title="definition">handler_correct</span></a> (<a class="idref" href="ITree.Basics.CategoryOps.html#case_"><span class="id" title="definition">case_</span></a> <a class="idref" href="ITree.Extra.IForest.html#h1_spec:293"><span class="id" title="variable">h1_spec</span></a> <a class="idref" href="ITree.Extra.IForest.html#h2_spec:294"><span class="id" title="variable">h2_spec</span></a>) (<a class="idref" href="ITree.Basics.CategoryOps.html#case_"><span class="id" title="definition">case_</span></a> <a class="idref" href="ITree.Extra.IForest.html#h1:295"><span class="id" title="variable">h1</span></a> <a class="idref" href="ITree.Extra.IForest.html#h2:296"><span class="id" title="variable">h2</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span> <span class="id" title="var">F</span> <span class="id" title="var">h1_spec</span> <span class="id" title="var">h2_spec</span> <span class="id" title="var">h1</span> <span class="id" title="var">h2</span> <span class="id" title="var">C1</span> <span class="id" title="var">C2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.IForest.html#handler_correct"><span class="id" title="definition">handler_correct</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">T</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">C1</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">C2</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="iforest_compose" class="idref" href="#iforest_compose"><span class="id" title="definition">iforest_compose</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> {<a id="F:299" class="idref" href="#F:299"><span class="id" title="binder">F</span></a> <a id="G:300" class="idref" href="#G:300"><span class="id" title="binder">G</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span> } {<a id="T:301" class="idref" href="#T:301"><span class="id" title="binder">T</span></a> : <span class="id" title="keyword">Type</span>} (<a id="TT:302" class="idref" href="#TT:302"><span class="id" title="binder">TT</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> <a class="idref" href="ITree.Extra.IForest.html#T:301"><span class="id" title="variable">T</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="g_spec:303" class="idref" href="#g_spec:303"><span class="id" title="binder">g_spec</span></a> : <a class="idref" href="ITree.Extra.IForest.html#F:299"><span class="id" title="variable">F</span></a> <a class="idref" href="ITree.Basics.Basics.html#f7397da22bdab7f77b06c5d98764e7b9"><span class="id" title="notation">~&gt;</span></a> <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#G:300"><span class="id" title="variable">G</span></a>) (<a id="PF:304" class="idref" href="#PF:304"><span class="id" title="binder">PF</span></a>: <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#F:299"><span class="id" title="variable">F</span></a> <a class="idref" href="ITree.Extra.IForest.html#T:301"><span class="id" title="variable">T</span></a>) (<a id="g:305" class="idref" href="#g:305"><span class="id" title="binder">g</span></a>:<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#G:300"><span class="id" title="variable">G</span></a> <a class="idref" href="ITree.Extra.IForest.html#T:301"><span class="id" title="variable">T</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="f:306" class="idref" href="#f:306"><span class="id" title="binder">f</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#F:299"><span class="id" title="variable">F</span></a> <a class="idref" href="ITree.Extra.IForest.html#T:301"><span class="id" title="variable">T</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="ITree.Extra.IForest.html#PF:304"><span class="id" title="variable">PF</span></a> <a class="idref" href="ITree.Extra.IForest.html#f:306"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> (<a class="idref" href="ITree.Extra.IForest.html#interp_iforest"><span class="id" title="definition">interp_iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#g_spec:303"><span class="id" title="variable">g_spec</span></a>) <a class="idref" href="ITree.Extra.IForest.html#T:301"><span class="id" title="variable">T</span></a> <a class="idref" href="ITree.Extra.IForest.html#TT:302"><span class="id" title="variable">TT</span></a> <a class="idref" href="ITree.Extra.IForest.html#f:306"><span class="id" title="variable">f</span></a> <a class="idref" href="ITree.Extra.IForest.html#g:305"><span class="id" title="variable">g</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="handler_correct_iforest" class="idref" href="#handler_correct_iforest"><span class="id" title="definition">handler_correct_iforest</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="E:307" class="idref" href="#E:307"><span class="id" title="binder">E</span></a> <a id="F:308" class="idref" href="#F:308"><span class="id" title="binder">F</span></a> <a id="G:309" class="idref" href="#G:309"><span class="id" title="binder">G</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="h_spec:310" class="idref" href="#h_spec:310"><span class="id" title="binder">h_spec</span></a>: <a class="idref" href="ITree.Extra.IForest.html#E:307"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Basics.Basics.html#f7397da22bdab7f77b06c5d98764e7b9"><span class="id" title="notation">~&gt;</span></a> <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#F:308"><span class="id" title="variable">F</span></a>) (<a id="h:311" class="idref" href="#h:311"><span class="id" title="binder">h</span></a>: <a class="idref" href="ITree.Extra.IForest.html#E:307"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Basics.Basics.html#f7397da22bdab7f77b06c5d98764e7b9"><span class="id" title="notation">~&gt;</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#F:308"><span class="id" title="variable">F</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="g_spec:312" class="idref" href="#g_spec:312"><span class="id" title="binder">g_spec</span></a>: <a class="idref" href="ITree.Extra.IForest.html#F:308"><span class="id" title="variable">F</span></a> <a class="idref" href="ITree.Basics.Basics.html#f7397da22bdab7f77b06c5d98764e7b9"><span class="id" title="notation">~&gt;</span></a> <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#G:309"><span class="id" title="variable">G</span></a>) (<a id="g:313" class="idref" href="#g:313"><span class="id" title="binder">g</span></a>: <a class="idref" href="ITree.Extra.IForest.html#F:308"><span class="id" title="variable">F</span></a> <a class="idref" href="ITree.Basics.Basics.html#f7397da22bdab7f77b06c5d98764e7b9"><span class="id" title="notation">~&gt;</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#G:309"><span class="id" title="variable">G</span></a>)<br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <a id="T:314" class="idref" href="#T:314"><span class="id" title="binder">T</span></a> <a id="TT:315" class="idref" href="#TT:315"><span class="id" title="binder">TT</span></a> <a id="e:316" class="idref" href="#e:316"><span class="id" title="binder">e</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ITree.Extra.IForest.html#iforest_compose"><span class="id" title="definition">iforest_compose</span></a> <a class="idref" href="ITree.Extra.IForest.html#TT:315"><span class="id" title="variable">TT</span></a> <a class="idref" href="ITree.Extra.IForest.html#g_spec:312"><span class="id" title="variable">g_spec</span></a> (<a class="idref" href="ITree.Extra.IForest.html#h_spec:310"><span class="id" title="variable">h_spec</span></a> <a class="idref" href="ITree.Extra.IForest.html#T:314"><span class="id" title="variable">T</span></a> <a class="idref" href="ITree.Extra.IForest.html#e:316"><span class="id" title="variable">e</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ITree.Interp.Interp.html#interp"><span class="id" title="definition">interp</span></a> <a class="idref" href="ITree.Extra.IForest.html#g:313"><span class="id" title="variable">g</span></a> (<a class="idref" href="ITree.Extra.IForest.html#h:311"><span class="id" title="variable">h</span></a> <a class="idref" href="ITree.Extra.IForest.html#T:314"><span class="id" title="variable">T</span></a> <a class="idref" href="ITree.Extra.IForest.html#e:316"><span class="id" title="variable">e</span></a>))).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="singletonT" class="idref" href="#singletonT"><span class="id" title="definition">singletonT</span></a> {<a id="E:317" class="idref" href="#E:317"><span class="id" title="binder">E</span></a>}: <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:317"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Basics.Basics.html#f7397da22bdab7f77b06c5d98764e7b9"><span class="id" title="notation">~&gt;</span></a> <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:317"><span class="id" title="variable">E</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="R:318" class="idref" href="#R:318"><span class="id" title="binder">R</span></a> <a id="t:319" class="idref" href="#t:319"><span class="id" title="binder">t</span></a> <a id="t':320" class="idref" href="#t':320"><span class="id" title="binder">t'</span></a> ⇒ <a class="idref" href="ITree.Extra.IForest.html#t':320"><span class="id" title="variable">t'</span></a> <a class="idref" href="ITree.Basics.Monad.html#20d7a3de27e35f38017a31a5b4c235e8"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Extra.IForest.html#t:319"><span class="id" title="variable">t</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="iter_cont" class="idref" href="#iter_cont"><span class="id" title="definition">iter_cont</span></a> {<a id="I:321" class="idref" href="#I:321"><span class="id" title="binder">I</span></a> <a id="E:322" class="idref" href="#E:322"><span class="id" title="binder">E</span></a> <a id="R:323" class="idref" href="#R:323"><span class="id" title="binder">R</span></a>} (<a id="step':324" class="idref" href="#step':324"><span class="id" title="binder">step'</span></a> : <a class="idref" href="ITree.Extra.IForest.html#I:321"><span class="id" title="variable">I</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:322"><span class="id" title="variable">E</span></a> (<a class="idref" href="ITree.Extra.IForest.html#I:321"><span class="id" title="variable">I</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">+</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:323"><span class="id" title="variable">R</span></a>)) :<br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Extra.IForest.html#I:321"><span class="id" title="variable">I</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">+</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:323"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:322"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:323"><span class="id" title="variable">R</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="lr:325" class="idref" href="#lr:325"><span class="id" title="binder">lr</span></a> ⇒ <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.on_left"><span class="id" title="abbreviation">ITree.on_left</span></a> <a class="idref" href="ITree.Extra.IForest.html#lr:325"><span class="id" title="variable">lr</span></a> <a id="l:327" class="idref" href="#l:327"><span class="id" title="binder">l</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Tau"><span class="id" title="abbreviation">Tau</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.iter"><span class="id" title="definition">ITree.iter</span></a> <a class="idref" href="ITree.Extra.IForest.html#step':324"><span class="id" title="variable">step'</span></a> <a class="idref" href="ITree.Extra.IForest.html#l:326"><span class="id" title="variable">l</span></a>)).<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="var">Polymorphic</span> <span class="id" title="keyword">Instance</span> <a id="MonadIter_iforest" class="idref" href="#MonadIter_iforest"><span class="id" title="instance">MonadIter_iforest</span></a> {<a id="E:328" class="idref" href="#E:328"><span class="id" title="binder">E</span></a>} : <a class="idref" href="ITree.Basics.Basics.html#MonadIter"><span class="id" title="class">MonadIter</span></a> (<a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:328"><span class="id" title="variable">E</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="R:329" class="idref" href="#R:329"><span class="id" title="binder">R</span></a> <a id="I:330" class="idref" href="#I:330"><span class="id" title="binder">I</span></a> (<a id="step:331" class="idref" href="#step:331"><span class="id" title="binder">step</span></a> : <a class="idref" href="ITree.Extra.IForest.html#I:330"><span class="id" title="variable">I</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <span class="id" title="var">E</span> (<a class="idref" href="ITree.Extra.IForest.html#I:330"><span class="id" title="variable">I</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">+</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:329"><span class="id" title="variable">R</span></a>)) <a id="i:332" class="idref" href="#i:332"><span class="id" title="binder">i</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<a id="r:333" class="idref" href="#r:333"><span class="id" title="binder">r</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <span class="id" title="var">E</span> <a class="idref" href="ITree.Extra.IForest.html#R:329"><span class="id" title="variable">R</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="step':334" class="idref" href="#step':334"><span class="id" title="binder">step'</span></a> : <a class="idref" href="ITree.Extra.IForest.html#I:330"><span class="id" title="variable">I</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <span class="id" title="var">E</span> (<a class="idref" href="ITree.Extra.IForest.html#I:330"><span class="id" title="variable">I</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">+</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:329"><span class="id" title="variable">R</span></a>)%<span class="id" title="keyword">type</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> (<a class="idref" href="ITree.Extra.IForest.html#step':334"><span class="id" title="variable">step'</span></a> <a class="idref" href="ITree.Extra.IForest.html#i:332"><span class="id" title="variable">i</span></a>) (@<a class="idref" href="ITree.Extra.IForest.html#iter_cont"><span class="id" title="definition">iter_cont</span></a> <a class="idref" href="ITree.Extra.IForest.html#I:330"><span class="id" title="variable">I</span></a> <span class="id" title="var">E</span> <a class="idref" href="ITree.Extra.IForest.html#R:329"><span class="id" title="variable">R</span></a> <a class="idref" href="ITree.Extra.IForest.html#step':334"><span class="id" title="variable">step'</span></a>) <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Extra.IForest.html#r:333"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="j:335" class="idref" href="#j:335"><span class="id" title="binder">j</span></a>, <a class="idref" href="ITree.Extra.IForest.html#step:331"><span class="id" title="variable">step</span></a> <a class="idref" href="ITree.Extra.IForest.html#j:335"><span class="id" title="variable">j</span></a> (<a class="idref" href="ITree.Extra.IForest.html#step':334"><span class="id" title="variable">step'</span></a> <a class="idref" href="ITree.Extra.IForest.html#j:335"><span class="id" title="variable">j</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eqit_bind_Returns_inv" class="idref" href="#eqit_bind_Returns_inv"><span class="id" title="lemma">eqit_bind_Returns_inv</span></a> {<a id="E:336" class="idref" href="#E:336"><span class="id" title="binder">E</span></a>} {<a id="R:337" class="idref" href="#R:337"><span class="id" title="binder">R</span></a> <a id="S:338" class="idref" href="#S:338"><span class="id" title="binder">S</span></a> <a id="T:339" class="idref" href="#T:339"><span class="id" title="binder">T</span></a>} (<a id="RS:340" class="idref" href="#RS:340"><span class="id" title="binder">RS</span></a> : <a class="idref" href="ITree.Extra.IForest.html#R:337"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.IForest.html#S:338"><span class="id" title="variable">S</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="t:341" class="idref" href="#t:341"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:336"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#T:339"><span class="id" title="variable">T</span></a>)  (<a id="k1:342" class="idref" href="#k1:342"><span class="id" title="binder">k1</span></a>: <a class="idref" href="ITree.Extra.IForest.html#T:339"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:336"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:337"><span class="id" title="variable">R</span></a>) (<a id="k2:343" class="idref" href="#k2:343"><span class="id" title="binder">k2</span></a> : <a class="idref" href="ITree.Extra.IForest.html#T:339"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:336"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#S:338"><span class="id" title="variable">S</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Eq.Eqit.html#eutt"><span class="id" title="definition">eutt</span></a> <a class="idref" href="ITree.Extra.IForest.html#RS:340"><span class="id" title="variable">RS</span></a>  (<a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> <a class="idref" href="ITree.Extra.IForest.html#t:341"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Extra.IForest.html#k1:342"><span class="id" title="variable">k1</span></a>) (<a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> <a class="idref" href="ITree.Extra.IForest.html#t:341"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Extra.IForest.html#k2:343"><span class="id" title="variable">k2</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="r:344" class="idref" href="#r:344"><span class="id" title="binder">r</span></a>, <a class="idref" href="ITree.Extra.IForest.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.Extra.IForest.html#r:344"><span class="id" title="variable">r</span></a> <a class="idref" href="ITree.Extra.IForest.html#t:341"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Eq.Eqit.html#eutt"><span class="id" title="definition">eutt</span></a> <a class="idref" href="ITree.Extra.IForest.html#RS:340"><span class="id" title="variable">RS</span></a> (<a class="idref" href="ITree.Extra.IForest.html#k1:342"><span class="id" title="variable">k1</span></a> <a class="idref" href="ITree.Extra.IForest.html#r:344"><span class="id" title="variable">r</span></a>) (<a class="idref" href="ITree.Extra.IForest.html#k2:343"><span class="id" title="variable">k2</span></a> <a class="idref" href="ITree.Extra.IForest.html#r:344"><span class="id" title="variable">r</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">EQIT</span> <span class="id" title="var">r</span> <span class="id" title="var">HRET</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">R</span> <span class="id" title="var">S</span> <span class="id" title="var">RS</span> <span class="id" title="var">k1</span> <span class="id" title="var">k2</span> <span class="id" title="var">EQIT</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">HRET</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQIT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_l"><span class="id" title="lemma">Eqit.bind_ret_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">EQIT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQIT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHHRET</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQIT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_vis"><span class="id" title="lemma">Eqit.bind_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">EQIT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQIT</span>. <span class="id" title="var">punfold</span> <span class="id" title="var">EQIT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">EQIT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.IForest.html#inj_pair2"><span class="id" title="lemma">inj_pair2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.IForest.html#inj_pair2"><span class="id" title="lemma">inj_pair2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.IForest.html#inj_pair2"><span class="id" title="lemma">inj_pair2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.IForest.html#inj_pair2"><span class="id" title="lemma">inj_pair2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHHRET</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">REL</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">REL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pclearbot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">REL</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="ReturnsBind" class="idref" href="#ReturnsBind"><span class="id" title="section">ReturnsBind</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="E:345" class="idref" href="#E:345"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>} {<a id="R:346" class="idref" href="#R:346"><span class="id" title="binder">R</span></a> <a id="S:347" class="idref" href="#S:347"><span class="id" title="binder">S</span></a> : <span class="id" title="keyword">Type</span>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITreeNotations"><span class="id" title="module">ITreeNotations</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">itree</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a id="eqit_Returns_bind_clo" class="idref" href="#eqit_Returns_bind_clo"><span class="id" title="inductive">eqit_Returns_bind_clo</span></a> <a id="b1:348" class="idref" href="#b1:348"><span class="id" title="binder">b1</span></a> <a id="b2:349" class="idref" href="#b2:349"><span class="id" title="binder">b2</span></a> (<a id="r:350" class="idref" href="#r:350"><span class="id" title="binder">r</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#ReturnsBind.E"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#ReturnsBind.R"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#ReturnsBind.E"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#ReturnsBind.S"><span class="id" title="variable">S</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#ReturnsBind.E"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#ReturnsBind.R"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#ReturnsBind.E"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#ReturnsBind.S"><span class="id" title="variable">S</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a id="pbc_intro_h" class="idref" href="#pbc_intro_h"><span class="id" title="constructor">pbc_intro_h</span></a> <a id="U:353" class="idref" href="#U:353"><span class="id" title="binder">U</span></a> (<a id="t1:354" class="idref" href="#t1:354"><span class="id" title="binder">t1</span></a> <a id="t2:355" class="idref" href="#t2:355"><span class="id" title="binder">t2</span></a>: <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#ReturnsBind.E"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#U:353"><span class="id" title="variable">U</span></a>) (<a id="k1:356" class="idref" href="#k1:356"><span class="id" title="binder">k1</span></a> : <a class="idref" href="ITree.Extra.IForest.html#U:353"><span class="id" title="variable">U</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#ReturnsBind.E"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#ReturnsBind.R"><span class="id" title="variable">R</span></a>) (<a id="k2:357" class="idref" href="#k2:357"><span class="id" title="binder">k2</span></a> : <a class="idref" href="ITree.Extra.IForest.html#U:353"><span class="id" title="variable">U</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#ReturnsBind.E"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#ReturnsBind.S"><span class="id" title="variable">S</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="EQV:358" class="idref" href="#EQV:358"><span class="id" title="binder">EQV</span></a>: <a class="idref" href="ITree.Eq.Eqit.html#eqit"><span class="id" title="definition">eqit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="ITree.Extra.IForest.html#b1:348"><span class="id" title="variable">b1</span></a> <a class="idref" href="ITree.Extra.IForest.html#b2:349"><span class="id" title="variable">b2</span></a> <a class="idref" href="ITree.Extra.IForest.html#t1:354"><span class="id" title="variable">t1</span></a> <a class="idref" href="ITree.Extra.IForest.html#t2:355"><span class="id" title="variable">t2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="REL:360" class="idref" href="#REL:360"><span class="id" title="binder">REL</span></a>: <span class="id" title="keyword">∀</span> <a id="u:359" class="idref" href="#u:359"><span class="id" title="binder">u</span></a>, <a class="idref" href="ITree.Extra.IForest.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.Extra.IForest.html#u:359"><span class="id" title="variable">u</span></a> <a class="idref" href="ITree.Extra.IForest.html#t1:354"><span class="id" title="variable">t1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.IForest.html#r:350"><span class="id" title="variable">r</span></a> (<a class="idref" href="ITree.Extra.IForest.html#k1:356"><span class="id" title="variable">k1</span></a> <a class="idref" href="ITree.Extra.IForest.html#u:359"><span class="id" title="variable">u</span></a>) (<a class="idref" href="ITree.Extra.IForest.html#k2:357"><span class="id" title="variable">k2</span></a> <a class="idref" href="ITree.Extra.IForest.html#u:359"><span class="id" title="variable">u</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="ITree.Extra.IForest.html#eqit_Returns_bind_clo:351"><span class="id" title="inductive">eqit_Returns_bind_clo</span></a> <a class="idref" href="ITree.Extra.IForest.html#b1:348"><span class="id" title="variable">b1</span></a> <a class="idref" href="ITree.Extra.IForest.html#b2:349"><span class="id" title="variable">b2</span></a> <a class="idref" href="ITree.Extra.IForest.html#r:350"><span class="id" title="variable">r</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> <a class="idref" href="ITree.Extra.IForest.html#t1:354"><span class="id" title="variable">t1</span></a> <a class="idref" href="ITree.Extra.IForest.html#k1:356"><span class="id" title="variable">k1</span></a>) (<a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> <a class="idref" href="ITree.Extra.IForest.html#t2:355"><span class="id" title="variable">t2</span></a> <a class="idref" href="ITree.Extra.IForest.html#k2:357"><span class="id" title="variable">k2</span></a>)<br/>
&nbsp;&nbsp;.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hint Constructors</span> <a class="idref" href="ITree.Extra.IForest.html#eqit_Returns_bind_clo"><span class="id" title="inductive">eqit_Returns_bind_clo</span></a>: <span class="id" title="var">itree</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="eqit_Returns_clo_bind" class="idref" href="#eqit_Returns_clo_bind"><span class="id" title="lemma">eqit_Returns_clo_bind</span></a>  (<a id="RS:361" class="idref" href="#RS:361"><span class="id" title="binder">RS</span></a> : <a class="idref" href="ITree.Extra.IForest.html#ReturnsBind.R"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.IForest.html#ReturnsBind.S"><span class="id" title="variable">S</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>) <a id="b1:362" class="idref" href="#b1:362"><span class="id" title="binder">b1</span></a> <a id="b2:363" class="idref" href="#b2:363"><span class="id" title="binder">b2</span></a> <a id="vclo:364" class="idref" href="#vclo:364"><span class="id" title="binder">vclo</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="MON:365" class="idref" href="#MON:365"><span class="id" title="binder">MON</span></a>: <span class="id" title="definition">monotone2</span> <a class="idref" href="ITree.Extra.IForest.html#vclo:364"><span class="id" title="variable">vclo</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="CMP:366" class="idref" href="#CMP:366"><span class="id" title="binder">CMP</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Program.Basics.html#compose"><span class="id" title="definition">compose</span></a> (<a class="idref" href="ITree.Eq.Eqit.html#eqitC"><span class="id" title="definition">eqitC</span></a> <a class="idref" href="ITree.Extra.IForest.html#RS:361"><span class="id" title="variable">RS</span></a> <a class="idref" href="ITree.Extra.IForest.html#b1:362"><span class="id" title="variable">b1</span></a> <a class="idref" href="ITree.Extra.IForest.html#b2:363"><span class="id" title="variable">b2</span></a>) <a class="idref" href="ITree.Extra.IForest.html#vclo:364"><span class="id" title="variable">vclo</span></a> <span class="id" title="notation">&lt;3=</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Program.Basics.html#compose"><span class="id" title="definition">compose</span></a> <a class="idref" href="ITree.Extra.IForest.html#vclo:364"><span class="id" title="variable">vclo</span></a> (<a class="idref" href="ITree.Eq.Eqit.html#eqitC"><span class="id" title="definition">eqitC</span></a> <a class="idref" href="ITree.Extra.IForest.html#RS:361"><span class="id" title="variable">RS</span></a> <a class="idref" href="ITree.Extra.IForest.html#b1:362"><span class="id" title="variable">b1</span></a> <a class="idref" href="ITree.Extra.IForest.html#b2:363"><span class="id" title="variable">b2</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="ID:367" class="idref" href="#ID:367"><span class="id" title="binder">ID</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <span class="id" title="notation">&lt;3=</span> <a class="idref" href="ITree.Extra.IForest.html#vclo:364"><span class="id" title="variable">vclo</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.IForest.html#eqit_Returns_bind_clo"><span class="id" title="inductive">eqit_Returns_bind_clo</span></a> <a class="idref" href="ITree.Extra.IForest.html#b1:362"><span class="id" title="variable">b1</span></a> <a class="idref" href="ITree.Extra.IForest.html#b2:363"><span class="id" title="variable">b2</span></a> <span class="id" title="notation">&lt;3=</span> <span class="id" title="definition">gupaco2</span> (<a class="idref" href="ITree.Eq.Eqit.html#eqit_"><span class="id" title="definition">eqit_</span></a> <a class="idref" href="ITree.Extra.IForest.html#RS:361"><span class="id" title="variable">RS</span></a> <a class="idref" href="ITree.Extra.IForest.html#b1:362"><span class="id" title="variable">b1</span></a> <a class="idref" href="ITree.Extra.IForest.html#b2:363"><span class="id" title="variable">b2</span></a> <a class="idref" href="ITree.Extra.IForest.html#vclo:364"><span class="id" title="variable">vclo</span></a>) (<a class="idref" href="ITree.Eq.Eqit.html#eqitC"><span class="id" title="definition">eqitC</span></a> <a class="idref" href="ITree.Extra.IForest.html#RS:361"><span class="id" title="variable">RS</span></a> <a class="idref" href="ITree.Extra.IForest.html#b1:362"><span class="id" title="variable">b1</span></a> <a class="idref" href="ITree.Extra.IForest.html#b2:363"><span class="id" title="variable">b2</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">gcofix</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">PR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">guclo</span> <a class="idref" href="ITree.Eq.Eqit.html#eqit_clo_trans"><span class="id" title="lemma">eqit_clo_trans</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="var">auto_ctrans_eq</span>; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">rewrite</span> (<a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a> (<a id="x:373" class="idref" href="#x:373"><span class="id" title="binder">x</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#0959d6531a3c2d5ddb2177e5cf7c15a8"><span class="id" title="notation">&lt;-</span></a> <span class="id" title="var">_</span><a class="idref" href="ITree.Core.ITreeDefinition.html#0959d6531a3c2d5ddb2177e5cf7c15a8"><span class="id" title="notation">;;</span></a> <span class="id" title="var">_</span> <a class="idref" href="ITree.Extra.IForest.html#x:368"><span class="id" title="variable">x</span></a>)), <a class="idref" href="ITree.Eq.Eqit.html#unfold_bind"><span class="id" title="lemma">unfold_bind</span></a>; <span class="id" title="tactic">reflexivity</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">EQV</span>. <span class="id" title="var">unfold_eqit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">genobs</span> <span class="id" title="var">t1</span> <span class="id" title="var">ot1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">genobs</span> <span class="id" title="var">t2</span> <span class="id" title="var">ot2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">hinduction</span> <span class="id" title="var">EQV</span> <span class="id" title="keyword">before</span> <span class="id" title="var">CIH</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">pclearbot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">guclo</span> <a class="idref" href="ITree.Eq.Eqit.html#eqit_clo_trans"><span class="id" title="lemma">eqit_clo_trans</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="var">auto_ctrans_eq</span>; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">rewrite</span> &lt;- !<a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a>; <span class="id" title="tactic">reflexivity</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">gbase</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">REL0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a>, &lt;- <span class="id" title="var">Heqot1</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">gstep</span>. <span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">gbase</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">u</span> <span class="id" title="var">HR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">REL0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a>,  &lt;- <span class="id" title="var">Heqot1</span>. <span class="id" title="tactic">econstructor</span> 2. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">gstep</span>. <span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">ID</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">gbase</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">REL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? <span class="id" title="var">HR</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">REL0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a>, &lt;- <span class="id" title="var">Heqot1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span> 3; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">b1</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">guclo</span> <a class="idref" href="ITree.Eq.Eqit.html#eqit_clo_trans"><span class="id" title="lemma">eqit_clo_trans</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3:{ <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHEQV</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? <span class="id" title="var">HR</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">REL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a>, &lt;- <span class="id" title="var">Heqot1</span>; <span class="id" title="tactic">econstructor</span> 2. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3,4:<span class="id" title="var">auto_ctrans_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Eq.Eqit.html#eqit_Tau_l"><span class="id" title="lemma">eqit_Tau_l</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#unfold_bind"><span class="id" title="lemma">unfold_bind</span></a>, &lt;-<a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">b2</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">guclo</span> <a class="idref" href="ITree.Eq.Eqit.html#eqit_clo_trans"><span class="id" title="lemma">eqit_clo_trans</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="var">auto_ctrans_eq</span>; <span class="id" title="var">cycle</span> -1; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Eq.Eqit.html#eqit_Tau_l"><span class="id" title="lemma">eqit_Tau_l</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#unfold_bind"><span class="id" title="lemma">unfold_bind</span></a>, &lt;-<a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="ITree.Extra.IForest.html#ReturnsBind"><span class="id" title="section">ReturnsBind</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eqit_Returns_bind'" class="idref" href="#eqit_Returns_bind'"><span class="id" title="lemma">eqit_Returns_bind'</span></a> {<a id="E:374" class="idref" href="#E:374"><span class="id" title="binder">E</span></a>} {<a id="R:375" class="idref" href="#R:375"><span class="id" title="binder">R</span></a>} {<a id="T:376" class="idref" href="#T:376"><span class="id" title="binder">T</span></a>} <a id="b1:377" class="idref" href="#b1:377"><span class="id" title="binder">b1</span></a> <a id="b2:378" class="idref" href="#b2:378"><span class="id" title="binder">b2</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="t1:379" class="idref" href="#t1:379"><span class="id" title="binder">t1</span></a> <a id="t2:380" class="idref" href="#t2:380"><span class="id" title="binder">t2</span></a>: <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:374"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#T:376"><span class="id" title="variable">T</span></a>) (<a id="k1:381" class="idref" href="#k1:381"><span class="id" title="binder">k1</span></a> <a id="k2:382" class="idref" href="#k2:382"><span class="id" title="binder">k2</span></a>: <a class="idref" href="ITree.Extra.IForest.html#T:376"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:374"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:375"><span class="id" title="variable">R</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Eq.Eqit.html#eqit"><span class="id" title="definition">eqit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="ITree.Extra.IForest.html#b1:377"><span class="id" title="variable">b1</span></a> <a class="idref" href="ITree.Extra.IForest.html#b2:378"><span class="id" title="variable">b2</span></a> <a class="idref" href="ITree.Extra.IForest.html#t1:379"><span class="id" title="variable">t1</span></a> <a class="idref" href="ITree.Extra.IForest.html#t2:380"><span class="id" title="variable">t2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="r:383" class="idref" href="#r:383"><span class="id" title="binder">r</span></a>, <a class="idref" href="ITree.Extra.IForest.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.Extra.IForest.html#r:383"><span class="id" title="variable">r</span></a> <a class="idref" href="ITree.Extra.IForest.html#t1:379"><span class="id" title="variable">t1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Eq.Eqit.html#eqit"><span class="id" title="definition">eqit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="ITree.Extra.IForest.html#b1:377"><span class="id" title="variable">b1</span></a> <a class="idref" href="ITree.Extra.IForest.html#b2:378"><span class="id" title="variable">b2</span></a> (<a class="idref" href="ITree.Extra.IForest.html#k1:381"><span class="id" title="variable">k1</span></a> <a class="idref" href="ITree.Extra.IForest.html#r:383"><span class="id" title="variable">r</span></a>) (<a class="idref" href="ITree.Extra.IForest.html#k2:382"><span class="id" title="variable">k2</span></a> <a class="idref" href="ITree.Extra.IForest.html#r:383"><span class="id" title="variable">r</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;@<a class="idref" href="ITree.Eq.Eqit.html#eqit"><span class="id" title="definition">eqit</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:374"><span class="id" title="variable">E</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="ITree.Extra.IForest.html#b1:377"><span class="id" title="variable">b1</span></a> <a class="idref" href="ITree.Extra.IForest.html#b2:378"><span class="id" title="variable">b2</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> <a class="idref" href="ITree.Extra.IForest.html#t1:379"><span class="id" title="variable">t1</span></a> <a class="idref" href="ITree.Extra.IForest.html#k1:381"><span class="id" title="variable">k1</span></a>) (<a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> <a class="idref" href="ITree.Extra.IForest.html#t2:380"><span class="id" title="variable">t2</span></a> <a class="idref" href="ITree.Extra.IForest.html#k2:382"><span class="id" title="variable">k2</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">ginit</span>. <span class="id" title="var">guclo</span> (@<a class="idref" href="ITree.Extra.IForest.html#eqit_Returns_clo_bind"><span class="id" title="lemma">eqit_Returns_clo_bind</span></a> <span class="id" title="var">E</span> <span class="id" title="var">R</span> <span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>). <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Eq.Eqit.html#eqit"><span class="id" title="definition">eqit</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">paco</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eqit_Returns_bind''" class="idref" href="#eqit_Returns_bind''"><span class="id" title="lemma">eqit_Returns_bind''</span></a> {<a id="E:384" class="idref" href="#E:384"><span class="id" title="binder">E</span></a>} {<a id="R:385" class="idref" href="#R:385"><span class="id" title="binder">R</span></a> <a id="S:386" class="idref" href="#S:386"><span class="id" title="binder">S</span></a>} {<a id="T:387" class="idref" href="#T:387"><span class="id" title="binder">T</span></a>} (<a id="RS:388" class="idref" href="#RS:388"><span class="id" title="binder">RS</span></a> : <a class="idref" href="ITree.Extra.IForest.html#R:385"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.IForest.html#S:386"><span class="id" title="variable">S</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>) <a id="b1:389" class="idref" href="#b1:389"><span class="id" title="binder">b1</span></a> <a id="b2:390" class="idref" href="#b2:390"><span class="id" title="binder">b2</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="t1:391" class="idref" href="#t1:391"><span class="id" title="binder">t1</span></a> <a id="t2:392" class="idref" href="#t2:392"><span class="id" title="binder">t2</span></a>: <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:384"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#T:387"><span class="id" title="variable">T</span></a>) (<a id="k1:393" class="idref" href="#k1:393"><span class="id" title="binder">k1</span></a>: <a class="idref" href="ITree.Extra.IForest.html#T:387"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:384"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:385"><span class="id" title="variable">R</span></a>) (<a id="k2:394" class="idref" href="#k2:394"><span class="id" title="binder">k2</span></a> : <a class="idref" href="ITree.Extra.IForest.html#T:387"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:384"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#S:386"><span class="id" title="variable">S</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Eq.Eqit.html#eqit"><span class="id" title="definition">eqit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="ITree.Extra.IForest.html#b1:389"><span class="id" title="variable">b1</span></a> <a class="idref" href="ITree.Extra.IForest.html#b2:390"><span class="id" title="variable">b2</span></a> <a class="idref" href="ITree.Extra.IForest.html#t1:391"><span class="id" title="variable">t1</span></a> <a class="idref" href="ITree.Extra.IForest.html#t2:392"><span class="id" title="variable">t2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="r:395" class="idref" href="#r:395"><span class="id" title="binder">r</span></a>, <a class="idref" href="ITree.Extra.IForest.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.Extra.IForest.html#r:395"><span class="id" title="variable">r</span></a> <a class="idref" href="ITree.Extra.IForest.html#t1:391"><span class="id" title="variable">t1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Eq.Eqit.html#eqit"><span class="id" title="definition">eqit</span></a> <a class="idref" href="ITree.Extra.IForest.html#RS:388"><span class="id" title="variable">RS</span></a> <a class="idref" href="ITree.Extra.IForest.html#b1:389"><span class="id" title="variable">b1</span></a> <a class="idref" href="ITree.Extra.IForest.html#b2:390"><span class="id" title="variable">b2</span></a> (<a class="idref" href="ITree.Extra.IForest.html#k1:393"><span class="id" title="variable">k1</span></a> <a class="idref" href="ITree.Extra.IForest.html#r:395"><span class="id" title="variable">r</span></a>) (<a class="idref" href="ITree.Extra.IForest.html#k2:394"><span class="id" title="variable">k2</span></a> <a class="idref" href="ITree.Extra.IForest.html#r:395"><span class="id" title="variable">r</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;@<a class="idref" href="ITree.Eq.Eqit.html#eqit"><span class="id" title="definition">eqit</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:384"><span class="id" title="variable">E</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="ITree.Extra.IForest.html#RS:388"><span class="id" title="variable">RS</span></a> <a class="idref" href="ITree.Extra.IForest.html#b1:389"><span class="id" title="variable">b1</span></a> <a class="idref" href="ITree.Extra.IForest.html#b2:390"><span class="id" title="variable">b2</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> <a class="idref" href="ITree.Extra.IForest.html#t1:391"><span class="id" title="variable">t1</span></a> <a class="idref" href="ITree.Extra.IForest.html#k1:393"><span class="id" title="variable">k1</span></a>) (<a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> <a class="idref" href="ITree.Extra.IForest.html#t2:392"><span class="id" title="variable">t2</span></a> <a class="idref" href="ITree.Extra.IForest.html#k2:394"><span class="id" title="variable">k2</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">ginit</span>. <span class="id" title="var">guclo</span> (@<a class="idref" href="ITree.Extra.IForest.html#eqit_Returns_clo_bind"><span class="id" title="lemma">eqit_Returns_clo_bind</span></a> <span class="id" title="var">E</span> <span class="id" title="var">R</span> <span class="id" title="var">S</span> <span class="id" title="var">RS</span>). <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Eq.Eqit.html#eqit"><span class="id" title="definition">eqit</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">paco</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eutt_ret_vis_abs" class="idref" href="#eutt_ret_vis_abs"><span class="id" title="lemma">eutt_ret_vis_abs</span></a>: <span class="id" title="keyword">∀</span> {<a id="X:396" class="idref" href="#X:396"><span class="id" title="binder">X</span></a> <a id="Y:397" class="idref" href="#Y:397"><span class="id" title="binder">Y</span></a> <a id="E:398" class="idref" href="#E:398"><span class="id" title="binder">E</span></a>} (<a id="x:399" class="idref" href="#x:399"><span class="id" title="binder">x</span></a>: <a class="idref" href="ITree.Extra.IForest.html#X:396"><span class="id" title="variable">X</span></a>) (<a id="e:400" class="idref" href="#e:400"><span class="id" title="binder">e</span></a>: <a class="idref" href="ITree.Extra.IForest.html#E:398"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#Y:397"><span class="id" title="variable">Y</span></a>) <a id="k:401" class="idref" href="#k:401"><span class="id" title="binder">k</span></a>, <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.Extra.IForest.html#x:399"><span class="id" title="variable">x</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <a class="idref" href="ITree.Extra.IForest.html#e:400"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.Extra.IForest.html#k:401"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">H</span>; <span class="id" title="var">inv</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Returns_Ret_" class="idref" href="#Returns_Ret_"><span class="id" title="lemma">Returns_Ret_</span></a> : <span class="id" title="keyword">∀</span> <a id="E:402" class="idref" href="#E:402"><span class="id" title="binder">E</span></a> <a id="A:403" class="idref" href="#A:403"><span class="id" title="binder">A</span></a> (<a id="a:404" class="idref" href="#a:404"><span class="id" title="binder">a</span></a> <a id="x:405" class="idref" href="#x:405"><span class="id" title="binder">x</span></a> : <a class="idref" href="ITree.Extra.IForest.html#A:403"><span class="id" title="variable">A</span></a>) (<a id="t:406" class="idref" href="#t:406"><span class="id" title="binder">t</span></a>:<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:402"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:403"><span class="id" title="variable">A</span></a>), <a class="idref" href="ITree.Extra.IForest.html#t:406"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.Extra.IForest.html#x:405"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.IForest.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:404"><span class="id" title="variable">a</span></a> <a class="idref" href="ITree.Extra.IForest.html#t:406"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.IForest.html#x:405"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:404"><span class="id" title="variable">a</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">A</span> <span class="id" title="var">a</span> <span class="id" title="var">x</span> <span class="id" title="var">t</span> <span class="id" title="var">eq</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">eq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Eq.Eqit.html#eqit_inv"><span class="id" title="lemma">eqit_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IHReturns</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHReturns</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">eq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#eqit_inv"><span class="id" title="lemma">eqit_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">contradiction</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Returns_Ret" class="idref" href="#Returns_Ret"><span class="id" title="lemma">Returns_Ret</span></a> :  <span class="id" title="keyword">∀</span> <a id="E:407" class="idref" href="#E:407"><span class="id" title="binder">E</span></a> <a id="A:408" class="idref" href="#A:408"><span class="id" title="binder">A</span></a> (<a id="a:409" class="idref" href="#a:409"><span class="id" title="binder">a</span></a> <a id="x:410" class="idref" href="#x:410"><span class="id" title="binder">x</span></a> : <a class="idref" href="ITree.Extra.IForest.html#A:408"><span class="id" title="variable">A</span></a>), <a class="idref" href="ITree.Extra.IForest.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:409"><span class="id" title="variable">a</span></a> ((<a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.Extra.IForest.html#x:410"><span class="id" title="variable">x</span></a>) : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:407"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:408"><span class="id" title="variable">A</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.IForest.html#x:410"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:409"><span class="id" title="variable">a</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.IForest.html#Returns_Ret_"><span class="id" title="lemma">Returns_Ret_</span></a>. 2: <span class="id" title="var">eassumption</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Returns_bind" class="idref" href="#Returns_bind"><span class="id" title="lemma">Returns_bind</span></a> : <span class="id" title="keyword">∀</span> <a id="E:411" class="idref" href="#E:411"><span class="id" title="binder">E</span></a> <a id="A:412" class="idref" href="#A:412"><span class="id" title="binder">A</span></a> <a id="B:413" class="idref" href="#B:413"><span class="id" title="binder">B</span></a> <a id="a:414" class="idref" href="#a:414"><span class="id" title="binder">a</span></a> <a id="b:415" class="idref" href="#b:415"><span class="id" title="binder">b</span></a> (<a id="ma:416" class="idref" href="#ma:416"><span class="id" title="binder">ma</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:411"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:412"><span class="id" title="variable">A</span></a>) (<a id="k:417" class="idref" href="#k:417"><span class="id" title="binder">k</span></a> : <a class="idref" href="ITree.Extra.IForest.html#A:412"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:411"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#B:413"><span class="id" title="variable">B</span></a>)<br/>
&nbsp;&nbsp;(<a id="HM:418" class="idref" href="#HM:418"><span class="id" title="binder">HM</span></a>: <a class="idref" href="ITree.Extra.IForest.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:414"><span class="id" title="variable">a</span></a> <a class="idref" href="ITree.Extra.IForest.html#ma:416"><span class="id" title="variable">ma</span></a>)<br/>
&nbsp;&nbsp;(<a id="HK:419" class="idref" href="#HK:419"><span class="id" title="binder">HK</span></a>: <a class="idref" href="ITree.Extra.IForest.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.Extra.IForest.html#b:415"><span class="id" title="variable">b</span></a> (<a class="idref" href="ITree.Extra.IForest.html#k:417"><span class="id" title="variable">k</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:414"><span class="id" title="variable">a</span></a>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.IForest.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.Extra.IForest.html#b:415"><span class="id" title="variable">b</span></a> (<span class="id" title="method">bind</span> <a class="idref" href="ITree.Extra.IForest.html#ma:416"><span class="id" title="variable">ma</span></a> <a class="idref" href="ITree.Extra.IForest.html#k:417"><span class="id" title="variable">k</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">B</span> <span class="id" title="var">b</span> <span class="id" title="var">k</span> <span class="id" title="var">HK</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">HM</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_l"><span class="id" title="lemma">Eqit.bind_ret_l</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_tau"><span class="id" title="lemma">Eqit.bind_tau</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHHM</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_vis"><span class="id" title="lemma">Eqit.bind_vis</span></a>. <span class="id" title="tactic">econstructor</span> 3. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHHM</span>. <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Returns_bind_inversion_" class="idref" href="#Returns_bind_inversion_"><span class="id" title="lemma">Returns_bind_inversion_</span></a> : <span class="id" title="keyword">∀</span> {<a id="E:420" class="idref" href="#E:420"><span class="id" title="binder">E</span></a> <a id="A:421" class="idref" href="#A:421"><span class="id" title="binder">A</span></a> <a id="B:422" class="idref" href="#B:422"><span class="id" title="binder">B</span></a>} (<a id="u:423" class="idref" href="#u:423"><span class="id" title="binder">u</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:420"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#B:422"><span class="id" title="variable">B</span></a>) (<a id="t:424" class="idref" href="#t:424"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:420"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:421"><span class="id" title="variable">A</span></a>) (<a id="k:425" class="idref" href="#k:425"><span class="id" title="binder">k</span></a> : <a class="idref" href="ITree.Extra.IForest.html#A:421"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:420"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#B:422"><span class="id" title="variable">B</span></a>) <a id="b:426" class="idref" href="#b:426"><span class="id" title="binder">b</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.IForest.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.Extra.IForest.html#b:426"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.IForest.html#u:423"><span class="id" title="variable">u</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.IForest.html#u:423"><span class="id" title="variable">u</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">(</span></a><span class="id" title="method">bind</span> <a class="idref" href="ITree.Extra.IForest.html#t:424"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Extra.IForest.html#k:425"><span class="id" title="variable">k</span></a><a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="a:427" class="idref" href="#a:427"><span class="id" title="binder">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="ITree.Extra.IForest.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:427"><span class="id" title="variable">a</span></a> <a class="idref" href="ITree.Extra.IForest.html#t:424"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="ITree.Extra.IForest.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.Extra.IForest.html#b:426"><span class="id" title="variable">b</span></a> (<a class="idref" href="ITree.Extra.IForest.html#k:425"><span class="id" title="variable">k</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:427"><span class="id" title="variable">a</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">u</span> <span class="id" title="var">t</span> <span class="id" title="var">k</span> <span class="id" title="var">b</span> <span class="id" title="var">HR</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">A</span> <span class="id" title="var">t</span> <span class="id" title="var">k</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">HR</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">eq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#eutt_inv_bind_ret"><span class="id" title="lemma">eutt_inv_bind_ret</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">a</span> &amp; <span class="id" title="var">HEQ</span> &amp; <span class="id" title="var">HK</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">HEQ</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">HK</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHHR</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">eq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#eutt_inv_bind_vis"><span class="id" title="lemma">eutt_inv_bind_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [(<span class="id" title="var">kx</span> &amp; <span class="id" title="var">HV</span> &amp; <span class="id" title="var">eq2</span>) | (<span class="id" title="var">a</span> &amp; <span class="id" title="var">HRA</span> &amp; <span class="id" title="var">KA</span>)].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">HV</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">eq2</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> &lt;- <span class="id" title="var">eq2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IHHR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHR</span> <span class="id" title="var">_</span> (<span class="id" title="var">kx</span> <span class="id" title="var">x</span>) <span class="id" title="var">k0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> (<span class="id" title="var">kx</span> <span class="id" title="var">x</span>) <span class="id" title="var">k0</span> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <span class="id" title="method">bind</span> (<span class="id" title="var">kx</span> <span class="id" title="var">x</span>) <span class="id" title="var">k0</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHHR</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">a</span> &amp; <span class="id" title="var">HRet</span> &amp; <span class="id" title="var">HK</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">econstructor</span> 3. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">HRet</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">∃</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">HRA</span>. <span class="id" title="tactic">constructor</span> 1. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHR</span> <span class="id" title="var">_</span> (<span class="id" title="method">ret</span> <span class="id" title="var">x</span>) <span class="id" title="var">k</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">k</span> <span class="id" title="var">x</span> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <span class="id" title="method">bind</span> (<span class="id" title="method">ret</span> <span class="id" title="var">x</span>) <span class="id" title="var">k</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Basics.Monad.html#bind_ret_l"><span class="id" title="method">Monad.bind_ret_l</span></a>. <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHHR</span>  <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">KA</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">x'</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">HX</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span> 3. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">HX</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Returns_bind_inversion" class="idref" href="#Returns_bind_inversion"><span class="id" title="lemma">Returns_bind_inversion</span></a> : <span class="id" title="keyword">∀</span> {<a id="E:428" class="idref" href="#E:428"><span class="id" title="binder">E</span></a> <a id="A:429" class="idref" href="#A:429"><span class="id" title="binder">A</span></a> <a id="B:430" class="idref" href="#B:430"><span class="id" title="binder">B</span></a>} (<a id="t:431" class="idref" href="#t:431"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:428"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:429"><span class="id" title="variable">A</span></a>) (<a id="k:432" class="idref" href="#k:432"><span class="id" title="binder">k</span></a> : <a class="idref" href="ITree.Extra.IForest.html#A:429"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:428"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#B:430"><span class="id" title="variable">B</span></a>) <a id="b:433" class="idref" href="#b:433"><span class="id" title="binder">b</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.IForest.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.Extra.IForest.html#b:433"><span class="id" title="variable">b</span></a> (<span class="id" title="method">bind</span> <a class="idref" href="ITree.Extra.IForest.html#t:431"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Extra.IForest.html#k:432"><span class="id" title="variable">k</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="a:434" class="idref" href="#a:434"><span class="id" title="binder">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="ITree.Extra.IForest.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:434"><span class="id" title="variable">a</span></a> <a class="idref" href="ITree.Extra.IForest.html#t:431"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="ITree.Extra.IForest.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.Extra.IForest.html#b:433"><span class="id" title="variable">b</span></a> (<a class="idref" href="ITree.Extra.IForest.html#k:432"><span class="id" title="variable">k</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:434"><span class="id" title="variable">a</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.IForest.html#Returns_bind_inversion_"><span class="id" title="lemma">Returns_bind_inversion_</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Returns_vis_inversion_" class="idref" href="#Returns_vis_inversion_"><span class="id" title="lemma">Returns_vis_inversion_</span></a> : <span class="id" title="keyword">∀</span> {<a id="E:435" class="idref" href="#E:435"><span class="id" title="binder">E</span></a> <a id="A:436" class="idref" href="#A:436"><span class="id" title="binder">A</span></a> <a id="B:437" class="idref" href="#B:437"><span class="id" title="binder">B</span></a>} (<a id="u:438" class="idref" href="#u:438"><span class="id" title="binder">u</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:435"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#B:437"><span class="id" title="variable">B</span></a>) (<a id="e:439" class="idref" href="#e:439"><span class="id" title="binder">e</span></a> : <a class="idref" href="ITree.Extra.IForest.html#E:435"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:436"><span class="id" title="variable">A</span></a>) (<a id="k:440" class="idref" href="#k:440"><span class="id" title="binder">k</span></a> : <a class="idref" href="ITree.Extra.IForest.html#A:436"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:435"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#B:437"><span class="id" title="variable">B</span></a>) <a id="b:441" class="idref" href="#b:441"><span class="id" title="binder">b</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.IForest.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.Extra.IForest.html#b:441"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.IForest.html#u:438"><span class="id" title="variable">u</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.IForest.html#u:438"><span class="id" title="variable">u</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <a class="idref" href="ITree.Extra.IForest.html#e:439"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.Extra.IForest.html#k:440"><span class="id" title="variable">k</span></a><a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="a:442" class="idref" href="#a:442"><span class="id" title="binder">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="ITree.Extra.IForest.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.Extra.IForest.html#b:441"><span class="id" title="variable">b</span></a> (<a class="idref" href="ITree.Extra.IForest.html#k:440"><span class="id" title="variable">k</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:442"><span class="id" title="variable">a</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">u</span> <span class="id" title="var">e</span> <span class="id" title="var">k</span> <span class="id" title="var">b</span> <span class="id" title="var">HR</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">A</span> <span class="id" title="var">e</span> <span class="id" title="var">k</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">HR</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#eqit_inv"><span class="id" title="lemma">eqit_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHHR</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">eq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.IForest.html#inj_pair2"><span class="id" title="lemma">inj_pair2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.IForest.html#inj_pair2"><span class="id" title="lemma">inj_pair2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.IForest.html#inj_pair2"><span class="id" title="lemma">inj_pair2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.IForest.html#inj_pair2"><span class="id" title="lemma">inj_pair2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <span class="id" title="var">e</span> <span class="id" title="var">k0</span> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <span class="id" title="var">e</span> <span class="id" title="var">k</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <a class="idref" href="ITree.Eq.Eqit.html#eqit_inv_Vis"><span class="id" title="lemma">eqit_inv_Vis</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> <span class="id" title="var">HX</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">HX</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">HX</span>. <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Returns_vis_inversion" class="idref" href="#Returns_vis_inversion"><span class="id" title="lemma">Returns_vis_inversion</span></a> : <span class="id" title="keyword">∀</span> {<a id="E:443" class="idref" href="#E:443"><span class="id" title="binder">E</span></a> <a id="A:444" class="idref" href="#A:444"><span class="id" title="binder">A</span></a> <a id="B:445" class="idref" href="#B:445"><span class="id" title="binder">B</span></a>} (<a id="e:446" class="idref" href="#e:446"><span class="id" title="binder">e</span></a> : <a class="idref" href="ITree.Extra.IForest.html#E:443"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:444"><span class="id" title="variable">A</span></a>) (<a id="k:447" class="idref" href="#k:447"><span class="id" title="binder">k</span></a> : <a class="idref" href="ITree.Extra.IForest.html#A:444"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:443"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#B:445"><span class="id" title="variable">B</span></a>) <a id="b:448" class="idref" href="#b:448"><span class="id" title="binder">b</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.IForest.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.Extra.IForest.html#b:448"><span class="id" title="variable">b</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <a class="idref" href="ITree.Extra.IForest.html#e:446"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.Extra.IForest.html#k:447"><span class="id" title="variable">k</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="a:449" class="idref" href="#a:449"><span class="id" title="binder">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="ITree.Extra.IForest.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.Extra.IForest.html#b:448"><span class="id" title="variable">b</span></a> (<a class="idref" href="ITree.Extra.IForest.html#k:447"><span class="id" title="variable">k</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:449"><span class="id" title="variable">a</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.IForest.html#Returns_vis_inversion_"><span class="id" title="lemma">Returns_vis_inversion_</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="divergent" class="idref" href="#divergent"><span class="id" title="definition">divergent</span></a> {<a id="E:450" class="idref" href="#E:450"><span class="id" title="binder">E</span></a> <a id="A:451" class="idref" href="#A:451"><span class="id" title="binder">A</span></a>} (<a id="ta:452" class="idref" href="#ta:452"><span class="id" title="binder">ta</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:450"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:451"><span class="id" title="variable">A</span></a>) := (<span class="id" title="keyword">∀</span> <a id="k:453" class="idref" href="#k:453"><span class="id" title="binder">k</span></a> , <a class="idref" href="ITree.Extra.IForest.html#ta:452"><span class="id" title="variable">ta</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <span class="id" title="method">bind</span> <a class="idref" href="ITree.Extra.IForest.html#ta:452"><span class="id" title="variable">ta</span></a> <a class="idref" href="ITree.Extra.IForest.html#k:453"><span class="id" title="variable">k</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Returns_divergent" class="idref" href="#Returns_divergent"><span class="id" title="lemma">Returns_divergent</span></a> {<a id="E:454" class="idref" href="#E:454"><span class="id" title="binder">E</span></a> <a id="A:455" class="idref" href="#A:455"><span class="id" title="binder">A</span></a>}:<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> (<a id="ta:456" class="idref" href="#ta:456"><span class="id" title="binder">ta</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:454"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:455"><span class="id" title="variable">A</span></a>), <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#not"><span class="id" title="definition">not</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="a:457" class="idref" href="#a:457"><span class="id" title="binder">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="ITree.Extra.IForest.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:457"><span class="id" title="variable">a</span></a> <a class="idref" href="ITree.Extra.IForest.html#ta:456"><span class="id" title="variable">ta</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.IForest.html#divergent"><span class="id" title="definition">divergent</span></a> <a class="idref" href="ITree.Extra.IForest.html#ta:456"><span class="id" title="variable">ta</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="method">bind</span>, <a class="idref" href="ITree.Core.ITreeDefinition.html#Monad_itree"><span class="id" title="instance">Monad_itree</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">ta</span>. <span class="id" title="var">pcofix</span> <span class="id" title="var">CIH</span>. <span class="id" title="var">cbn</span>. <span class="id" title="var">pstep</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Eq.Eqit.html#eqit_"><span class="id" title="definition">eqit_</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">remember</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">ta</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">ta</span> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <span class="id" title="var">r0</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">r0</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqi</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">ta</span> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Tau"><span class="id" title="abbreviation">Tau</span></a> <span class="id" title="var">t</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqi</span>. <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.IForest.html#ReturnsTau"><span class="id" title="constructor">ReturnsTau</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqi</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">ta</span> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <span class="id" title="var">e</span> <span class="id" title="var">k0</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqi</span>. <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.IForest.html#ReturnsVis"><span class="id" title="constructor">ReturnsVis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="divergent_cont" class="idref" href="#divergent_cont"><span class="id" title="definition">divergent_cont</span></a> {<a id="E:458" class="idref" href="#E:458"><span class="id" title="binder">E</span></a> <a id="A:459" class="idref" href="#A:459"><span class="id" title="binder">A</span></a> <a id="B:460" class="idref" href="#B:460"><span class="id" title="binder">B</span></a>} (<a id="ta:461" class="idref" href="#ta:461"><span class="id" title="binder">ta</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:458"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:459"><span class="id" title="variable">A</span></a>) :=<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> (<a id="k1:462" class="idref" href="#k1:462"><span class="id" title="binder">k1</span></a> : <a class="idref" href="ITree.Extra.IForest.html#A:459"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:458"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#B:460"><span class="id" title="variable">B</span></a>) (<a id="k2:463" class="idref" href="#k2:463"><span class="id" title="binder">k2</span></a> : <a class="idref" href="ITree.Extra.IForest.html#A:459"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:458"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#B:460"><span class="id" title="variable">B</span></a>) , <span class="id" title="method">bind</span> <a class="idref" href="ITree.Extra.IForest.html#ta:461"><span class="id" title="variable">ta</span></a> <a class="idref" href="ITree.Extra.IForest.html#k1:462"><span class="id" title="variable">k1</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <span class="id" title="method">bind</span> <a class="idref" href="ITree.Extra.IForest.html#ta:461"><span class="id" title="variable">ta</span></a> <a class="idref" href="ITree.Extra.IForest.html#k2:463"><span class="id" title="variable">k2</span></a>).<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">simpl_iter</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Basics.CategoryOps.html#iter"><span class="id" title="definition">iter</span></a>, <a class="idref" href="ITree.Basics.CategoryKleisli.html#Iter_Kleisli"><span class="id" title="instance">Iter_Kleisli</span></a>, <a class="idref" href="ITree.Basics.Basics.html#iter"><span class="id" title="definition">Basics.iter</span></a>, <a class="idref" href="ITree.Core.ITreeDefinition.html#MonadIter_itree"><span class="id" title="instance">MonadIter_itree</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="g" class="idref" href="#g"><span class="id" title="definition">g</span></a> {<a id="a:464" class="idref" href="#a:464"><span class="id" title="binder">a</span></a> <a id="b:465" class="idref" href="#b:465"><span class="id" title="binder">b</span></a> : <span class="id" title="keyword">Type</span>} {<a id="E:466" class="idref" href="#E:466"><span class="id" title="binder">E</span></a>} (<a id="x0:467" class="idref" href="#x0:467"><span class="id" title="binder">x0</span></a> : <a class="idref" href="ITree.Extra.IForest.html#a:464"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:466"><span class="id" title="variable">E</span></a> (<a class="idref" href="ITree.Extra.IForest.html#a:464"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">+</span></a> <a class="idref" href="ITree.Extra.IForest.html#b:465"><span class="id" title="variable">b</span></a>)) (<a id="a1:468" class="idref" href="#a1:468"><span class="id" title="binder">a1</span></a> : <a class="idref" href="ITree.Extra.IForest.html#a:464"><span class="id" title="variable">a</span></a>)<br/>
&nbsp;&nbsp;:= (<span class="id" title="keyword">fun</span> '<a id="pat:471" class="idref" href="#pat:471"><span class="id" title="binder">(</span></a><a id="pat:471" class="idref" href="#pat:471"><span class="id" title="binder">x</span></a><a id="pat:471" class="idref" href="#pat:471"><span class="id" title="binder">,</span></a> <a id="pat:471" class="idref" href="#pat:471"><span class="id" title="binder">k</span></a><a id="pat:471" class="idref" href="#pat:471"><span class="id" title="binder">)</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">bind</span> (<a class="idref" href="ITree.Extra.IForest.html#x0:467"><span class="id" title="variable">x0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.IForest.html#x:470"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ITree.Extra.IForest.html#k:469"><span class="id" title="variable">k</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="ir:472" class="idref" href="#ir:472"><span class="id" title="binder">ir</span></a> : <a class="idref" href="ITree.Extra.IForest.html#a:464"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">+</span></a> <a class="idref" href="ITree.Extra.IForest.html#b:465"><span class="id" title="variable">b</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ITree.Extra.IForest.html#ir:472"><span class="id" title="variable">ir</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="var">i0</span> ⇒ <span class="id" title="method">ret</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">i0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ITree.Extra.IForest.html#k:469"><span class="id" title="variable">k</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <span class="id" title="var">r0</span> ⇒ <span class="id" title="method">ret</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <span class="id" title="var">r0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="f" class="idref" href="#f"><span class="id" title="definition">f</span></a> {<a id="a:474" class="idref" href="#a:474"><span class="id" title="binder">a</span></a> <a id="b:475" class="idref" href="#b:475"><span class="id" title="binder">b</span></a> : <span class="id" title="keyword">Type</span>} {<a id="E:476" class="idref" href="#E:476"><span class="id" title="binder">E</span></a>} : <a class="idref" href="ITree.Extra.IForest.html#a:474"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:476"><span class="id" title="variable">E</span></a> (<a class="idref" href="ITree.Extra.IForest.html#a:474"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">+</span></a> <a class="idref" href="ITree.Extra.IForest.html#b:475"><span class="id" title="variable">b</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> '<a id="pat:479" class="idref" href="#pat:479"><span class="id" title="binder">(</span></a><a id="pat:479" class="idref" href="#pat:479"><span class="id" title="binder">x</span></a><a id="pat:479" class="idref" href="#pat:479"><span class="id" title="binder">,</span></a> <a id="pat:479" class="idref" href="#pat:479"><span class="id" title="binder">k</span></a><a id="pat:479" class="idref" href="#pat:479"><span class="id" title="binder">)</span></a> ⇒ <span class="id" title="method">ret</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.IForest.html#x:478"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="ITree.Extra.IForest.html#k:477"><span class="id" title="variable">k</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="iter_succ_dinatural" class="idref" href="#iter_succ_dinatural"><span class="id" title="lemma">iter_succ_dinatural</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<a id="a:480" class="idref" href="#a:480"><span class="id" title="binder">a</span></a> <a id="b:481" class="idref" href="#b:481"><span class="id" title="binder">b</span></a> : <span class="id" title="keyword">Type</span>} {<a id="E:482" class="idref" href="#E:482"><span class="id" title="binder">E</span></a>} (<a id="x0:483" class="idref" href="#x0:483"><span class="id" title="binder">x0</span></a> : <a class="idref" href="ITree.Extra.IForest.html#a:480"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:482"><span class="id" title="variable">E</span></a> (<a class="idref" href="ITree.Extra.IForest.html#a:480"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">+</span></a> <a class="idref" href="ITree.Extra.IForest.html#b:481"><span class="id" title="variable">b</span></a>)) (<a id="a1:484" class="idref" href="#a1:484"><span class="id" title="binder">a1</span></a> : <a class="idref" href="ITree.Extra.IForest.html#a:480"><span class="id" title="variable">a</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Basics.CategoryOps.html#iter"><span class="id" title="definition">iter</span></a> (<span class="id" title="var">C</span> := <a class="idref" href="ITree.Basics.CategoryKleisli.html#Kleisli"><span class="id" title="definition">Kleisli</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:482"><span class="id" title="variable">E</span></a>)) (<span class="id" title="var">bif</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#sum"><span class="id" title="inductive">sum</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ITree.Extra.IForest.html#f"><span class="id" title="definition">f</span></a> <a class="idref" href="ITree.Basics.CategoryOps.html#CatNotations.::cat_scope:x_'&gt;&gt;&gt;'_x"><span class="id" title="notation">&gt;&gt;&gt;</span></a> <a class="idref" href="ITree.Basics.CategoryOps.html#case_"><span class="id" title="definition">case_</span></a> (<a class="idref" href="ITree.Extra.IForest.html#g"><span class="id" title="definition">g</span></a> <a class="idref" href="ITree.Extra.IForest.html#x0:483"><span class="id" title="variable">x0</span></a> <a class="idref" href="ITree.Extra.IForest.html#a1:484"><span class="id" title="variable">a1</span></a>) <a class="idref" href="ITree.Basics.CategoryOps.html#inr_"><span class="id" title="definition">inr_</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Basics.CategoryOps.html#7616709a5b950d9495abeafce4aed57e"><span class="id" title="notation">⩯</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.IForest.html#f"><span class="id" title="definition">f</span></a> <a class="idref" href="ITree.Basics.CategoryOps.html#CatNotations.::cat_scope:x_'&gt;&gt;&gt;'_x"><span class="id" title="notation">&gt;&gt;&gt;</span></a> <a class="idref" href="ITree.Basics.CategoryOps.html#case_"><span class="id" title="definition">case_</span></a> (<a class="idref" href="ITree.Basics.CategoryOps.html#iter"><span class="id" title="definition">iter</span></a> (<span class="id" title="var">C</span> := <a class="idref" href="ITree.Basics.CategoryKleisli.html#Kleisli"><span class="id" title="definition">Kleisli</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:482"><span class="id" title="variable">E</span></a>)) (<span class="id" title="var">bif</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#sum"><span class="id" title="inductive">sum</span></a>) (<a class="idref" href="ITree.Basics.CategoryOps.html#CatNotations.::cat_scope:x_'&gt;&gt;&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.IForest.html#g"><span class="id" title="definition">g</span></a> <a class="idref" href="ITree.Extra.IForest.html#x0:483"><span class="id" title="variable">x0</span></a> <a class="idref" href="ITree.Extra.IForest.html#a1:484"><span class="id" title="variable">a1</span></a><a class="idref" href="ITree.Basics.CategoryOps.html#CatNotations.::cat_scope:x_'&gt;&gt;&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="ITree.Basics.CategoryOps.html#CatNotations.::cat_scope:x_'&gt;&gt;&gt;'_x"><span class="id" title="notation">&gt;&gt;&gt;</span></a> <a class="idref" href="ITree.Basics.CategoryOps.html#CatNotations.::cat_scope:x_'&gt;&gt;&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Basics.CategoryOps.html#case_"><span class="id" title="definition">case_</span></a> <a class="idref" href="ITree.Extra.IForest.html#f"><span class="id" title="definition">f</span></a> <a class="idref" href="ITree.Basics.CategoryOps.html#inr_"><span class="id" title="definition">inr_</span></a><a class="idref" href="ITree.Basics.CategoryOps.html#CatNotations.::cat_scope:x_'&gt;&gt;&gt;'_x"><span class="id" title="notation">)</span></a>)) (<a class="idref" href="ITree.Basics.CategoryOps.html#id_"><span class="id" title="definition">id_</span></a> <span class="id" title="var">_</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Basics.CategoryTheory.html#iter_dinatural"><span class="id" title="definition">iter_dinatural</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="iter_eq_start_index" class="idref" href="#iter_eq_start_index"><span class="id" title="lemma">iter_eq_start_index</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="a:485" class="idref" href="#a:485"><span class="id" title="binder">a</span></a> <a id="b:486" class="idref" href="#b:486"><span class="id" title="binder">b</span></a> : <span class="id" title="keyword">Type</span>) (<a id="E:487" class="idref" href="#E:487"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="x0:488" class="idref" href="#x0:488"><span class="id" title="binder">x0</span></a> : <a class="idref" href="ITree.Extra.IForest.html#a:485"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:487"><span class="id" title="variable">E</span></a> (<a class="idref" href="ITree.Extra.IForest.html#a:485"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">+</span></a> <a class="idref" href="ITree.Extra.IForest.html#b:486"><span class="id" title="variable">b</span></a>)) (<a id="a1:489" class="idref" href="#a1:489"><span class="id" title="binder">a1</span></a> : <a class="idref" href="ITree.Extra.IForest.html#a:485"><span class="id" title="variable">a</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Basics.CategoryOps.html#iter"><span class="id" title="definition">iter</span></a> (<span class="id" title="var">C</span> := <a class="idref" href="ITree.Basics.CategoryKleisli.html#Kleisli"><span class="id" title="definition">Kleisli</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:487"><span class="id" title="variable">E</span></a>)) (<span class="id" title="var">bif</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#sum"><span class="id" title="inductive">sum</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> '<a id="pat:492" class="idref" href="#pat:492"><span class="id" title="binder">(</span></a><a id="pat:492" class="idref" href="#pat:492"><span class="id" title="binder">x</span></a><a id="pat:492" class="idref" href="#pat:492"><span class="id" title="binder">,</span></a> <a id="pat:492" class="idref" href="#pat:492"><span class="id" title="binder">k</span></a><a id="pat:492" class="idref" href="#pat:492"><span class="id" title="binder">)</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">bind</span> (<a class="idref" href="ITree.Extra.IForest.html#x0:488"><span class="id" title="variable">x0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.IForest.html#x:491"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="ITree.Extra.IForest.html#k:490"><span class="id" title="variable">k</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="ir:493" class="idref" href="#ir:493"><span class="id" title="binder">ir</span></a> : <a class="idref" href="ITree.Extra.IForest.html#a:485"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">+</span></a> <a class="idref" href="ITree.Extra.IForest.html#b:486"><span class="id" title="variable">b</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ITree.Extra.IForest.html#ir:493"><span class="id" title="variable">ir</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="var">i0</span> ⇒ <span class="id" title="method">ret</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">i0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="ITree.Extra.IForest.html#k:490"><span class="id" title="variable">k</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <span class="id" title="var">r0</span> ⇒ <span class="id" title="method">ret</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <span class="id" title="var">r0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.IForest.html#a1:489"><span class="id" title="variable">a1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> 0<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Basics.CategoryOps.html#iter"><span class="id" title="definition">iter</span></a> (<span class="id" title="var">C</span> := <a class="idref" href="ITree.Basics.CategoryKleisli.html#Kleisli"><span class="id" title="definition">Kleisli</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:487"><span class="id" title="variable">E</span></a>)) (<span class="id" title="var">bif</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#sum"><span class="id" title="inductive">sum</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> '<a id="pat:497" class="idref" href="#pat:497"><span class="id" title="binder">(</span></a><a id="pat:497" class="idref" href="#pat:497"><span class="id" title="binder">x'</span></a><a id="pat:497" class="idref" href="#pat:497"><span class="id" title="binder">,</span></a> <a id="pat:497" class="idref" href="#pat:497"><span class="id" title="binder">k</span></a><a id="pat:497" class="idref" href="#pat:497"><span class="id" title="binder">)</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">bind</span> (<a class="idref" href="ITree.Extra.IForest.html#x0:488"><span class="id" title="variable">x0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.IForest.html#x':496"><span class="id" title="variable">x'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ITree.Extra.IForest.html#k:495"><span class="id" title="variable">k</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="ir:498" class="idref" href="#ir:498"><span class="id" title="binder">ir</span></a> : <a class="idref" href="ITree.Extra.IForest.html#a:485"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">+</span></a> <a class="idref" href="ITree.Extra.IForest.html#b:486"><span class="id" title="variable">b</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ITree.Extra.IForest.html#ir:498"><span class="id" title="variable">ir</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="var">i0</span> ⇒ <span class="id" title="method">ret</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">i0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="ITree.Extra.IForest.html#k:495"><span class="id" title="variable">k</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <span class="id" title="var">r0</span> ⇒ <span class="id" title="method">ret</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <span class="id" title="var">r0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.IForest.html#a1:489"><span class="id" title="variable">a1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">m</span> <span class="id" title="var">x0</span> <span class="id" title="var">a1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="ITree.Extra.IForest.html#iter_succ_dinatural"><span class="id" title="lemma">iter_succ_dinatural</span></a> <span class="id" title="var">x0</span> <span class="id" title="var">a1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> 0<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.IForest.html#f"><span class="id" title="definition">f</span></a> <span class="id" title="tactic">at</span> 1, <a class="idref" href="ITree.Extra.IForest.html#g"><span class="id" title="definition">g</span></a> <span class="id" title="tactic">at</span> 1 <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Basics.CategoryOps.html#cat"><span class="id" title="definition">cat</span></a> <span class="id" title="tactic">at</span> 1, <a class="idref" href="ITree.Basics.CategoryKleisli.html#Cat_Kleisli"><span class="id" title="instance">Cat_Kleisli</span></a> <span class="id" title="tactic">at</span> 1 <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">H</span> : (?<span class="id" title="var">body1</span> <a class="idref" href="ITree.Basics.Monad.html#20d7a3de27e35f38017a31a5b4c235e8"><span class="id" title="notation">≈</span></a> <span class="id" title="var">_</span>)%<span class="id" title="var">monad</span> |- ?<span class="id" title="var">body2</span> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> <span class="id" title="var">body1</span> <span class="id" title="keyword">as</span> <span class="id" title="var">s1</span>;<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> <span class="id" title="var">body2</span> <span class="id" title="keyword">as</span> <span class="id" title="var">s2</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">s1</span> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <span class="id" title="var">s2</span>). {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| |- <a class="idref" href="ITree.Basics.CategoryOps.html#iter"><span class="id" title="definition">iter</span></a> ?<span class="id" title="var">body1</span> <span class="id" title="var">_</span> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Basics.CategoryOps.html#iter"><span class="id" title="definition">iter</span></a> ?<span class="id" title="var">body2</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">remember</span> <span class="id" title="var">body1</span> <span class="id" title="keyword">as</span> <span class="id" title="var">k1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> <span class="id" title="var">body2</span> <span class="id" title="keyword">as</span> <span class="id" title="var">k2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Basics.CategoryOps.html#iter"><span class="id" title="definition">iter</span></a> <span class="id" title="var">k1</span> <a class="idref" href="ITree.Basics.CategoryOps.html#7616709a5b950d9495abeafce4aed57e"><span class="id" title="notation">⩯</span></a> <a class="idref" href="ITree.Basics.CategoryOps.html#iter"><span class="id" title="definition">iter</span></a> <span class="id" title="var">k2</span>). {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Basics.CategoryTheory.html#iterative_proper_iter"><span class="id" title="method">iterative_proper_iter</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">do</span> 3 <span class="id" title="tactic">red</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a0</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Basics.Monad.html#bind_ret_l"><span class="id" title="method">Monad.bind_ret_l</span></a>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 3 <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.IForest.html#f"><span class="id" title="definition">f</span></a>, <a class="idref" href="ITree.Extra.IForest.html#g"><span class="id" title="definition">g</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Basics.CategoryOps.html#cat"><span class="id" title="definition">cat</span></a>, <a class="idref" href="ITree.Basics.CategoryKleisli.html#Cat_Kleisli"><span class="id" title="instance">Cat_Kleisli</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Basics.Monad.html#bind_ret_l"><span class="id" title="method">Monad.bind_ret_l</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| |- <a class="idref" href="ITree.Basics.CategoryOps.html#iter"><span class="id" title="definition">iter</span></a> ?<span class="id" title="var">body1</span> <span class="id" title="var">_</span> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Basics.CategoryOps.html#iter"><span class="id" title="definition">iter</span></a> ?<span class="id" title="var">body2</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">remember</span> <span class="id" title="var">body1</span> <span class="id" title="keyword">as</span> <span class="id" title="var">i1</span>; <span class="id" title="var">remember</span> <span class="id" title="var">body2</span> <span class="id" title="keyword">as</span> <span class="id" title="var">i2</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Basics.CategoryOps.html#iter"><span class="id" title="definition">iter</span></a> <span class="id" title="var">i1</span> <a class="idref" href="ITree.Basics.CategoryOps.html#7616709a5b950d9495abeafce4aed57e"><span class="id" title="notation">⩯</span></a> <a class="idref" href="ITree.Basics.CategoryOps.html#iter"><span class="id" title="definition">iter</span></a> <span class="id" title="var">i2</span>). {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Basics.CategoryTheory.html#iterative_proper_iter"><span class="id" title="method">iterative_proper_iter</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 3 <span class="id" title="tactic">red</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a0</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_bind"><span class="id" title="lemma">Eqit.bind_bind</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Eq.Eqit.html#eutt_clo_bind"><span class="id" title="lemma">eutt_clo_bind</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">u2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_l"><span class="id" title="lemma">Eqit.bind_ret_l</span></a>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">do</span> 3 <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="Eq1_iforest'" class="idref" href="#Eq1_iforest'"><span class="id" title="definition">Eq1_iforest'</span></a> {<a id="E:500" class="idref" href="#E:500"><span class="id" title="binder">E</span></a>} : <a class="idref" href="ITree.Basics.Monad.html#Eq1"><span class="id" title="class">Eq1</span></a> (<a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:500"><span class="id" title="variable">E</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="a:501" class="idref" href="#a:501"><span class="id" title="binder">a</span></a> <a id="PA:502" class="idref" href="#PA:502"><span class="id" title="binder">PA</span></a> <a id="PA':503" class="idref" href="#PA':503"><span class="id" title="binder">PA'</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="x:504" class="idref" href="#x:504"><span class="id" title="binder">x</span></a>, (<a class="idref" href="ITree.Extra.IForest.html#PA:502"><span class="id" title="variable">PA</span></a> <a class="idref" href="ITree.Extra.IForest.html#x:504"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="y:505" class="idref" href="#y:505"><span class="id" title="binder">y</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="ITree.Extra.IForest.html#x:504"><span class="id" title="variable">x</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Extra.IForest.html#y:505"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="ITree.Extra.IForest.html#PA':503"><span class="id" title="variable">PA'</span></a> <a class="idref" href="ITree.Extra.IForest.html#y:505"><span class="id" title="variable">y</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="y:506" class="idref" href="#y:506"><span class="id" title="binder">y</span></a>, (<a class="idref" href="ITree.Extra.IForest.html#PA':503"><span class="id" title="variable">PA'</span></a> <a class="idref" href="ITree.Extra.IForest.html#y:506"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="x:507" class="idref" href="#x:507"><span class="id" title="binder">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="ITree.Extra.IForest.html#x:507"><span class="id" title="variable">x</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Extra.IForest.html#y:506"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="ITree.Extra.IForest.html#PA:502"><span class="id" title="variable">PA</span></a> <a class="idref" href="ITree.Extra.IForest.html#x:507"><span class="id" title="variable">x</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.IForest.html#eutt_closed"><span class="id" title="definition">eutt_closed</span></a> <a class="idref" href="ITree.Extra.IForest.html#PA:502"><span class="id" title="variable">PA</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="ITree.Extra.IForest.html#eutt_closed"><span class="id" title="definition">eutt_closed</span></a> <a class="idref" href="ITree.Extra.IForest.html#PA':503"><span class="id" title="variable">PA'</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Eq1_iforest'_Eq1_iforest" class="idref" href="#Eq1_iforest'_Eq1_iforest"><span class="id" title="lemma">Eq1_iforest'_Eq1_iforest</span></a> : <span class="id" title="keyword">∀</span> <a id="E:508" class="idref" href="#E:508"><span class="id" title="binder">E</span></a> <a id="a:509" class="idref" href="#a:509"><span class="id" title="binder">a</span></a> <a id="PA:510" class="idref" href="#PA:510"><span class="id" title="binder">PA</span></a> <a id="PA':511" class="idref" href="#PA':511"><span class="id" title="binder">PA'</span></a>, @<a class="idref" href="ITree.Extra.IForest.html#Eq1_iforest"><span class="id" title="instance">Eq1_iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:508"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:509"><span class="id" title="variable">a</span></a> <a class="idref" href="ITree.Extra.IForest.html#PA:510"><span class="id" title="variable">PA</span></a> <a class="idref" href="ITree.Extra.IForest.html#PA':511"><span class="id" title="variable">PA'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.IForest.html#Eq1_iforest'"><span class="id" title="definition">Eq1_iforest'</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:509"><span class="id" title="variable">a</span></a> <a class="idref" href="ITree.Extra.IForest.html#PA:510"><span class="id" title="variable">PA</span></a> <a class="idref" href="ITree.Extra.IForest.html#PA':511"><span class="id" title="variable">PA'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">HXY</span> &amp; <span class="id" title="var">EPA</span> &amp; <span class="id" title="var">EPA'</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">split</span>; [<span class="id" title="tactic">reflexivity</span>|]. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">HXY</span> <span class="id" title="var">x</span> <span class="id" title="var">x</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">HXY</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">y</span>. <span class="id" title="tactic">split</span>; [<span class="id" title="tactic">reflexivity</span>|]. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">HXY</span> <span class="id" title="var">y</span> <span class="id" title="var">y</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">HXY</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Figure&nbsp;7:&nbsp;ret_bind&nbsp;law&nbsp;for&nbsp;iforest&nbsp;&nbsp;-&nbsp;first&nbsp;law&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="ret_bind" class="idref" href="#ret_bind"><span class="id" title="lemma">ret_bind</span></a>: <span class="id" title="keyword">∀</span> {<a id="E:512" class="idref" href="#E:512"><span class="id" title="binder">E</span></a>} (<a id="a:513" class="idref" href="#a:513"><span class="id" title="binder">a</span></a> <a id="b:514" class="idref" href="#b:514"><span class="id" title="binder">b</span></a> : <span class="id" title="keyword">Type</span>) (<a id="f:515" class="idref" href="#f:515"><span class="id" title="binder">f</span></a> : <a class="idref" href="ITree.Extra.IForest.html#a:513"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:512"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#b:514"><span class="id" title="variable">b</span></a>) (<a id="x:516" class="idref" href="#x:516"><span class="id" title="binder">x</span></a> : <a class="idref" href="ITree.Extra.IForest.html#a:513"><span class="id" title="variable">a</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.IForest.html#eutt_closed"><span class="id" title="definition">eutt_closed</span></a> (<a class="idref" href="ITree.Extra.IForest.html#f:515"><span class="id" title="variable">f</span></a> <a class="idref" href="ITree.Extra.IForest.html#x:516"><span class="id" title="variable">x</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Basics.Monad.html#eq1"><span class="id" title="definition">eq1</span></a> (<span class="id" title="method">bind</span> (<span class="id" title="method">ret</span> <a class="idref" href="ITree.Extra.IForest.html#x:516"><span class="id" title="variable">x</span></a>) <a class="idref" href="ITree.Extra.IForest.html#f:515"><span class="id" title="variable">f</span></a>) (<a class="idref" href="ITree.Extra.IForest.html#f:515"><span class="id" title="variable">f</span></a> <a class="idref" href="ITree.Extra.IForest.html#x:516"><span class="id" title="variable">x</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [| <span class="id" title="tactic">split</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">t</span> <span class="id" title="var">t'</span> <span class="id" title="var">eq</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">eqtt'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">eqtt'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">eqtt'</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">ta</span> &amp; <span class="id" title="var">k</span> &amp; <span class="id" title="var">EQ1</span> &amp; <span class="id" title="var">EQ2</span> &amp; <span class="id" title="var">KA</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <span class="id" title="method">bind</span>, <a class="idref" href="ITree.Core.ITreeDefinition.html#Monad_itree"><span class="id" title="instance">Monad_itree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ2</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">EQ1</span>, <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_l"><span class="id" title="lemma">Eqit.bind_ret_l</span></a>, <span class="id" title="var">eq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">H</span>; [<span class="id" title="tactic">apply</span> <span class="id" title="var">EQ2</span> | <span class="id" title="tactic">apply</span> <span class="id" title="var">KA</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span> 1; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;× <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <span class="id" title="var">x</span>), (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">t</span>); <span class="id" title="tactic">split</span>; [<span class="id" title="tactic">reflexivity</span>|]; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <span class="id" title="method">bind</span>, <a class="idref" href="ITree.Core.ITreeDefinition.html#Monad_itree"><span class="id" title="instance">Monad_itree</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_l"><span class="id" title="lemma">Eqit.bind_ret_l</span></a>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.IForest.html#Returns_Ret"><span class="id" title="lemma">Returns_Ret</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">t</span> <span class="id" title="var">t'</span> <span class="id" title="var">EQ</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">HX</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> <span class="id" title="var">HX</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">ta</span> &amp; <span class="id" title="var">k</span> &amp; <span class="id" title="var">EQ1</span> &amp; <span class="id" title="var">EQ2</span> &amp; <span class="id" title="var">KA</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <span class="id" title="var">x</span>), (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">t</span>); <span class="id" title="tactic">split</span>; [<span class="id" title="tactic">reflexivity</span> |]; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--  <span class="id" title="tactic">unfold</span> <span class="id" title="method">bind</span>, <a class="idref" href="ITree.Core.ITreeDefinition.html#Monad_itree"><span class="id" title="instance">Monad_itree</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_l"><span class="id" title="lemma">Eqit.bind_ret_l</span></a>. <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? <span class="id" title="var">RET</span>; <span class="id" title="var">inv</span> <span class="id" title="var">RET</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: { <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.IForest.html#Returns_Ret"><span class="id" title="lemma">Returns_Ret</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">EQ2</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">EQ1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="method">bind</span>, <a class="idref" href="ITree.Core.ITreeDefinition.html#Monad_itree"><span class="id" title="instance">Monad_itree</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_l"><span class="id" title="lemma">Eqit.bind_ret_l</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">KA</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">EQ1</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id" title="var">exfalso</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.IForest.html#eutt_ret_vis_abs"><span class="id" title="lemma">eutt_ret_vis_abs</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#eqit_inv_Ret"><span class="id" title="lemma">eqit_inv_Ret</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">EQ1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="method">bind</span>, <a class="idref" href="ITree.Core.ITreeDefinition.html#Monad_itree"><span class="id" title="instance">Monad_itree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_l"><span class="id" title="lemma">Eqit.bind_ret_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ2</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">EQ2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">KA</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">EQ1</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">reflexivity</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> <span class="id" title="var">HX</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">ta</span> &amp; <span class="id" title="var">k</span> &amp; <span class="id" title="var">EQ1</span> &amp; <span class="id" title="var">EQ2</span> &amp; <span class="id" title="var">KA</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <span class="id" title="var">x</span>), (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">t</span>); <span class="id" title="tactic">split</span>; [<span class="id" title="tactic">reflexivity</span> |]; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--  <span class="id" title="tactic">unfold</span> <span class="id" title="method">bind</span>, <a class="idref" href="ITree.Core.ITreeDefinition.html#Monad_itree"><span class="id" title="instance">Monad_itree</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_l"><span class="id" title="lemma">Eqit.bind_ret_l</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? <span class="id" title="var">RET</span>; <span class="id" title="var">inv</span> <span class="id" title="var">RET</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: { <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.IForest.html#Returns_Ret"><span class="id" title="lemma">Returns_Ret</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">EQ</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">EQ2</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">EQ1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="method">bind</span>, <a class="idref" href="ITree.Core.ITreeDefinition.html#Monad_itree"><span class="id" title="instance">Monad_itree</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_l"><span class="id" title="lemma">Eqit.bind_ret_l</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">KA</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">EQ1</span>; <span class="id" title="tactic">constructor</span> 1; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id" title="var">exfalso</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.IForest.html#eutt_ret_vis_abs"><span class="id" title="lemma">eutt_ret_vis_abs</span></a>; <span class="id" title="tactic">eauto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#eqit_inv_Ret"><span class="id" title="lemma">eqit_inv_Ret</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">EQ</span>, <span class="id" title="var">EQ2</span>, <span class="id" title="var">EQ1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="method">bind</span>, <a class="idref" href="ITree.Core.ITreeDefinition.html#Monad_itree"><span class="id" title="instance">Monad_itree</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_l"><span class="id" title="lemma">Eqit.bind_ret_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">KA</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">EQ1</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="bind_iforest_Proper" class="idref" href="#bind_iforest_Proper"><span class="id" title="instance">bind_iforest_Proper</span></a> {<a id="E:517" class="idref" href="#E:517"><span class="id" title="binder">E</span></a>} {<a id="A:518" class="idref" href="#A:518"><span class="id" title="binder">A</span></a> <a id="B:519" class="idref" href="#B:519"><span class="id" title="binder">B</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="ITree.Basics.Monad.html#eq1"><span class="id" title="definition">eq1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="ITree.Basics.Monad.html#eq1"><span class="id" title="definition">eq1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="ITree.Eq.Eqit.html#eutt"><span class="id" title="definition">eutt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#iff"><span class="id" title="definition">iff</span></a>) (@<a class="idref" href="ITree.Extra.IForest.html#bind_iforest"><span class="id" title="definition">bind_iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:517"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:518"><span class="id" title="variable">A</span></a> <a class="idref" href="ITree.Extra.IForest.html#B:519"><span class="id" title="variable">B</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">PA1</span> <span class="id" title="var">PA2</span> <span class="id" title="var">EQP</span> <span class="id" title="var">K1</span> <span class="id" title="var">K2</span> <span class="id" title="var">EQK</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span> <span class="id" title="var">EQt</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">ta</span> &amp; <span class="id" title="var">k</span> &amp; <span class="id" title="var">HA</span> &amp; <span class="id" title="var">eq</span> &amp; <span class="id" title="var">HK</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">ta</span>, <span class="id" title="var">k</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">EQP</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">H</span> <span class="id" title="var">ta</span> <span class="id" title="var">ta</span>). <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">split</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">EQt</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQK</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">EQK</span> <span class="id" title="var">a</span> <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">EQK</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H0</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">HK</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;-  <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">ta</span> &amp; <span class="id" title="var">k</span> &amp; <span class="id" title="var">HA</span> &amp; <span class="id" title="var">eq</span> &amp; <span class="id" title="var">HK</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">ta</span>, <span class="id" title="var">k</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">EQP</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">H</span> <span class="id" title="var">ta</span> <span class="id" title="var">ta</span>). <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">split</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">EQt</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQK</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">EQK</span> <span class="id" title="var">a</span> <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">EQK</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">HK</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="bind_Propt_Proper2" class="idref" href="#bind_Propt_Proper2"><span class="id" title="instance">bind_Propt_Proper2</span></a> {<a id="E:520" class="idref" href="#E:520"><span class="id" title="binder">E</span></a>} {<a id="A:521" class="idref" href="#A:521"><span class="id" title="binder">A</span></a> <a id="B:522" class="idref" href="#B:522"><span class="id" title="binder">B</span></a>} (<a id="PA:523" class="idref" href="#PA:523"><span class="id" title="binder">PA</span></a> : <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:520"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:521"><span class="id" title="variable">A</span></a>) (<a id="K:524" class="idref" href="#K:524"><span class="id" title="binder">K</span></a> : <a class="idref" href="ITree.Extra.IForest.html#A:521"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:520"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#B:522"><span class="id" title="variable">B</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="ITree.Eq.Eqit.html#eutt"><span class="id" title="definition">eutt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Program.Basics.html#flip"><span class="id" title="definition">flip</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Program.Basics.html#impl"><span class="id" title="definition">impl</span></a>) (<span class="id" title="method">bind</span> <a class="idref" href="ITree.Extra.IForest.html#PA:523"><span class="id" title="variable">PA</span></a> <a class="idref" href="ITree.Extra.IForest.html#K:524"><span class="id" title="variable">K</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">ta</span> &amp; <span class="id" title="var">k</span> &amp; <span class="id" title="var">HA</span> &amp; <span class="id" title="var">eq</span> &amp; <span class="id" title="var">HK</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">ta</span>, <span class="id" title="var">k</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="agrees_itree" class="idref" href="#agrees_itree"><span class="id" title="definition">agrees_itree</span></a> {<a id="E:525" class="idref" href="#E:525"><span class="id" title="binder">E</span></a>} {<a id="A:526" class="idref" href="#A:526"><span class="id" title="binder">A</span></a>} (<a id="ta1:527" class="idref" href="#ta1:527"><span class="id" title="binder">ta1</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:525"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:526"><span class="id" title="variable">A</span></a>) (<a id="ta2:528" class="idref" href="#ta2:528"><span class="id" title="binder">ta2</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:525"><span class="id" title="variable">E</span></a> (<a class="idref" href="ITree.Extra.IForest.html#A:526"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>)) :=<br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Eq.Eqit.html#eutt"><span class="id" title="definition">eutt</span></a> (<span class="id" title="keyword">fun</span> <a id="a:529" class="idref" href="#a:529"><span class="id" title="binder">a</span></a> <a id="p:530" class="idref" href="#p:530"><span class="id" title="binder">p</span></a> ⇒ <a class="idref" href="ITree.Extra.IForest.html#p:530"><span class="id" title="variable">p</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:529"><span class="id" title="variable">a</span></a>) <a class="idref" href="ITree.Extra.IForest.html#ta1:527"><span class="id" title="variable">ta1</span></a> <a class="idref" href="ITree.Extra.IForest.html#ta2:528"><span class="id" title="variable">ta2</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="bind_stronger" class="idref" href="#bind_stronger"><span class="id" title="definition">bind_stronger</span></a> {<a id="E:531" class="idref" href="#E:531"><span class="id" title="binder">E</span></a>} :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="A:532" class="idref" href="#A:532"><span class="id" title="binder">A</span></a> <a id="B:533" class="idref" href="#B:533"><span class="id" title="binder">B</span></a> (<a id="PA:534" class="idref" href="#PA:534"><span class="id" title="binder">PA</span></a>: <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:531"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:532"><span class="id" title="variable">A</span></a>) (<a id="K:535" class="idref" href="#K:535"><span class="id" title="binder">K</span></a>: <a class="idref" href="ITree.Extra.IForest.html#A:532"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:531"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#B:533"><span class="id" title="variable">B</span></a>) (<a id="tb:536" class="idref" href="#tb:536"><span class="id" title="binder">tb</span></a>: <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:531"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#B:533"><span class="id" title="variable">B</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="ta:537" class="idref" href="#ta:537"><span class="id" title="binder">ta</span></a>: <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:531"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:532"><span class="id" title="variable">A</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a>  <a class="idref" href="ITree.Extra.IForest.html#PA:534"><span class="id" title="variable">PA</span></a> <a class="idref" href="ITree.Extra.IForest.html#ta:537"><span class="id" title="variable">ta</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="k:538" class="idref" href="#k:538"><span class="id" title="binder">k</span></a>: <a class="idref" href="ITree.Extra.IForest.html#A:532"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:531"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#B:533"><span class="id" title="variable">B</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.IForest.html#agrees_itree"><span class="id" title="definition">agrees_itree</span></a> (<span class="id" title="method">fmap</span> <a class="idref" href="ITree.Extra.IForest.html#k:538"><span class="id" title="variable">k</span></a> <a class="idref" href="ITree.Extra.IForest.html#ta:537"><span class="id" title="variable">ta</span></a>) (<span class="id" title="method">fmap</span> <a class="idref" href="ITree.Extra.IForest.html#K:535"><span class="id" title="variable">K</span></a> <a class="idref" href="ITree.Extra.IForest.html#ta:537"><span class="id" title="variable">ta</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="ITree.Extra.IForest.html#tb:536"><span class="id" title="variable">tb</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <span class="id" title="method">bind</span> <a class="idref" href="ITree.Extra.IForest.html#ta:537"><span class="id" title="variable">ta</span></a> <a class="idref" href="ITree.Extra.IForest.html#k:538"><span class="id" title="variable">k</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="agree_itree_Returns" class="idref" href="#agree_itree_Returns"><span class="id" title="lemma">agree_itree_Returns</span></a> <a id="E:539" class="idref" href="#E:539"><span class="id" title="binder">E</span></a> <a id="A:540" class="idref" href="#A:540"><span class="id" title="binder">A</span></a> <a id="B:541" class="idref" href="#B:541"><span class="id" title="binder">B</span></a> (<a id="ta:542" class="idref" href="#ta:542"><span class="id" title="binder">ta</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:539"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:540"><span class="id" title="variable">A</span></a>) (<a id="K:543" class="idref" href="#K:543"><span class="id" title="binder">K</span></a> : <a class="idref" href="ITree.Extra.IForest.html#A:540"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:539"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#B:541"><span class="id" title="variable">B</span></a>) (<a id="k:544" class="idref" href="#k:544"><span class="id" title="binder">k</span></a> : <a class="idref" href="ITree.Extra.IForest.html#A:540"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:539"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#B:541"><span class="id" title="variable">B</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="a:545" class="idref" href="#a:545"><span class="id" title="binder">a</span></a>, <a class="idref" href="ITree.Extra.IForest.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:545"><span class="id" title="variable">a</span></a> <a class="idref" href="ITree.Extra.IForest.html#ta:542"><span class="id" title="variable">ta</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.IForest.html#K:543"><span class="id" title="variable">K</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:545"><span class="id" title="variable">a</span></a> (<a class="idref" href="ITree.Extra.IForest.html#k:544"><span class="id" title="variable">k</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:545"><span class="id" title="variable">a</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.IForest.html#agrees_itree"><span class="id" title="definition">agrees_itree</span></a> (<span class="id" title="method">fmap</span> <a class="idref" href="ITree.Extra.IForest.html#k:544"><span class="id" title="variable">k</span></a> <a class="idref" href="ITree.Extra.IForest.html#ta:542"><span class="id" title="variable">ta</span></a>) (<span class="id" title="method">fmap</span> <a class="idref" href="ITree.Extra.IForest.html#K:543"><span class="id" title="variable">K</span></a> <a class="idref" href="ITree.Extra.IForest.html#ta:542"><span class="id" title="variable">ta</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.map"><span class="id" title="definition">ITree.map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.IForest.html#eqit_Returns_bind''"><span class="id" title="lemma">eqit_Returns_bind''</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#eqit_Ret"><span class="id" title="lemma">eqit_Ret</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">revert</span> <span class="id" title="var">B</span> <span class="id" title="var">K</span> <span class="id" title="var">k</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.IForest.html#agrees_itree"><span class="id" title="definition">agrees_itree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.map"><span class="id" title="definition">ITree.map</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_l"><span class="id" title="lemma">Eqit.bind_ret_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#eqit_Ret"><span class="id" title="lemma">Eqit.eqit_Ret</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.IForest.html#agrees_itree"><span class="id" title="definition">agrees_itree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHReturns</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.IForest.html#agrees_itree"><span class="id" title="definition">agrees_itree</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHReturns</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">IHReturns</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.IForest.html#agrees_itree"><span class="id" title="definition">agrees_itree</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.map"><span class="id" title="definition">ITree.map</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.IForest.html#inj_pair2"><span class="id" title="lemma">inj_pair2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.IForest.html#inj_pair2"><span class="id" title="lemma">inj_pair2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.IForest.html#inj_pair2"><span class="id" title="lemma">inj_pair2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.IForest.html#inj_pair2"><span class="id" title="lemma">inj_pair2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.IForest.html#eqit_Returns_bind''"><span class="id" title="lemma">eqit_Returns_bind''</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#eqit_Ret"><span class="id" title="lemma">Eqit.eqit_Ret</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">REL</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">REL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pclearbot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">REL2</span> := <a class="idref" href="ITree.Extra.IForest.html#eqit_bind_Returns_inv"><span class="id" title="lemma">eqit_bind_Returns_inv</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">REL</span> <span class="id" title="var">_</span> <span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#eqit_Ret"><span class="id" title="lemma">eqit_Ret</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">REL2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="distinguish_bind" class="idref" href="#distinguish_bind"><span class="id" title="lemma">distinguish_bind</span></a> {<a id="E:546" class="idref" href="#E:546"><span class="id" title="binder">E</span></a>} {<a id="A:547" class="idref" href="#A:547"><span class="id" title="binder">A</span></a> <a id="B:548" class="idref" href="#B:548"><span class="id" title="binder">B</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="a:549" class="idref" href="#a:549"><span class="id" title="binder">a</span></a> : <a class="idref" href="ITree.Extra.IForest.html#A:547"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="ma:550" class="idref" href="#ma:550"><span class="id" title="binder">ma</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:546"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:547"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="k1:551" class="idref" href="#k1:551"><span class="id" title="binder">k1</span></a> <a id="k2:552" class="idref" href="#k2:552"><span class="id" title="binder">k2</span></a> : <a class="idref" href="ITree.Extra.IForest.html#A:547"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:546"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#B:548"><span class="id" title="variable">B</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="HRET:553" class="idref" href="#HRET:553"><span class="id" title="binder">HRET</span></a> : <a class="idref" href="ITree.Extra.IForest.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:549"><span class="id" title="variable">a</span></a> <a class="idref" href="ITree.Extra.IForest.html#ma:550"><span class="id" title="variable">ma</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="NEQ:554" class="idref" href="#NEQ:554"><span class="id" title="binder">NEQ</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~(</span></a><a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.IForest.html#k1:551"><span class="id" title="variable">k1</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:549"><span class="id" title="variable">a</span></a><a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">)</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.IForest.html#k2:552"><span class="id" title="variable">k2</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:549"><span class="id" title="variable">a</span></a><a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">)</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#not"><span class="id" title="definition">not</span></a> (<a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> <a class="idref" href="ITree.Extra.IForest.html#ma:550"><span class="id" title="variable">ma</span></a> <a class="idref" href="ITree.Extra.IForest.html#k1:551"><span class="id" title="variable">k1</span></a><a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">)</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> <a class="idref" href="ITree.Extra.IForest.html#ma:550"><span class="id" title="variable">ma</span></a> <a class="idref" href="ITree.Extra.IForest.html#k2:552"><span class="id" title="variable">k2</span></a><a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">)</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">HI</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">NEQ</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">NEQ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">k1</span> <span class="id" title="var">k2</span> <span class="id" title="var">HI</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">HRET</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HI</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HI</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_l"><span class="id" title="lemma">Eqit.bind_ret_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HI</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_l"><span class="id" title="lemma">Eqit.bind_ret_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HI</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">IHHRET</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="method">bind</span>, <a class="idref" href="ITree.Core.ITreeDefinition.html#Monad_itree"><span class="id" title="instance">Monad_itree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HI</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HI</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_tau"><span class="id" title="lemma">Eqit.bind_tau</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HI</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HI</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">HI</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">IHHRET</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HI</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_vis"><span class="id" title="lemma">bind_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HI</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <a class="idref" href="ITree.Eq.Eqit.html#eqit_inv_Vis"><span class="id" title="lemma">eqit_inv_Vis</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">HI</span> <span class="id" title="keyword">as</span> <span class="id" title="var">HI'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">HI'</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="not_Returns" class="idref" href="#not_Returns"><span class="id" title="lemma">not_Returns</span></a> {<a id="E:555" class="idref" href="#E:555"><span class="id" title="binder">E</span></a>} {<a id="A:556" class="idref" href="#A:556"><span class="id" title="binder">A</span></a> <a id="B:557" class="idref" href="#B:557"><span class="id" title="binder">B</span></a>} : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#inhabited"><span class="id" title="inductive">inhabited</span></a> <a class="idref" href="ITree.Extra.IForest.html#B:557"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="ta:558" class="idref" href="#ta:558"><span class="id" title="binder">ta</span></a>: <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:555"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:556"><span class="id" title="variable">A</span></a>), <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="tb:559" class="idref" href="#tb:559"><span class="id" title="binder">tb</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <span class="id" title="keyword">∀</span> (<a id="k:560" class="idref" href="#k:560"><span class="id" title="binder">k</span></a> : <a class="idref" href="ITree.Extra.IForest.html#A:556"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:555"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#B:557"><span class="id" title="variable">B</span></a>), <a class="idref" href="ITree.Extra.IForest.html#tb:559"><span class="id" title="variable">tb</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <span class="id" title="method">bind</span> <a class="idref" href="ITree.Extra.IForest.html#ta:558"><span class="id" title="variable">ta</span></a> <a class="idref" href="ITree.Extra.IForest.html#k:560"><span class="id" title="variable">k</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">∀</span> (<a id="a:561" class="idref" href="#a:561"><span class="id" title="binder">a</span></a>:<a class="idref" href="ITree.Extra.IForest.html#A:556"><span class="id" title="variable">A</span></a>), <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">¬</span></a> <a class="idref" href="ITree.Extra.IForest.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:561"><span class="id" title="variable">a</span></a> <a class="idref" href="ITree.Extra.IForest.html#ta:558"><span class="id" title="variable">ta</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">IB</span> <span class="id" title="var">ta</span> <span class="id" title="var">HX</span> <span class="id" title="var">a</span> <span class="id" title="var">HRet</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">IB</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">IB</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">HX</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">HRet</span>; <span class="id" title="tactic">intros</span> (<span class="id" title="var">tb</span> &amp; <span class="id" title="var">HK</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HK</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="method">bind</span>, <a class="idref" href="ITree.Core.ITreeDefinition.html#Monad_itree"><span class="id" title="instance">Monad_itree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HK</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_l"><span class="id" title="lemma">Eqit.bind_ret_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HK</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">HK</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="method">ret</span> <span class="id" title="var">X</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">t2</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">t2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">HK</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.spin"><span class="id" title="definition">ITree.spin</span></a>)) <span class="id" title="keyword">as</span> <span class="id" title="var">t3</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">t3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <span class="id" title="var">X</span> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.spin"><span class="id" title="definition">ITree.spin</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <span class="id" title="var">E</span> <span class="id" title="var">B</span><a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">t2</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">t3</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#eutt_Ret_spin_abs"><span class="id" title="lemma">eutt_Ret_spin_abs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">IHHRet</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">tb</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">HK</span> <span class="id" title="var">k</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">HK</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="method">bind</span>, <a class="idref" href="ITree.Core.ITreeDefinition.html#Monad_itree"><span class="id" title="instance">Monad_itree</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_tau"><span class="id" title="lemma">bind_tau</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HK</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">HK</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="method">ret</span> <span class="id" title="var">X</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">t2</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">t2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">HK</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.spin"><span class="id" title="definition">ITree.spin</span></a>)) <span class="id" title="keyword">as</span> <span class="id" title="var">t3</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">t3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <span class="id" title="var">e</span> <span class="id" title="var">k</span>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> : <span class="id" title="var">A</span> ⇒ <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <span class="id" title="var">X</span>) <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <span class="id" title="var">e</span> <span class="id" title="var">k</span>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> : <span class="id" title="var">A</span> ⇒ <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.spin"><span class="id" title="definition">ITree.spin</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">t2</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">t3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_vis"><span class="id" title="lemma">bind_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_vis"><span class="id" title="lemma">bind_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <a class="idref" href="ITree.Eq.Eqit.html#eqit_inv_Vis"><span class="id" title="lemma">eqit_inv_Vis</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> <span class="id" title="var">H'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H'</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">H'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~(</span></a><a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> (<span class="id" title="var">k</span> <span class="id" title="var">x</span>) ( <span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> : <span class="id" title="var">A</span> ⇒ <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <span class="id" title="var">X</span>)<a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">)</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> (<span class="id" title="var">k</span> <span class="id" title="var">x</span>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> : <span class="id" title="var">A</span> ⇒ <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.spin"><span class="id" title="definition">ITree.spin</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.IForest.html#distinguish_bind"><span class="id" title="lemma">distinguish_bind</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">HRet</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">H'</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#eutt_Ret_spin_abs"><span class="id" title="lemma">eutt_Ret_spin_abs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H'</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Figure&nbsp;7:&nbsp;bind_ret&nbsp;-&nbsp;second&nbsp;monad&nbsp;law&nbsp;for&nbsp;iforest&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="bind_ret" class="idref" href="#bind_ret"><span class="id" title="lemma">bind_ret</span></a>: <span class="id" title="keyword">∀</span> {<a id="E:562" class="idref" href="#E:562"><span class="id" title="binder">E</span></a>} (<a id="A:563" class="idref" href="#A:563"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>) (<a id="PA:564" class="idref" href="#PA:564"><span class="id" title="binder">PA</span></a> : <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:562"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:563"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.IForest.html#eutt_closed"><span class="id" title="definition">eutt_closed</span></a> <a class="idref" href="ITree.Extra.IForest.html#PA:564"><span class="id" title="variable">PA</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Basics.Monad.html#eq1"><span class="id" title="definition">eq1</span></a> (<span class="id" title="method">bind</span> <a class="idref" href="ITree.Extra.IForest.html#PA:564"><span class="id" title="variable">PA</span></a> (<span class="id" title="keyword">fun</span> <a id="x:565" class="idref" href="#x:565"><span class="id" title="binder">x</span></a> ⇒ <span class="id" title="method">ret</span> <a class="idref" href="ITree.Extra.IForest.html#x:565"><span class="id" title="variable">x</span></a>)) <a class="idref" href="ITree.Extra.IForest.html#PA:564"><span class="id" title="variable">PA</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [| <span class="id" title="tactic">split</span>].<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">t</span> <span class="id" title="var">t'</span> <span class="id" title="var">eq</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">eqtt'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">eqtt'</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">ta</span> &amp; <span class="id" title="var">k</span> &amp; <span class="id" title="var">HPA</span> &amp; <span class="id" title="var">EQ</span> &amp; <span class="id" title="var">HRET</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">H</span>; [<span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">eauto</span> | <span class="id" title="tactic">clear</span> <span class="id" title="var">eq</span> <span class="id" title="var">t'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">H</span>; [<span class="id" title="tactic">eauto</span> | <span class="id" title="tactic">clear</span> <span class="id" title="var">EQ</span> <span class="id" title="var">t</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="ITree.Basics.Monad.html#bind_ret_r"><span class="id" title="method">Monad.bind_ret_r</span></a> <span class="id" title="var">_</span> <span class="id" title="var">ta</span>) <span class="id" title="tactic">at</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.IForest.html#eqit_Returns_bind'"><span class="id" title="lemma">eqit_Returns_bind'</span></a>; [<span class="id" title="tactic">reflexivity</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">HRET</span> <span class="id" title="var">r</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">t'</span>, (<span class="id" title="keyword">fun</span> <a id="x:567" class="idref" href="#x:567"><span class="id" title="binder">x</span></a> ⇒ <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.Extra.IForest.html#x:566"><span class="id" title="variable">x</span></a>); <span class="id" title="tactic">split</span>; [<span class="id" title="tactic">auto</span>|]; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="method">bind</span>, <a class="idref" href="ITree.Core.ITreeDefinition.html#Monad_itree"><span class="id" title="instance">Monad_itree</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_r"><span class="id" title="lemma">Eqit.bind_ret_r</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">reflexivity</span>.<br/>

<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">eqtt'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">eqtt'</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">ta</span> &amp; <span class="id" title="var">k</span> &amp; <span class="id" title="var">HPA</span> &amp; <span class="id" title="var">EQ'</span> &amp; <span class="id" title="var">HRET</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">ta</span>, <span class="id" title="var">k</span>; <span class="id" title="tactic">split</span>; [<span class="id" title="tactic">auto</span>|]; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">EQ</span>; <span class="id" title="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">eqtt'</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">ta</span> &amp; <span class="id" title="var">k</span> &amp; <span class="id" title="var">HPA</span> &amp; <span class="id" title="var">EQ'</span> &amp; <span class="id" title="var">HRET</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">ta</span>, <span class="id" title="var">k</span>; <span class="id" title="tactic">split</span>; [<span class="id" title="tactic">auto</span>|]; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="EQ_REL" class="idref" href="#EQ_REL"><span class="id" title="definition">EQ_REL</span></a> {<a id="E:568" class="idref" href="#E:568"><span class="id" title="binder">E</span></a> <a id="A:569" class="idref" href="#A:569"><span class="id" title="binder">A</span></a>} (<a id="ta:570" class="idref" href="#ta:570"><span class="id" title="binder">ta</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:568"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:569"><span class="id" title="variable">A</span></a>) : <a class="idref" href="ITree.Extra.IForest.html#A:569"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:569"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="a:571" class="idref" href="#a:571"><span class="id" title="binder">a</span></a> <a id="b:572" class="idref" href="#b:572"><span class="id" title="binder">b</span></a> ⇒ <a class="idref" href="ITree.Extra.IForest.html#a:571"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.Extra.IForest.html#b:572"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="ITree.Extra.IForest.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:571"><span class="id" title="variable">a</span></a> <a class="idref" href="ITree.Extra.IForest.html#ta:570"><span class="id" title="variable">ta</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Symmteric_EQ_REL" class="idref" href="#Symmteric_EQ_REL"><span class="id" title="lemma">Symmteric_EQ_REL</span></a> {<a id="E:573" class="idref" href="#E:573"><span class="id" title="binder">E</span></a> <a id="A:574" class="idref" href="#A:574"><span class="id" title="binder">A</span></a>} (<a id="ta:575" class="idref" href="#ta:575"><span class="id" title="binder">ta</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:573"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:574"><span class="id" title="variable">A</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.RelationClasses.html#Symmetric"><span class="id" title="class">Symmetric</span></a> (<a class="idref" href="ITree.Extra.IForest.html#EQ_REL"><span class="id" title="definition">EQ_REL</span></a> <a class="idref" href="ITree.Extra.IForest.html#ta:575"><span class="id" title="variable">ta</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> (<span class="id" title="var">EQ</span> &amp; <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Transitive_EQ_REL" class="idref" href="#Transitive_EQ_REL"><span class="id" title="lemma">Transitive_EQ_REL</span></a> {<a id="E:576" class="idref" href="#E:576"><span class="id" title="binder">E</span></a> <a id="A:577" class="idref" href="#A:577"><span class="id" title="binder">A</span></a>} (<a id="ta:578" class="idref" href="#ta:578"><span class="id" title="binder">ta</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:576"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:577"><span class="id" title="variable">A</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.RelationClasses.html#Transitive"><span class="id" title="class">Transitive</span></a> (<a class="idref" href="ITree.Extra.IForest.html#EQ_REL"><span class="id" title="definition">EQ_REL</span></a> <a class="idref" href="ITree.Extra.IForest.html#ta:578"><span class="id" title="variable">ta</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> (<span class="id" title="var">EQ1</span> &amp; <span class="id" title="var">H1</span>) (<span class="id" title="var">EQ2</span> &amp; <span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">EQ1</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="EQ_REL_Proper" class="idref" href="#EQ_REL_Proper"><span class="id" title="instance">EQ_REL_Proper</span></a> {<a id="E:579" class="idref" href="#E:579"><span class="id" title="binder">E</span></a> <a id="A:580" class="idref" href="#A:580"><span class="id" title="binder">A</span></a>} : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="ITree.Eq.Eqit.html#eutt"><span class="id" title="definition">eutt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#iff"><span class="id" title="definition">iff</span></a>) (@<a class="idref" href="ITree.Extra.IForest.html#EQ_REL"><span class="id" title="definition">EQ_REL</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:579"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:580"><span class="id" title="variable">A</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.IForest.html#EQ_REL"><span class="id" title="definition">EQ_REL</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">split</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="eq_relation" class="idref" href="#eq_relation"><span class="id" title="definition">eq_relation</span></a> {<a id="A:581" class="idref" href="#A:581"><span class="id" title="binder">A</span></a>} (<a id="R:582" class="idref" href="#R:582"><span class="id" title="binder">R</span></a> <a id="S:583" class="idref" href="#S:583"><span class="id" title="binder">S</span></a> : <a class="idref" href="ITree.Extra.IForest.html#A:581"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:581"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Extra.IForest.html#R:582"><span class="id" title="variable">R</span></a> <span class="id" title="notation">&lt;2=</span> <a class="idref" href="ITree.Extra.IForest.html#S:583"><span class="id" title="variable">S</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="ITree.Extra.IForest.html#S:583"><span class="id" title="variable">S</span></a> <span class="id" title="notation">&lt;2=</span> <a class="idref" href="ITree.Extra.IForest.html#R:582"><span class="id" title="variable">R</span></a>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="eutt_EQ_REL_Proper" class="idref" href="#eutt_EQ_REL_Proper"><span class="id" title="instance">eutt_EQ_REL_Proper</span></a> {<a id="E:584" class="idref" href="#E:584"><span class="id" title="binder">E</span></a>} {<a id="A:585" class="idref" href="#A:585"><span class="id" title="binder">A</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="ITree.Extra.IForest.html#eq_relation"><span class="id" title="definition">eq_relation</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="ITree.Eq.Eqit.html#eutt"><span class="id" title="definition">eutt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> @<a class="idref" href="ITree.Eq.Eqit.html#eutt"><span class="id" title="definition">eutt</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:584"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:585"><span class="id" title="variable">A</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:585"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#iff"><span class="id" title="definition">iff</span></a>) (<a class="idref" href="ITree.Eq.Eqit.html#eutt"><span class="id" title="definition">eutt</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;-  <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H0</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">H0</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Eq.Eqit.html#eqit_mon"><span class="id" title="lemma">eqit_mon</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>, <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Eq.Eqit.html#eqit_mon"><span class="id" title="lemma">eqit_mon</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eutt_EQ_REL_Reflexive_" class="idref" href="#eutt_EQ_REL_Reflexive_"><span class="id" title="lemma">eutt_EQ_REL_Reflexive_</span></a> {<a id="E:586" class="idref" href="#E:586"><span class="id" title="binder">E</span></a>} {<a id="A:587" class="idref" href="#A:587"><span class="id" title="binder">A</span></a>} (<a id="ta:588" class="idref" href="#ta:588"><span class="id" title="binder">ta</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:586"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:587"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="R:589" class="idref" href="#R:589"><span class="id" title="binder">R</span></a>, <span class="id" title="notation">(</span><a class="idref" href="ITree.Extra.IForest.html#EQ_REL"><span class="id" title="definition">EQ_REL</span></a> <a class="idref" href="ITree.Extra.IForest.html#ta:588"><span class="id" title="variable">ta</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">&lt;2=</span> <a class="idref" href="ITree.Extra.IForest.html#R:589"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Eq.Eqit.html#eutt"><span class="id" title="definition">eutt</span></a> <a class="idref" href="ITree.Extra.IForest.html#R:589"><span class="id" title="variable">R</span></a> <a class="idref" href="ITree.Extra.IForest.html#ta:588"><span class="id" title="variable">ta</span></a> <a class="idref" href="ITree.Extra.IForest.html#ta:588"><span class="id" title="variable">ta</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">ta</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">ginit</span>. <span class="id" title="var">gcofix</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">ta</span> <span class="id" title="var">HEQ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">gstep</span>. <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">genobs</span> <span class="id" title="var">ta</span> <span class="id" title="var">obs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">obs</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">HEQ</span>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqobs</span>. <span class="id" title="tactic">constructor</span> 1. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>. <span class="id" title="var">gbase</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HEQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">ta</span>); <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqobs</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Tau"><span class="id" title="abbreviation">Tau</span></a> <span class="id" title="var">t0</span> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <span class="id" title="var">t0</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HEQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">gbase</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">HEQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqobs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">PR</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">PR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span> 3. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eutt_EQ_REL_Reflexive" class="idref" href="#eutt_EQ_REL_Reflexive"><span class="id" title="lemma">eutt_EQ_REL_Reflexive</span></a> {<a id="E:590" class="idref" href="#E:590"><span class="id" title="binder">E</span></a>} {<a id="A:591" class="idref" href="#A:591"><span class="id" title="binder">A</span></a>} (<a id="ta:592" class="idref" href="#ta:592"><span class="id" title="binder">ta</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:590"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:591"><span class="id" title="variable">A</span></a>) : <a class="idref" href="ITree.Eq.Eqit.html#eutt"><span class="id" title="definition">eutt</span></a> (<a class="idref" href="ITree.Extra.IForest.html#EQ_REL"><span class="id" title="definition">EQ_REL</span></a> <a class="idref" href="ITree.Extra.IForest.html#ta:592"><span class="id" title="variable">ta</span></a>) <a class="idref" href="ITree.Extra.IForest.html#ta:592"><span class="id" title="variable">ta</span></a> <a class="idref" href="ITree.Extra.IForest.html#ta:592"><span class="id" title="variable">ta</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.IForest.html#eutt_EQ_REL_Reflexive_"><span class="id" title="lemma">eutt_EQ_REL_Reflexive_</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="RET_EQ" class="idref" href="#RET_EQ"><span class="id" title="definition">RET_EQ</span></a> {<a id="E:593" class="idref" href="#E:593"><span class="id" title="binder">E</span></a>} {<a id="A:594" class="idref" href="#A:594"><span class="id" title="binder">A</span></a>} (<a id="ta:595" class="idref" href="#ta:595"><span class="id" title="binder">ta</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:593"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:594"><span class="id" title="variable">A</span></a>) : <a class="idref" href="ITree.Extra.IForest.html#A:594"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:594"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="x:596" class="idref" href="#x:596"><span class="id" title="binder">x</span></a> <a id="y:597" class="idref" href="#y:597"><span class="id" title="binder">y</span></a> ⇒ <a class="idref" href="ITree.Extra.IForest.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.Extra.IForest.html#x:596"><span class="id" title="variable">x</span></a> <a class="idref" href="ITree.Extra.IForest.html#ta:595"><span class="id" title="variable">ta</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="ITree.Extra.IForest.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.Extra.IForest.html#y:597"><span class="id" title="variable">y</span></a> <a class="idref" href="ITree.Extra.IForest.html#ta:595"><span class="id" title="variable">ta</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;Figure&nbsp;7:&nbsp;3rd&nbsp;monad&nbsp;law,&nbsp;one&nbsp;direction&nbsp;bind&nbsp;associativity&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="bind_bind_iforest" class="idref" href="#bind_bind_iforest"><span class="id" title="lemma">bind_bind_iforest</span></a><br/>
&nbsp;&nbsp;: <span class="id" title="keyword">∀</span> {<a id="E:598" class="idref" href="#E:598"><span class="id" title="binder">E</span></a>} (<a id="A:599" class="idref" href="#A:599"><span class="id" title="binder">A</span></a> <a id="B:600" class="idref" href="#B:600"><span class="id" title="binder">B</span></a> <a id="C:601" class="idref" href="#C:601"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>) (<a id="PA:602" class="idref" href="#PA:602"><span class="id" title="binder">PA</span></a> : <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:598"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#A:599"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="KB:603" class="idref" href="#KB:603"><span class="id" title="binder">KB</span></a> : <a class="idref" href="ITree.Extra.IForest.html#A:599"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:598"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#B:600"><span class="id" title="variable">B</span></a>) (<a id="KC:604" class="idref" href="#KC:604"><span class="id" title="binder">KC</span></a> : <a class="idref" href="ITree.Extra.IForest.html#B:600"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:598"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#C:601"><span class="id" title="variable">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="PQOK:605" class="idref" href="#PQOK:605"><span class="id" title="binder">PQOK</span></a> : <a class="idref" href="ITree.Extra.IForest.html#eutt_closed"><span class="id" title="definition">eutt_closed</span></a> <a class="idref" href="ITree.Extra.IForest.html#PA:602"><span class="id" title="variable">PA</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="KBP:606" class="idref" href="#KBP:606"><span class="id" title="binder">KBP</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="ITree.Basics.Monad.html#eq1"><span class="id" title="definition">eq1</span></a>) <a class="idref" href="ITree.Extra.IForest.html#KB:603"><span class="id" title="variable">KB</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="KCP:607" class="idref" href="#KCP:607"><span class="id" title="binder">KCP</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="ITree.Basics.Monad.html#eq1"><span class="id" title="definition">eq1</span></a>) <a class="idref" href="ITree.Extra.IForest.html#KC:604"><span class="id" title="variable">KC</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="t:608" class="idref" href="#t:608"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#E:598"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.IForest.html#C:601"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="method">bind</span> (<span class="id" title="method">bind</span> <a class="idref" href="ITree.Extra.IForest.html#PA:602"><span class="id" title="variable">PA</span></a> <a class="idref" href="ITree.Extra.IForest.html#KB:603"><span class="id" title="variable">KB</span></a>) <a class="idref" href="ITree.Extra.IForest.html#KC:604"><span class="id" title="variable">KC</span></a>) <a class="idref" href="ITree.Extra.IForest.html#t:608"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> (<span class="id" title="method">bind</span> <a class="idref" href="ITree.Extra.IForest.html#PA:602"><span class="id" title="variable">PA</span></a> (<span class="id" title="keyword">fun</span> <a id="a:609" class="idref" href="#a:609"><span class="id" title="binder">a</span></a> ⇒ <span class="id" title="method">bind</span> (<a class="idref" href="ITree.Extra.IForest.html#KB:603"><span class="id" title="variable">KB</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:609"><span class="id" title="variable">a</span></a>) <a class="idref" href="ITree.Extra.IForest.html#KC:604"><span class="id" title="variable">KC</span></a>)) <a class="idref" href="ITree.Extra.IForest.html#t:608"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;PA&nbsp;~a&gt;&nbsp;KB&nbsp;a&nbsp;~b&gt;&nbsp;KC&nbsp;b&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">PA</span> <span class="id" title="var">KB</span> <span class="id" title="var">KC</span> <span class="id" title="var">PQOK</span> <span class="id" title="var">KBP</span> <span class="id" title="var">KCP</span> <span class="id" title="var">t</span> <span class="id" title="var">eqtt'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">eqtt'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">eqtt'</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">tb</span> &amp; <span class="id" title="var">kbc</span> &amp; (<span class="id" title="var">HBC</span> &amp; <span class="id" title="var">EQc</span> &amp; <span class="id" title="var">HRkbc</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HBC</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">ta</span> &amp; <span class="id" title="var">kab</span> &amp; <span class="id" title="var">HTA</span> &amp; <span class="id" title="var">EQb</span> &amp; <span class="id" title="var">HRkab</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">ta</span>. <span class="id" title="tactic">∃</span> (<span class="id" title="keyword">fun</span> <a id="a:611" class="idref" href="#a:611"><span class="id" title="binder">a</span></a> ⇒ <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> (<span class="id" title="var">kab</span> <a class="idref" href="ITree.Extra.IForest.html#a:610"><span class="id" title="variable">a</span></a>) <span class="id" title="var">kbc</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">auto</span>|]; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">EQc</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">EQc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">EQb</span>. <span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">EQb</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HRkbc</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">EQb</span> <span class="id" title="var">tb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="method">bind</span>, <a class="idref" href="ITree.Core.ITreeDefinition.html#Monad_itree"><span class="id" title="instance">Monad_itree</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_bind"><span class="id" title="lemma">Eqit.bind_bind</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">HRet</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<span class="id" title="var">kab</span> <span class="id" title="var">a</span>), <span class="id" title="var">kbc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">auto</span>|];<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">intros</span> <span class="id" title="var">b</span> <span class="id" title="var">HRET</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">HRkbc</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">EQb</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.IForest.html#Returns_bind"><span class="id" title="lemma">Returns_bind</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <a id="BIND_BIND_COUNTEREXAMPLE" class="idref" href="#BIND_BIND_COUNTEREXAMPLE"><span class="id" title="module">BIND_BIND_COUNTEREXAMPLE</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a id="BIND_BIND_COUNTEREXAMPLE.ND" class="idref" href="#BIND_BIND_COUNTEREXAMPLE.ND"><span class="id" title="inductive">ND</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;| <a id="BIND_BIND_COUNTEREXAMPLE.Pick" class="idref" href="#BIND_BIND_COUNTEREXAMPLE.Pick"><span class="id" title="constructor">Pick</span></a> : <a class="idref" href="ITree.Extra.IForest.html#ND:612"><span class="id" title="inductive">ND</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="BIND_BIND_COUNTEREXAMPLE.PA" class="idref" href="#BIND_BIND_COUNTEREXAMPLE.PA"><span class="id" title="definition">PA</span></a> : <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#BIND_BIND_COUNTEREXAMPLE.ND"><span class="id" title="inductive">ND</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> := <span class="id" title="keyword">fun</span> (<a id="ta:614" class="idref" href="#ta:614"><span class="id" title="binder">ta</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#BIND_BIND_COUNTEREXAMPLE.ND"><span class="id" title="inductive">ND</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) ⇒ <a class="idref" href="ITree.Extra.IForest.html#ta:614"><span class="id" title="variable">ta</span></a> <a class="idref" href="ITree.Basics.Monad.html#20d7a3de27e35f38017a31a5b4c235e8"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.Subevent.html#trigger"><span class="id" title="abbreviation">trigger</span></a> <a class="idref" href="ITree.Extra.IForest.html#BIND_BIND_COUNTEREXAMPLE.Pick"><span class="id" title="constructor">Pick</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="BIND_BIND_COUNTEREXAMPLE.KB" class="idref" href="#BIND_BIND_COUNTEREXAMPLE.KB"><span class="id" title="definition">KB</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#BIND_BIND_COUNTEREXAMPLE.ND"><span class="id" title="inductive">ND</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="b:615" class="idref" href="#b:615"><span class="id" title="binder">b</span></a> ⇒ <a class="idref" href="ITree.Extra.IForest.html#BIND_BIND_COUNTEREXAMPLE.PA"><span class="id" title="definition">PA</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="BIND_BIND_COUNTEREXAMPLE.KC" class="idref" href="#BIND_BIND_COUNTEREXAMPLE.KC"><span class="id" title="definition">KC</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.IForest.html#iforest"><span class="id" title="definition">iforest</span></a> <a class="idref" href="ITree.Extra.IForest.html#BIND_BIND_COUNTEREXAMPLE.ND"><span class="id" title="inductive">ND</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="b:616" class="idref" href="#b:616"><span class="id" title="binder">b</span></a> ⇒ <span class="id" title="keyword">if</span> <a class="idref" href="ITree.Extra.IForest.html#b:616"><span class="id" title="variable">b</span></a> <span class="id" title="keyword">then</span> (<span class="id" title="keyword">fun</span> <a id="tc:618" class="idref" href="#tc:618"><span class="id" title="binder">tc</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#BIND_BIND_COUNTEREXAMPLE.ND"><span class="id" title="inductive">ND</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.IForest.html#tc:618"><span class="id" title="variable">tc</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <span class="id" title="method">ret</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.IForest.html#tc:618"><span class="id" title="variable">tc</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <span class="id" title="method">ret</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">else</span> (<span class="id" title="keyword">fun</span> <a id="tc:617" class="idref" href="#tc:617"><span class="id" title="binder">tc</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#BIND_BIND_COUNTEREXAMPLE.ND"><span class="id" title="inductive">ND</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> ⇒ <a class="idref" href="ITree.Extra.IForest.html#tc:617"><span class="id" title="variable">tc</span></a> <a class="idref" href="ITree.Basics.Monad.html#20d7a3de27e35f38017a31a5b4c235e8"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.spin"><span class="id" title="definition">ITree.spin</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="BIND_BIND_COUNTEREXAMPLE.t" class="idref" href="#BIND_BIND_COUNTEREXAMPLE.t"><span class="id" title="definition">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.IForest.html#BIND_BIND_COUNTEREXAMPLE.ND"><span class="id" title="inductive">ND</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">bind</span> (<a class="idref" href="ITree.Core.Subevent.html#trigger"><span class="id" title="abbreviation">trigger</span></a> <a class="idref" href="ITree.Extra.IForest.html#BIND_BIND_COUNTEREXAMPLE.Pick"><span class="id" title="constructor">Pick</span></a>) (<span class="id" title="keyword">fun</span> (<a id="b:619" class="idref" href="#b:619"><span class="id" title="binder">b</span></a>:<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) ⇒ <span class="id" title="keyword">if</span> <a class="idref" href="ITree.Extra.IForest.html#b:619"><span class="id" title="variable">b</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <span class="id" title="method">bind</span> (<a class="idref" href="ITree.Core.Subevent.html#trigger"><span class="id" title="abbreviation">trigger</span></a> <a class="idref" href="ITree.Extra.IForest.html#BIND_BIND_COUNTEREXAMPLE.Pick"><span class="id" title="constructor">Pick</span></a>) (<span class="id" title="keyword">fun</span> (<a id="x:621" class="idref" href="#x:621"><span class="id" title="binder">x</span></a>:<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) ⇒ <span class="id" title="keyword">if</span> <a class="idref" href="ITree.Extra.IForest.html#x:621"><span class="id" title="variable">x</span></a> <span class="id" title="keyword">then</span> <span class="id" title="method">ret</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.spin"><span class="id" title="definition">ITree.spin</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="method">bind</span> (<a class="idref" href="ITree.Core.Subevent.html#trigger"><span class="id" title="abbreviation">trigger</span></a> <a class="idref" href="ITree.Extra.IForest.html#BIND_BIND_COUNTEREXAMPLE.Pick"><span class="id" title="constructor">Pick</span></a>) (<span class="id" title="keyword">fun</span> (<a id="x:620" class="idref" href="#x:620"><span class="id" title="binder">x</span></a>:<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>)  ⇒ <span class="id" title="keyword">if</span> <a class="idref" href="ITree.Extra.IForest.html#x:620"><span class="id" title="variable">x</span></a> <span class="id" title="keyword">then</span> <span class="id" title="method">ret</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.spin"><span class="id" title="definition">ITree.spin</span></a>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="BIND_BIND_COUNTEREXAMPLE.bind_right_assoc" class="idref" href="#BIND_BIND_COUNTEREXAMPLE.bind_right_assoc"><span class="id" title="lemma">bind_right_assoc</span></a> : <span class="id" title="method">bind</span> <a class="idref" href="ITree.Extra.IForest.html#BIND_BIND_COUNTEREXAMPLE.PA"><span class="id" title="definition">PA</span></a> (<span class="id" title="keyword">fun</span> <a id="a:622" class="idref" href="#a:622"><span class="id" title="binder">a</span></a> ⇒ <span class="id" title="method">bind</span> (<a class="idref" href="ITree.Extra.IForest.html#BIND_BIND_COUNTEREXAMPLE.KB"><span class="id" title="definition">KB</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:622"><span class="id" title="variable">a</span></a>) <a class="idref" href="ITree.Extra.IForest.html#BIND_BIND_COUNTEREXAMPLE.KC"><span class="id" title="definition">KC</span></a>) <a class="idref" href="ITree.Extra.IForest.html#BIND_BIND_COUNTEREXAMPLE.t"><span class="id" title="definition">t</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<a class="idref" href="ITree.Core.Subevent.html#trigger"><span class="id" title="abbreviation">trigger</span></a> <a class="idref" href="ITree.Extra.IForest.html#BIND_BIND_COUNTEREXAMPLE.Pick"><span class="id" title="constructor">Pick</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<span class="id" title="keyword">fun</span> (<a id="b:626" class="idref" href="#b:626"><span class="id" title="binder">b</span></a>:<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) ⇒ <span class="id" title="keyword">if</span> <a class="idref" href="ITree.Extra.IForest.html#b:623"><span class="id" title="variable">b</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> (<span class="id" title="method">bind</span> (<a class="idref" href="ITree.Core.Subevent.html#trigger"><span class="id" title="abbreviation">trigger</span></a> <a class="idref" href="ITree.Extra.IForest.html#BIND_BIND_COUNTEREXAMPLE.Pick"><span class="id" title="constructor">Pick</span></a>) (<span class="id" title="keyword">fun</span> (<a id="x:628" class="idref" href="#x:628"><span class="id" title="binder">x</span></a>:<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) ⇒ <span class="id" title="keyword">if</span> <a class="idref" href="ITree.Extra.IForest.html#x:625"><span class="id" title="variable">x</span></a> <span class="id" title="keyword">then</span> <span class="id" title="method">ret</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.spin"><span class="id" title="definition">ITree.spin</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> (<span class="id" title="method">bind</span> (<a class="idref" href="ITree.Core.Subevent.html#trigger"><span class="id" title="abbreviation">trigger</span></a> <a class="idref" href="ITree.Extra.IForest.html#BIND_BIND_COUNTEREXAMPLE.Pick"><span class="id" title="constructor">Pick</span></a>) (<span class="id" title="keyword">fun</span> (<a id="x:627" class="idref" href="#x:627"><span class="id" title="binder">x</span></a>:<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) ⇒ <span class="id" title="keyword">if</span> <a class="idref" href="ITree.Extra.IForest.html#x:624"><span class="id" title="variable">x</span></a> <span class="id" title="keyword">then</span> <span class="id" title="method">ret</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.spin"><span class="id" title="definition">ITree.spin</span></a>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span>. <span class="id" title="tactic">∃</span> (<a class="idref" href="ITree.Core.Subevent.html#trigger"><span class="id" title="abbreviation">trigger</span></a> <a class="idref" href="ITree.Extra.IForest.html#BIND_BIND_COUNTEREXAMPLE.Pick"><span class="id" title="constructor">Pick</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<span class="id" title="keyword">fun</span> (<a id="x:630" class="idref" href="#x:630"><span class="id" title="binder">x</span></a>:<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) ⇒ <span class="id" title="keyword">if</span> <span class="id" title="var">a</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> (<span class="id" title="keyword">if</span> <a class="idref" href="ITree.Extra.IForest.html#x:629"><span class="id" title="variable">x</span></a> <span class="id" title="keyword">then</span> <span class="id" title="method">ret</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.spin"><span class="id" title="definition">ITree.spin</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> (<span class="id" title="keyword">if</span> <a class="idref" href="ITree.Extra.IForest.html#x:629"><span class="id" title="variable">x</span></a> <span class="id" title="keyword">then</span> <span class="id" title="method">ret</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.spin"><span class="id" title="definition">ITree.spin</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="BIND_BIND_COUNTEREXAMPLE.not_bind_left_assoc" class="idref" href="#BIND_BIND_COUNTEREXAMPLE.not_bind_left_assoc"><span class="id" title="lemma">not_bind_left_assoc</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">¬</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">(</span></a><span class="id" title="method">bind</span> (<span class="id" title="method">bind</span> <a class="idref" href="ITree.Extra.IForest.html#BIND_BIND_COUNTEREXAMPLE.PA"><span class="id" title="definition">PA</span></a> <a class="idref" href="ITree.Extra.IForest.html#BIND_BIND_COUNTEREXAMPLE.KB"><span class="id" title="definition">KB</span></a>) <a class="idref" href="ITree.Extra.IForest.html#BIND_BIND_COUNTEREXAMPLE.KC"><span class="id" title="definition">KC</span></a> <a class="idref" href="ITree.Extra.IForest.html#BIND_BIND_COUNTEREXAMPLE.t"><span class="id" title="definition">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">ta</span> &amp; <span class="id" title="var">k</span> &amp; <span class="id" title="var">HB</span> &amp; <span class="id" title="var">HEQ</span> &amp; <span class="id" title="var">HRET</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HB</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">tb</span> &amp; <span class="id" title="var">kb</span> &amp; <span class="id" title="var">HX</span> &amp; <span class="id" title="var">HEQ'</span> &amp; <span class="id" title="var">HRET'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HX</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">HX</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">HX</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HRET'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">tb</span> <span class="id" title="var">HX</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">HEQ'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HEQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.IForest.html#BIND_BIND_COUNTEREXAMPLE.t"><span class="id" title="definition">t</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HEQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="method">bind</span>, <a class="idref" href="ITree.Core.ITreeDefinition.html#Monad_itree"><span class="id" title="instance">Monad_itree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HEQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_bind"><span class="id" title="lemma">Eqit.bind_bind</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HEQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="keyword">∀</span> <a id="r:636" class="idref" href="#r:636"><span class="id" title="binder">r</span></a>, <a class="idref" href="ITree.Extra.IForest.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="ITree.Extra.IForest.html#r:631"><span class="id" title="variable">r</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.trigger"><span class="id" title="definition">ITree.trigger</span></a> <a class="idref" href="ITree.Extra.IForest.html#BIND_BIND_COUNTEREXAMPLE.Pick"><span class="id" title="constructor">Pick</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Eq.Eqit.html#eutt"><span class="id" title="definition">eutt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> ((<span class="id" title="keyword">fun</span> <a id="b:637" class="idref" href="#b:637"><span class="id" title="binder">b</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="ITree.Extra.IForest.html#b:632"><span class="id" title="variable">b</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> (<a class="idref" href="ITree.Core.Subevent.html#trigger"><span class="id" title="abbreviation">trigger</span></a> <a class="idref" href="ITree.Extra.IForest.html#BIND_BIND_COUNTEREXAMPLE.Pick"><span class="id" title="constructor">Pick</span></a>) (<span class="id" title="keyword">fun</span> <a id="x:639" class="idref" href="#x:639"><span class="id" title="binder">x</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> ⇒ <span class="id" title="keyword">if</span> <a class="idref" href="ITree.Extra.IForest.html#x:634"><span class="id" title="variable">x</span></a> <span class="id" title="keyword">then</span> <span class="id" title="method">ret</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.spin"><span class="id" title="definition">ITree.spin</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> (<a class="idref" href="ITree.Core.Subevent.html#trigger"><span class="id" title="abbreviation">trigger</span></a> <a class="idref" href="ITree.Extra.IForest.html#BIND_BIND_COUNTEREXAMPLE.Pick"><span class="id" title="constructor">Pick</span></a>) (<span class="id" title="keyword">fun</span> <a id="x:638" class="idref" href="#x:638"><span class="id" title="binder">x</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> ⇒ <span class="id" title="keyword">if</span> <a class="idref" href="ITree.Extra.IForest.html#x:633"><span class="id" title="variable">x</span></a> <span class="id" title="keyword">then</span> <span class="id" title="method">ret</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.spin"><span class="id" title="definition">ITree.spin</span></a>)) <a class="idref" href="ITree.Extra.IForest.html#r:631"><span class="id" title="variable">r</span></a>) ((<span class="id" title="keyword">fun</span> <a id="r:640" class="idref" href="#r:640"><span class="id" title="binder">r</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> ⇒ <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> (<span class="id" title="var">kb</span> <a class="idref" href="ITree.Extra.IForest.html#r:635"><span class="id" title="variable">r</span></a>) <span class="id" title="var">k</span>) <a class="idref" href="ITree.Extra.IForest.html#r:631"><span class="id" title="variable">r</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.IForest.html#eqit_bind_Returns_inv"><span class="id" title="lemma">eqit_bind_Returns_inv</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">HEQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Extra.IForest.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.trigger"><span class="id" title="definition">ITree.trigger</span></a> <a class="idref" href="ITree.Extra.IForest.html#BIND_BIND_COUNTEREXAMPLE.Pick"><span class="id" title="constructor">Pick</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">unfold</span> <span class="id" title="var">trigger</span>. <span class="id" title="tactic">econstructor</span> 3. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">constructor</span> 1. <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Extra.IForest.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.trigger"><span class="id" title="definition">ITree.trigger</span></a> <a class="idref" href="ITree.Extra.IForest.html#BIND_BIND_COUNTEREXAMPLE.Pick"><span class="id" title="constructor">Pick</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">unfold</span> <span class="id" title="var">trigger</span>. <span class="id" title="tactic">econstructor</span> 3. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">constructor</span> 1. <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Extra.IForest.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.trigger"><span class="id" title="definition">ITree.trigger</span></a> <a class="idref" href="ITree.Extra.IForest.html#BIND_BIND_COUNTEREXAMPLE.Pick"><span class="id" title="constructor">Pick</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">unfold</span> <span class="id" title="var">trigger</span>. <span class="id" title="tactic">econstructor</span> 3. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">constructor</span> 1. <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Extra.IForest.html#Returns"><span class="id" title="inductive">Returns</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.trigger"><span class="id" title="definition">ITree.trigger</span></a> <a class="idref" href="ITree.Extra.IForest.html#BIND_BIND_COUNTEREXAMPLE.Pick"><span class="id" title="constructor">Pick</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">unfold</span> <span class="id" title="var">trigger</span>. <span class="id" title="tactic">econstructor</span> 3. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">constructor</span> 1. <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">HRET'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">HRET'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H3</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.IForest.html#eqit_bind_Returns_inv"><span class="id" title="lemma">eqit_bind_Returns_inv</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">r</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span> .<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#eqit_inv_Ret"><span class="id" title="lemma">eqit_inv_Ret</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">unfold</span> <span class="id" title="var">trigger</span>. <span class="id" title="tactic">econstructor</span> 3. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">constructor</span> 1. <span class="id" title="tactic">reflexivity</span>. }<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="BIND_BIND_COUNTEREXAMPLE.bind_bind_counterexample" class="idref" href="#BIND_BIND_COUNTEREXAMPLE.bind_bind_counterexample"><span class="id" title="lemma">bind_bind_counterexample</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="t:641" class="idref" href="#t:641"><span class="id" title="binder">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <span class="id" title="method">bind</span> <a class="idref" href="ITree.Extra.IForest.html#BIND_BIND_COUNTEREXAMPLE.PA"><span class="id" title="definition">PA</span></a> (<span class="id" title="keyword">fun</span> <a id="a:642" class="idref" href="#a:642"><span class="id" title="binder">a</span></a> ⇒ <span class="id" title="method">bind</span> (<a class="idref" href="ITree.Extra.IForest.html#BIND_BIND_COUNTEREXAMPLE.KB"><span class="id" title="definition">KB</span></a> <a class="idref" href="ITree.Extra.IForest.html#a:642"><span class="id" title="variable">a</span></a>) <a class="idref" href="ITree.Extra.IForest.html#BIND_BIND_COUNTEREXAMPLE.KC"><span class="id" title="definition">KC</span></a>) <a class="idref" href="ITree.Extra.IForest.html#t:641"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">¬</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">(</span></a><span class="id" title="method">bind</span> (<span class="id" title="method">bind</span> <a class="idref" href="ITree.Extra.IForest.html#BIND_BIND_COUNTEREXAMPLE.PA"><span class="id" title="definition">PA</span></a> <a class="idref" href="ITree.Extra.IForest.html#BIND_BIND_COUNTEREXAMPLE.KB"><span class="id" title="definition">KB</span></a>) <a class="idref" href="ITree.Extra.IForest.html#BIND_BIND_COUNTEREXAMPLE.KC"><span class="id" title="definition">KC</span></a> <a class="idref" href="ITree.Extra.IForest.html#t:641"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <a class="idref" href="ITree.Extra.IForest.html#BIND_BIND_COUNTEREXAMPLE.t"><span class="id" title="definition">t</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.IForest.html#BIND_BIND_COUNTEREXAMPLE.bind_right_assoc"><span class="id" title="lemma">bind_right_assoc</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.IForest.html#BIND_BIND_COUNTEREXAMPLE.not_bind_left_assoc"><span class="id" title="lemma">not_bind_left_assoc</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="ITree.Extra.IForest.html#BIND_BIND_COUNTEREXAMPLE"><span class="id" title="module">BIND_BIND_COUNTEREXAMPLE</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
