<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="https://github.com/DeepSpec/InteractionTrees">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">ITree.Extra.ITrace.ITraceFacts</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#"><span class="id" title="library">Morphisms</span></a>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ITree</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Axioms.html#"><span class="id" title="library">Axioms</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.ITree.html#"><span class="id" title="library">ITree</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.ITreeFacts.html#"><span class="id" title="library">ITreeFacts</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Eq.Rutt.html#"><span class="id" title="library">Eq.Rutt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Props.Infinite.html#"><span class="id" title="library">Props.Infinite</span></a>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ITree.Extra</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#"><span class="id" title="library">ITrace.ITraceDefinition</span></a><br/>
.<br/>

<br/>
<span class="id" title="keyword">Set Implicit Arguments</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Paco</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">paco</span>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="ITree.Basics.Basics.html#Monads"><span class="id" title="module">Monads</span></a>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="module">MonadNotation</span>.<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">monad_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="classic_empty" class="idref" href="#classic_empty"><span class="id" title="lemma">classic_empty</span></a> : <span class="id" title="keyword">∀</span> (<a id="A:1" class="idref" href="#A:1"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>), ( <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="e:2" class="idref" href="#e:2"><span class="id" title="binder">e</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#A:1"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#A:1"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Basics.Basics.html#void"><span class="id" title="abbreviation">void</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a> ).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Axioms.html#classic"><span class="id" title="definition">classic</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="a:4" class="idref" href="#a:4"><span class="id" title="binder">a</span></a> : <span class="id" title="var">A</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Basics.Basics.html#void"><span class="id" title="abbreviation">void</span></a>); <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exfalso</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="REvRef_inv" class="idref" href="#REvRef_inv"><span class="id" title="lemma">REvRef_inv</span></a> {<a id="E:5" class="idref" href="#E:5"><span class="id" title="binder">E</span></a> <a id="A:6" class="idref" href="#A:6"><span class="id" title="binder">A</span></a>} (<a id="e:7" class="idref" href="#e:7"><span class="id" title="binder">e</span></a> <a id="e':8" class="idref" href="#e':8"><span class="id" title="binder">e'</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:5"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#A:6"><span class="id" title="variable">A</span></a>) (<a id="a:9" class="idref" href="#a:9"><span class="id" title="binder">a</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#A:6"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#REvRef"><span class="id" title="inductive">REvRef</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:5"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#A:6"><span class="id" title="variable">A</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evans"><span class="id" title="constructor">evans</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#A:6"><span class="id" title="variable">A</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#e:7"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#a:9"><span class="id" title="variable">a</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#e':8"><span class="id" title="variable">e'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#e:7"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#e':8"><span class="id" title="variable">e'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">x</span>. <span class="id" title="var">ddestruction</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="rer_inv" class="idref" href="#rer_inv"><span class="id" title="lemma">rer_inv</span></a> {<a id="E:10" class="idref" href="#E:10"><span class="id" title="binder">E</span></a> <a id="A:11" class="idref" href="#A:11"><span class="id" title="binder">A</span></a>} <a id="ea:12" class="idref" href="#ea:12"><span class="id" title="binder">ea</span></a> <a id="e:13" class="idref" href="#e:13"><span class="id" title="binder">e</span></a><br/>
&nbsp;&nbsp;: <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#REvRef"><span class="id" title="inductive">REvRef</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:10"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#A:11"><span class="id" title="variable">A</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#ea:12"><span class="id" title="variable">ea</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#e:13"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="a:14" class="idref" href="#a:14"><span class="id" title="binder">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#ea:12"><span class="id" title="variable">ea</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evans"><span class="id" title="constructor">evans</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#A:11"><span class="id" title="variable">A</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#e:13"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#a:14"><span class="id" title="variable">a</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">ddestruction</span>. <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">enough</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Basics.Basics.html#void"><span class="id" title="abbreviation">void</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="var">contradiction</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="may_converge_trace" class="idref" href="#may_converge_trace"><span class="id" title="lemma">may_converge_trace</span></a> : <span class="id" title="keyword">∀</span> (<a id="E:15" class="idref" href="#E:15"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:16" class="idref" href="#R:16"><span class="id" title="binder">R</span></a> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="b:17" class="idref" href="#b:17"><span class="id" title="binder">b</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:15"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:16"><span class="id" title="variable">R</span></a>) (<a id="r1:18" class="idref" href="#r1:18"><span class="id" title="binder">r1</span></a> <a id="r2:19" class="idref" href="#r2:19"><span class="id" title="binder">r2</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:16"><span class="id" title="variable">R</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Props.Infinite.html#may_converge"><span class="id" title="inductive">may_converge</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#r1:18"><span class="id" title="variable">r1</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:17"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Props.Infinite.html#may_converge"><span class="id" title="inductive">may_converge</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#r2:19"><span class="id" title="variable">r2</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:17"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#r1:18"><span class="id" title="variable">r1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#r2:19"><span class="id" title="variable">r2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="var">pinversion</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="var">pinversion</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHmay_converge</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">contra_void</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">pinversion</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>; [ | <span class="id" title="var">contradiction</span> ]. <span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pinversion</span> <span class="id" title="var">H3</span>. <span class="id" title="var">ddestruction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">enough</span> (<span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <span class="id" title="var">k0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>); <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">REL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">e0</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">b0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHmay_converge</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pinversion</span> <span class="id" title="var">H2</span>. <span class="id" title="var">ddestruction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="var">enough</span> (<span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <span class="id" title="var">k0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>); <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">REL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">auto</span>; <span class="id" title="var">contra_void</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">b0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_nil" class="idref" href="#finite_nil"><span class="id" title="lemma">finite_nil</span></a> {<a id="E:20" class="idref" href="#E:20"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>} : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#finite"><span class="id" title="definition">finite</span></a> (@<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#Nil"><span class="id" title="definition">Nil</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:20"><span class="id" title="variable">E</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Props.Infinite.html#conv_ret"><span class="id" title="constructor">conv_ret</span></a>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#Nil"><span class="id" title="definition">Nil</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_list_to_stream" class="idref" href="#finite_list_to_stream"><span class="id" title="lemma">finite_list_to_stream</span></a> : <span class="id" title="keyword">∀</span> (<a id="E:21" class="idref" href="#E:21"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="l:22" class="idref" href="#l:22"><span class="id" title="binder">l</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#ev_list"><span class="id" title="definition">ev_list</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:21"><span class="id" title="variable">E</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#finite"><span class="id" title="definition">finite</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#ev_list_to_stream"><span class="id" title="definition">ev_list_to_stream</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#l:22"><span class="id" title="variable">l</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">red</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Props.Infinite.html#conv_vis"><span class="id" title="constructor">conv_vis</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_stream_list" class="idref" href="#finite_stream_list"><span class="id" title="lemma">finite_stream_list</span></a> : <span class="id" title="keyword">∀</span> (<a id="E:23" class="idref" href="#E:23"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="s:24" class="idref" href="#s:24"><span class="id" title="binder">s</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#ev_stream"><span class="id" title="definition">ev_stream</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:23"><span class="id" title="variable">E</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#finite"><span class="id" title="definition">finite</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#s:24"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="l:25" class="idref" href="#l:25"><span class="id" title="binder">l</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#s:24"><span class="id" title="variable">s</span></a> <a class="idref" href="ITree.Basics.Monad.html#20d7a3de27e35f38017a31a5b4c235e8"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#ev_list_to_stream"><span class="id" title="definition">ev_list_to_stream</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#l:25"><span class="id" title="variable">l</span></a>)%<span class="id" title="var">itree</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">∃</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">IHmay_converge</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">l</span> <span class="id" title="var">Hl</span>]. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#ev_list"><span class="id" title="definition">ev_list</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">e</span> <span class="id" title="var">l</span>). <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">v</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="var">contradiction</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="append_vis" class="idref" href="#append_vis"><span class="id" title="lemma">append_vis</span></a> : <span class="id" title="keyword">∀</span> (<a id="E:26" class="idref" href="#E:26"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:27" class="idref" href="#R:27"><span class="id" title="binder">R</span></a> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="e:28" class="idref" href="#e:28"><span class="id" title="binder">e</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#EvAns"><span class="id" title="inductive">EvAns</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:26"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>) (<a id="k:29" class="idref" href="#k:29"><span class="id" title="binder">k</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#ev_stream"><span class="id" title="definition">ev_stream</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:26"><span class="id" title="variable">E</span></a>) (<a id="b:30" class="idref" href="#b:30"><span class="id" title="binder">b</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:26"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:27"><span class="id" title="variable">R</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#e:28"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#k:29"><span class="id" title="variable">k</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:30"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#e:28"><span class="id" title="variable">e</span></a> (<span class="id" title="keyword">fun</span> <a id="a:31" class="idref" href="#a:31"><span class="id" title="binder">a</span></a> ⇒ <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#k:29"><span class="id" title="variable">k</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#a:31"><span class="id" title="variable">a</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:30"><span class="id" title="variable">b</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">R</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#append"><span class="id" title="definition">append</span></a>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">enough</span> ( (<a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> (<span class="id" title="var">k</span> <span class="id" title="var">v</span>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> ⇒ <span class="id" title="var">b</span>) <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a>  <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> (<span class="id" title="var">k</span> <span class="id" title="var">v</span>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> ⇒ <span class="id" title="var">b</span>) <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">)</span></a> ) ); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="proper_append" class="idref" href="#proper_append"><span class="id" title="instance">proper_append</span></a> {<a id="E:32" class="idref" href="#E:32"><span class="id" title="binder">E</span></a> <a id="R:33" class="idref" href="#R:33"><span class="id" title="binder">R</span></a>} : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (@<a class="idref" href="ITree.Eq.Eqit.html#eutt"><span class="id" title="definition">eutt</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#EvAns"><span class="id" title="inductive">EvAns</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:32"><span class="id" title="variable">E</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> @<a class="idref" href="ITree.Eq.Eqit.html#eutt"><span class="id" title="definition">eutt</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#EvAns"><span class="id" title="inductive">EvAns</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:32"><span class="id" title="variable">E</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:33"><span class="id" title="variable">R</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:33"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="ITree.Eq.Eqit.html#eutt"><span class="id" title="definition">eutt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>) (@<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#append"><span class="id" title="definition">append</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:32"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:33"><span class="id" title="variable">R</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">log1</span> <span class="id" title="var">log2</span> <span class="id" title="var">Hlog</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">Hb</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#append"><span class="id" title="definition">append</span></a>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlog</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Eq.Eqit.html#eutt_clo_bind"><span class="id" title="lemma">eutt_clo_bind</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="may_converge_append" class="idref" href="#may_converge_append"><span class="id" title="lemma">may_converge_append</span></a> : <span class="id" title="keyword">∀</span> (<a id="E:34" class="idref" href="#E:34"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:35" class="idref" href="#R:35"><span class="id" title="binder">R</span></a> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="log:36" class="idref" href="#log:36"><span class="id" title="binder">log</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#ev_stream"><span class="id" title="definition">ev_stream</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:34"><span class="id" title="variable">E</span></a>) (<a id="r:37" class="idref" href="#r:37"><span class="id" title="binder">r</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:35"><span class="id" title="variable">R</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#finite"><span class="id" title="definition">finite</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#log:36"><span class="id" title="variable">log</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Props.Infinite.html#may_converge"><span class="id" title="inductive">may_converge</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#r:37"><span class="id" title="variable">r</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#log:36"><span class="id" title="variable">log</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#r:37"><span class="id" title="variable">r</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#append"><span class="id" title="definition">append</span></a>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_l"><span class="id" title="lemma">bind_ret_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#append_vis"><span class="id" title="lemma">append_vis</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Props.Infinite.html#conv_vis"><span class="id" title="constructor">conv_vis</span></a>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="var">contradiction</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="converge_itrace_ev_list" class="idref" href="#converge_itrace_ev_list"><span class="id" title="lemma">converge_itrace_ev_list</span></a> : <span class="id" title="keyword">∀</span> (<a id="E:38" class="idref" href="#E:38"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:39" class="idref" href="#R:39"><span class="id" title="binder">R</span></a> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="b:40" class="idref" href="#b:40"><span class="id" title="binder">b</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:38"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:39"><span class="id" title="variable">R</span></a>) (<a id="r:41" class="idref" href="#r:41"><span class="id" title="binder">r</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:39"><span class="id" title="variable">R</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Props.Infinite.html#may_converge"><span class="id" title="inductive">may_converge</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#r:41"><span class="id" title="variable">r</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:40"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="log:42" class="idref" href="#log:42"><span class="id" title="binder">log</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#ev_list_to_stream"><span class="id" title="definition">ev_list_to_stream</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#log:42"><span class="id" title="variable">log</span></a><a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">)</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#r:41"><span class="id" title="variable">r</span></a> <a class="idref" href="ITree.Basics.Monad.html#20d7a3de27e35f38017a31a5b4c235e8"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:40"><span class="id" title="variable">b</span></a>)%<span class="id" title="var">itree</span> .<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">∃</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">IHmay_converge</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">log</span> <span class="id" title="var">Hlog</span>]. <span class="id" title="tactic">inversion</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">e</span> <span class="id" title="var">log</span>). <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#append_vis"><span class="id" title="lemma">append_vis</span></a>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hlog</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="var">contradiction</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="classic_converge_itrace" class="idref" href="#classic_converge_itrace"><span class="id" title="lemma">classic_converge_itrace</span></a> : <span class="id" title="keyword">∀</span> (<a id="E:43" class="idref" href="#E:43"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:44" class="idref" href="#R:44"><span class="id" title="binder">R</span></a> : <span class="id" title="keyword">Type</span>) (<a id="b:45" class="idref" href="#b:45"><span class="id" title="binder">b</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:43"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:44"><span class="id" title="variable">R</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="r:46" class="idref" href="#r:46"><span class="id" title="binder">r</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="log:47" class="idref" href="#log:47"><span class="id" title="binder">log</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> ( <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#ev_list_to_stream"><span class="id" title="definition">ev_list_to_stream</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#log:47"><span class="id" title="variable">log</span></a><a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">)</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#r:46"><span class="id" title="variable">r</span></a> <a class="idref" href="ITree.Basics.Monad.html#20d7a3de27e35f38017a31a5b4c235e8"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:45"><span class="id" title="variable">b</span></a>)%<span class="id" title="var">itree</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="ITree.Props.Infinite.html#all_infinite"><span class="id" title="definition">all_infinite</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:45"><span class="id" title="variable">b</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Props.Infinite.html#classic_converge"><span class="id" title="lemma">classic_converge</span></a> <span class="id" title="var">b</span>); <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">r</span> <span class="id" title="var">Hr</span>]. <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">r</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#converge_itrace_ev_list"><span class="id" title="lemma">converge_itrace_ev_list</span></a>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#classic_converge_itrace"><span class="id" title="lemma">classic_converge_itrace</span></a> {<span class="id" title="var">E</span>} {<span class="id" title="var">R</span>}.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="append_nil" class="idref" href="#append_nil"><span class="id" title="lemma">append_nil</span></a> : <span class="id" title="keyword">∀</span> (<a id="E:48" class="idref" href="#E:48"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:49" class="idref" href="#R:49"><span class="id" title="binder">R</span></a> : <span class="id" title="keyword">Type</span>) (<a id="b:50" class="idref" href="#b:50"><span class="id" title="binder">b</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:48"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:49"><span class="id" title="variable">R</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:50"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Basics.Monad.html#20d7a3de27e35f38017a31a5b4c235e8"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:50"><span class="id" title="variable">b</span></a>)%<span class="id" title="var">itree</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#append"><span class="id" title="definition">append</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_l"><span class="id" title="lemma">bind_ret_l</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="append_assoc" class="idref" href="#append_assoc"><span class="id" title="lemma">append_assoc</span></a> : <span class="id" title="keyword">∀</span> (<a id="E:51" class="idref" href="#E:51"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:52" class="idref" href="#R:52"><span class="id" title="binder">R</span></a> : <span class="id" title="keyword">Type</span>) (<a id="b:53" class="idref" href="#b:53"><span class="id" title="binder">b</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:51"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:52"><span class="id" title="variable">R</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="log:54" class="idref" href="#log:54"><span class="id" title="binder">log</span></a> <a id="log':55" class="idref" href="#log':55"><span class="id" title="binder">log'</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#ev_list"><span class="id" title="definition">ev_list</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:51"><span class="id" title="variable">E</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#ev_list_to_stream"><span class="id" title="definition">ev_list_to_stream</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#log:54"><span class="id" title="variable">log</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#log':55"><span class="id" title="variable">log'</span></a>)%<span class="id" title="var">list</span> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:53"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#ev_list_to_stream"><span class="id" title="definition">ev_list_to_stream</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#log:54"><span class="id" title="variable">log</span></a><a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">)</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#ev_list_to_stream"><span class="id" title="definition">ev_list_to_stream</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#log':55"><span class="id" title="variable">log'</span></a><a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">)</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:53"><span class="id" title="variable">b</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">R</span> <span class="id" title="var">b</span> <span class="id" title="var">log</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">log</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#append_nil"><span class="id" title="lemma">append_nil</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#append_vis"><span class="id" title="lemma">append_vis</span></a>. <span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">IHlog</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#append_vis"><span class="id" title="lemma">append_vis</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="append_div" class="idref" href="#append_div"><span class="id" title="lemma">append_div</span></a> : <span class="id" title="keyword">∀</span> (<a id="E:56" class="idref" href="#E:56"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:57" class="idref" href="#R:57"><span class="id" title="binder">R</span></a> : <span class="id" title="keyword">Type</span>) (<a id="b:58" class="idref" href="#b:58"><span class="id" title="binder">b</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:56"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:57"><span class="id" title="variable">R</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="log:59" class="idref" href="#log:59"><span class="id" title="binder">log</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#ev_list"><span class="id" title="definition">ev_list</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:56"><span class="id" title="variable">E</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Props.Infinite.html#all_infinite"><span class="id" title="definition">all_infinite</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:58"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Props.Infinite.html#all_infinite"><span class="id" title="definition">all_infinite</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#ev_list_to_stream"><span class="id" title="definition">ev_list_to_stream</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#log:59"><span class="id" title="variable">log</span></a><a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">)</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:58"><span class="id" title="variable">b</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">log</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#append"><span class="id" title="definition">append</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_l"><span class="id" title="lemma">bind_ret_l</span></a>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#append"><span class="id" title="definition">append</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="inv_append_eutt" class="idref" href="#inv_append_eutt"><span class="id" title="lemma">inv_append_eutt</span></a> : <span class="id" title="keyword">∀</span> (<a id="E:60" class="idref" href="#E:60"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:61" class="idref" href="#R:61"><span class="id" title="binder">R</span></a> : <span class="id" title="keyword">Type</span>) (<a id="r1:62" class="idref" href="#r1:62"><span class="id" title="binder">r1</span></a> <a id="r2:63" class="idref" href="#r2:63"><span class="id" title="binder">r2</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:61"><span class="id" title="variable">R</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="log1:64" class="idref" href="#log1:64"><span class="id" title="binder">log1</span></a> <a id="log2:65" class="idref" href="#log2:65"><span class="id" title="binder">log2</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#ev_list"><span class="id" title="definition">ev_list</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:60"><span class="id" title="variable">E</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#ev_list_to_stream"><span class="id" title="definition">ev_list_to_stream</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#log1:64"><span class="id" title="variable">log1</span></a><a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">)</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#r1:62"><span class="id" title="variable">r1</span></a> <a class="idref" href="ITree.Basics.Monad.html#20d7a3de27e35f38017a31a5b4c235e8"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#ev_list_to_stream"><span class="id" title="definition">ev_list_to_stream</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#log2:65"><span class="id" title="variable">log2</span></a><a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">)</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#r2:63"><span class="id" title="variable">r2</span></a>)%<span class="id" title="var">itree</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#log1:64"><span class="id" title="variable">log1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#log2:65"><span class="id" title="variable">log2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#r1:62"><span class="id" title="variable">r1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#r2:63"><span class="id" title="variable">r2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">log2</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">log1</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">log2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">pinversion</span> <span class="id" title="var">H</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#append"><span class="id" title="definition">append</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">pinversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">log2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">pinversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#append"><span class="id" title="definition">append</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">pinversion</span> <span class="id" title="var">H</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="var">ddestruction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">enough</span> (<span class="id" title="var">log1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">log2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <span class="id" title="var">r1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">r2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHlog1</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">REL</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trace_refine_proper_left'" class="idref" href="#trace_refine_proper_left'"><span class="id" title="lemma">trace_refine_proper_left'</span></a> : <span class="id" title="keyword">∀</span> (<a id="E:66" class="idref" href="#E:66"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:67" class="idref" href="#R:67"><span class="id" title="binder">R</span></a> : <span class="id" title="keyword">Type</span>) (<a id="b1:68" class="idref" href="#b1:68"><span class="id" title="binder">b1</span></a> <a id="b2:69" class="idref" href="#b2:69"><span class="id" title="binder">b2</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:66"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:67"><span class="id" title="variable">R</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="t:70" class="idref" href="#t:70"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:66"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:67"><span class="id" title="variable">R</span></a>), <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b1:68"><span class="id" title="variable">b1</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b2:69"><span class="id" title="variable">b2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Eq.Rutt.html#rutt"><span class="id" title="definition">rutt</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#REvRef"><span class="id" title="inductive">REvRef</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:66"><span class="id" title="variable">E</span></a>) (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#RAnsRef"><span class="id" title="inductive">RAnsRef</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:66"><span class="id" title="variable">E</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b1:68"><span class="id" title="variable">b1</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#t:70"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Eq.Rutt.html#rutt"><span class="id" title="definition">rutt</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#REvRef"><span class="id" title="inductive">REvRef</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:66"><span class="id" title="variable">E</span></a>) (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#RAnsRef"><span class="id" title="inductive">RAnsRef</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:66"><span class="id" title="variable">E</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b2:69"><span class="id" title="variable">b2</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#t:70"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">R</span>. <span class="id" title="var">pcofix</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="var">punfold</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">genobs_clear</span> <span class="id" title="var">t</span> <span class="id" title="var">ot3</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">hinduction</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">before</span> <span class="id" title="var">CIH</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">remember</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#RetF"><span class="id" title="constructor">RetF</span></a> <span class="id" title="var">r1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">ot1</span>. <span class="id" title="var">hinduction</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">before</span> <span class="id" title="var">CIH</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">inv</span> <span class="id" title="var">Heqot1</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">paco</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHruttF</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Tau&nbsp;Tau&nbsp;case&nbsp;causes&nbsp;the&nbsp;most&nbsp;problems,&nbsp;seems&nbsp;*)</span><br/>
&nbsp;&nbsp;-  <span class="id" title="tactic">assert</span> (<span class="id" title="var">DEC</span>: <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="m3:73" class="idref" href="#m3:73"><span class="id" title="binder">m3</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <span class="id" title="var">ot3</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#TauF"><span class="id" title="constructor">TauF</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#m3:71"><span class="id" title="variable">m3</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="m3:74" class="idref" href="#m3:74"><span class="id" title="binder">m3</span></a>, <span class="id" title="var">ot3</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#TauF"><span class="id" title="constructor">TauF</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#m3:72"><span class="id" title="variable">m3</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">ot3</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">right</span>; <span class="id" title="tactic">red</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">inv</span> <span class="id" title="var">H</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">DEC</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">EQ</span> | <span class="id" title="var">EQ</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">EQ</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">m3</span> ?]; <span class="id" title="tactic">subst</span>. <span class="id" title="var">pclearbot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Rutt.html#rutt_inv_Tau"><span class="id" title="lemma">rutt_inv_Tau</span></a>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">inv</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">try</span> (<span class="id" title="var">exfalso</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">REL</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">REL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">hinduction</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">before</span> <span class="id" title="var">CIH</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">try</span> (<span class="id" title="var">exfalso</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">REL</span>; <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHREL</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">REL</span>; <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHREL</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHruttF</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">IHruttF</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">REL</span>; <span class="id" title="tactic">try</span> (<span class="id" title="var">exfalso</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">pstep_reverse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHREL</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">remember</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> <span class="id" title="var">e</span> <span class="id" title="var">k1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">ot1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">hinduction</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">before</span> <span class="id" title="var">CIH</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">Heqot1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHruttF</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHeqitF</span>. <span class="id" title="var">remember</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#TauF"><span class="id" title="constructor">TauF</span></a> <span class="id" title="var">t1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">otf1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">hinduction</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">before</span> <span class="id" title="var">CIH</span>; <span class="id" title="tactic">intros</span>;  <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">Heqotf1</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">constructor</span>. <span class="id" title="var">pclearbot</span>. <span class="id" title="var">pstep_reverse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHruttF</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHeqitF</span>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trace_refine_proper_right'" class="idref" href="#trace_refine_proper_right'"><span class="id" title="lemma">trace_refine_proper_right'</span></a> : <span class="id" title="keyword">∀</span> (<a id="E:75" class="idref" href="#E:75"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:76" class="idref" href="#R:76"><span class="id" title="binder">R</span></a> : <span class="id" title="keyword">Type</span>) (<a id="b:77" class="idref" href="#b:77"><span class="id" title="binder">b</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:75"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:76"><span class="id" title="variable">R</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="t1:78" class="idref" href="#t1:78"><span class="id" title="binder">t1</span></a> <a id="t2:79" class="idref" href="#t2:79"><span class="id" title="binder">t2</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:75"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:76"><span class="id" title="variable">R</span></a>), <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#t1:78"><span class="id" title="variable">t1</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#t2:79"><span class="id" title="variable">t2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Eq.Rutt.html#rutt"><span class="id" title="definition">rutt</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#REvRef"><span class="id" title="inductive">REvRef</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:75"><span class="id" title="variable">E</span></a>) (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#RAnsRef"><span class="id" title="inductive">RAnsRef</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:75"><span class="id" title="variable">E</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:77"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#t1:78"><span class="id" title="variable">t1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Eq.Rutt.html#rutt"><span class="id" title="definition">rutt</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#REvRef"><span class="id" title="inductive">REvRef</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:75"><span class="id" title="variable">E</span></a>) (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#RAnsRef"><span class="id" title="inductive">RAnsRef</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:75"><span class="id" title="variable">E</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:77"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#t2:79"><span class="id" title="variable">t2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">R</span>. <span class="id" title="var">pcofix</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">punfold</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">genobs_clear</span> <span class="id" title="var">t2</span> <span class="id" title="var">ot2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">hinduction</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">before</span> <span class="id" title="var">CIH</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">t1</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">remember</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#RetF"><span class="id" title="constructor">RetF</span></a> <span class="id" title="var">r2</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">ot1</span>. <span class="id" title="var">hinduction</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">before</span> <span class="id" title="var">CIH</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">inv</span> <span class="id" title="var">Heqot1</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">paco</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">pclearbot</span>. <span class="id" title="var">remember</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#TauF"><span class="id" title="constructor">TauF</span></a> <span class="id" title="var">m1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">otm1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">hinduction</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">before</span> <span class="id" title="var">CIH</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">try</span> (<span class="id" title="var">inv</span> <span class="id" title="var">Heqotm1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">constructor</span>. <span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Rutt.html#rutt_inv_Tau_r"><span class="id" title="lemma">rutt_inv_Tau_r</span></a>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">punfold</span> <span class="id" title="var">REL</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">REL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">REL</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">IHruttF</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">hinduction</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">before</span> <span class="id" title="var">CIH</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">x0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHruttF</span>; <span class="id" title="tactic">auto</span>. 2 : <span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pclearbot</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">REL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">IHruttF</span>. <span class="id" title="var">hinduction</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">before</span> <span class="id" title="var">CIH</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">x0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHruttF</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHruttF</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHREL</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">remember</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> <span class="id" title="var">e</span> <span class="id" title="var">k1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">ot1</span>. <span class="id" title="var">hinduction</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">before</span> <span class="id" title="var">CIH</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">inv</span> <span class="id" title="var">Heqot1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">ddestruction</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">REL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHeqitF</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">remember</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#TauF"><span class="id" title="constructor">TauF</span></a> <span class="id" title="var">t0</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">otf0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">hinduction</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">before</span> <span class="id" title="var">CIH</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">Heqotf0</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">constructor</span>. <span class="id" title="var">pclearbot</span>. <span class="id" title="var">pstep_reverse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHruttF</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHeqitF</span>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="trace_refine_proper" class="idref" href="#trace_refine_proper"><span class="id" title="instance">trace_refine_proper</span></a> {<a id="E:80" class="idref" href="#E:80"><span class="id" title="binder">E</span></a> <a id="R:81" class="idref" href="#R:81"><span class="id" title="binder">R</span></a>} : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (@<a class="idref" href="ITree.Eq.Eqit.html#eutt"><span class="id" title="definition">eutt</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:80"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:81"><span class="id" title="variable">R</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:81"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="ITree.Eq.Eqit.html#eutt"><span class="id" title="definition">eutt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#iff"><span class="id" title="definition">iff</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#trace_refine"><span class="id" title="definition">trace_refine</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">Heuttb</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span> <span class="id" title="var">Heuttt</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#trace_refine_proper_right'"><span class="id" title="lemma">trace_refine_proper_right'</span></a>; [<span class="id" title="tactic">eauto</span> | <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#trace_refine_proper_left'"><span class="id" title="lemma">trace_refine_proper_left'</span></a>; <span class="id" title="tactic">eauto</span>]);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>; <span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trace_refine_ret" class="idref" href="#trace_refine_ret"><span class="id" title="lemma">trace_refine_ret</span></a> : <span class="id" title="keyword">∀</span> (<a id="E:82" class="idref" href="#E:82"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:83" class="idref" href="#R:83"><span class="id" title="binder">R</span></a> : <span class="id" title="keyword">Type</span>) (<a id="r:84" class="idref" href="#r:84"><span class="id" title="binder">r</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:83"><span class="id" title="variable">R</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#trace_refine"><span class="id" title="definition">trace_refine</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:82"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:83"><span class="id" title="variable">R</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#r:84"><span class="id" title="variable">r</span></a>) (<a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#r:84"><span class="id" title="variable">r</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trace_refine_ret_inv_r" class="idref" href="#trace_refine_ret_inv_r"><span class="id" title="lemma">trace_refine_ret_inv_r</span></a> : <span class="id" title="keyword">∀</span> (<a id="E:85" class="idref" href="#E:85"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:86" class="idref" href="#R:86"><span class="id" title="binder">R</span></a> : <span class="id" title="keyword">Type</span>) (<a id="r:87" class="idref" href="#r:87"><span class="id" title="binder">r</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:86"><span class="id" title="variable">R</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="t:88" class="idref" href="#t:88"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:85"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:86"><span class="id" title="variable">R</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#r:87"><span class="id" title="variable">r</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#t:88"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#t:88"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#r:87"><span class="id" title="variable">r</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">punfold</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trace_refine_ret_inv_l" class="idref" href="#trace_refine_ret_inv_l"><span class="id" title="lemma">trace_refine_ret_inv_l</span></a> : <span class="id" title="keyword">∀</span> (<a id="E:89" class="idref" href="#E:89"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:90" class="idref" href="#R:90"><span class="id" title="binder">R</span></a> : <span class="id" title="keyword">Type</span>) (<a id="r:91" class="idref" href="#r:91"><span class="id" title="binder">r</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:90"><span class="id" title="variable">R</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="b:92" class="idref" href="#b:92"><span class="id" title="binder">b</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:89"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:90"><span class="id" title="variable">R</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:92"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#r:91"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:92"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Basics.Monad.html#20d7a3de27e35f38017a31a5b4c235e8"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#r:91"><span class="id" title="variable">r</span></a>)%<span class="id" title="var">itree</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">punfold</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trace_refine_vis_inv" class="idref" href="#trace_refine_vis_inv"><span class="id" title="lemma">trace_refine_vis_inv</span></a> : <span class="id" title="keyword">∀</span> (<a id="E:93" class="idref" href="#E:93"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:94" class="idref" href="#R:94"><span class="id" title="binder">R</span></a> <a id="A:95" class="idref" href="#A:95"><span class="id" title="binder">A</span></a>: <span class="id" title="keyword">Type</span>) (<a id="e:96" class="idref" href="#e:96"><span class="id" title="binder">e</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:93"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#A:95"><span class="id" title="variable">A</span></a>) (<a id="a:97" class="idref" href="#a:97"><span class="id" title="binder">a</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#A:95"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="b:98" class="idref" href="#b:98"><span class="id" title="binder">b</span></a> :<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:93"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:94"><span class="id" title="variable">R</span></a>) (<a id="k:99" class="idref" href="#k:99"><span class="id" title="binder">k</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#A:95"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:93"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:94"><span class="id" title="variable">R</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#trace_refine"><span class="id" title="definition">trace_refine</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#e:96"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#k:99"><span class="id" title="variable">k</span></a>) (<a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evans"><span class="id" title="constructor">evans</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#A:95"><span class="id" title="variable">A</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#e:96"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#a:97"><span class="id" title="variable">a</span></a>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:98"><span class="id" title="variable">b</span></a>))  <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#trace_refine"><span class="id" title="definition">trace_refine</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#k:99"><span class="id" title="variable">k</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#a:97"><span class="id" title="variable">a</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:98"><span class="id" title="variable">b</span></a> .<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">R</span> <span class="id" title="var">A</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">punfold</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="var">ddestruction</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#RAnsRef"><span class="id" title="inductive">RAnsRef</span></a> <span class="id" title="var">E</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <span class="id" title="var">A</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evans"><span class="id" title="constructor">evans</span></a> <span class="id" title="var">A</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> <span class="id" title="var">e</span> <span class="id" title="var">a</span>); <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H7</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trace_refine_vis_add" class="idref" href="#trace_refine_vis_add"><span class="id" title="lemma">trace_refine_vis_add</span></a> : <span class="id" title="keyword">∀</span> (<a id="E:100" class="idref" href="#E:100"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:101" class="idref" href="#R:101"><span class="id" title="binder">R</span></a> <a id="A:102" class="idref" href="#A:102"><span class="id" title="binder">A</span></a>: <span class="id" title="keyword">Type</span>) (<a id="e:103" class="idref" href="#e:103"><span class="id" title="binder">e</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:100"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#A:102"><span class="id" title="variable">A</span></a>) (<a id="a:104" class="idref" href="#a:104"><span class="id" title="binder">a</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#A:102"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="b:105" class="idref" href="#b:105"><span class="id" title="binder">b</span></a> :<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:100"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:101"><span class="id" title="variable">R</span></a>) (<a id="k:106" class="idref" href="#k:106"><span class="id" title="binder">k</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#A:102"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:100"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:101"><span class="id" title="variable">R</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:105"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#k:106"><span class="id" title="variable">k</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#a:104"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evans"><span class="id" title="constructor">evans</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#A:102"><span class="id" title="variable">A</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#e:103"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#a:104"><span class="id" title="variable">a</span></a>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:105"><span class="id" title="variable">b</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#e:103"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#k:106"><span class="id" title="variable">k</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>. <span class="id" title="var">ddestruction</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="event_ans_constr" class="idref" href="#event_ans_constr"><span class="id" title="lemma">event_ans_constr</span></a> : <span class="id" title="keyword">∀</span> (<a id="E:107" class="idref" href="#E:107"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:108" class="idref" href="#R:108"><span class="id" title="binder">R</span></a> : <span class="id" title="keyword">Type</span>) (<a id="e:109" class="idref" href="#e:109"><span class="id" title="binder">e</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:107"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:108"><span class="id" title="variable">R</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="A:110" class="idref" href="#A:110"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="e':111" class="idref" href="#e':111"><span class="id" title="binder">e'</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#EvAns"><span class="id" title="inductive">EvAns</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:107"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#A:110"><span class="id" title="variable">A</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#REvRef"><span class="id" title="inductive">REvRef</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:107"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#A:110"><span class="id" title="variable">A</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:108"><span class="id" title="variable">R</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#e':111"><span class="id" title="variable">e'</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#e:109"><span class="id" title="variable">e</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#classic_empty"><span class="id" title="lemma">classic_empty</span></a> <span class="id" title="var">R</span>) <span class="id" title="keyword">as</span>  [ [<span class="id" title="var">a</span> | <span class="id" title="var">Hempty</span>]  <span class="id" title="var">_</span> ] .<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">∃</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>. <span class="id" title="tactic">∃</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evans"><span class="id" title="constructor">evans</span></a> <span class="id" title="var">R</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span>). <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">∃</span> <a class="idref" href="ITree.Basics.Basics.html#void"><span class="id" title="abbreviation">void</span></a>. <span class="id" title="tactic">∃</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evempty"><span class="id" title="constructor">evempty</span></a> <span class="id" title="var">R</span> <span class="id" title="var">Hempty</span> <span class="id" title="var">e</span>). <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Here&nbsp;are&nbsp;where&nbsp;some&nbsp;of&nbsp;the&nbsp;sketchy&nbsp;uses&nbsp;of&nbsp;axioms&nbsp;are&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="Determinize" class="idref" href="#Determinize"><span class="id" title="section">Determinize</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span> (<a id="classicT:113" class="idref" href="#classicT:113"><span class="id" title="binder">classicT</span></a> : <span class="id" title="keyword">∀</span> (<a id="P:112" class="idref" href="#P:112"><span class="id" title="binder">P</span></a> : <span class="id" title="keyword">Type</span>), <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#P:112"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#P:112"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">)</span></a>).<br/>

<br/>
<span class="id" title="keyword">CoFixpoint</span> <a id="determinize_" class="idref" href="#determinize_"><span class="id" title="definition">determinize_</span></a> (<a id="E:114" class="idref" href="#E:114"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:115" class="idref" href="#R:115"><span class="id" title="binder">R</span></a> : <span class="id" title="keyword">Type</span>) (<a id="ot:116" class="idref" href="#ot:116"><span class="id" title="binder">ot</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree'"><span class="id" title="abbreviation">itree'</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:114"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:115"><span class="id" title="variable">R</span></a>) : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:114"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:115"><span class="id" title="variable">R</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">ot</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <span class="id" title="var">r</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Tau"><span class="id" title="abbreviation">Tau</span></a> (<span class="id" title="var">determinize_</span> <span class="id" title="var">E</span> <span class="id" title="var">R</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t</span>) ) ).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#Determinize.classicT"><span class="id" title="variable">classicT</span></a> <span class="id" title="var">X</span>) <span class="id" title="keyword">as</span> [ | <span class="id" title="var">f</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evans"><span class="id" title="constructor">evans</span></a> <span class="id" title="var">X</span> <span class="id" title="var">e</span> <span class="id" title="var">x</span>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒  (<span class="id" title="var">determinize_</span> <span class="id" title="var">E</span> <span class="id" title="var">R</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> (<span class="id" title="var">k</span> <span class="id" title="var">x</span>)) ) )).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evempty"><span class="id" title="constructor">evempty</span></a> <span class="id" title="var">X</span> (<span class="id" title="keyword">fun</span> <a id="x:121" class="idref" href="#x:121"><span class="id" title="binder">x</span></a> ⇒ <span class="id" title="keyword">match</span> <span class="id" title="var">f</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#x:118"><span class="id" title="variable">x</span></a> <span class="id" title="keyword">with</span> <span class="id" title="keyword">end</span>) <span class="id" title="var">e</span>) (<span class="id" title="keyword">fun</span> <a id="v:122" class="idref" href="#v:122"><span class="id" title="binder">v</span></a> : <a class="idref" href="ITree.Basics.Basics.html#void"><span class="id" title="abbreviation">void</span></a> ⇒ <span class="id" title="keyword">match</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#v:119"><span class="id" title="variable">v</span></a> <span class="id" title="keyword">return</span> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <span class="id" title="var">E</span> <span class="id" title="var">R</span> <span class="id" title="keyword">with</span> <span class="id" title="keyword">end</span>) ).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="determinize" class="idref" href="#determinize"><span class="id" title="definition">determinize</span></a> {<a id="E:124" class="idref" href="#E:124"><span class="id" title="binder">E</span></a> <a id="R:125" class="idref" href="#R:125"><span class="id" title="binder">R</span></a>} (<a id="t:126" class="idref" href="#t:126"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:124"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:125"><span class="id" title="variable">R</span></a>) : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:124"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:125"><span class="id" title="variable">R</span></a> := <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#determinize_"><span class="id" title="definition">determinize_</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#t:126"><span class="id" title="variable">t</span></a>).<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#Determinize"><span class="id" title="section">Determinize</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;may&nbsp;be&nbsp;a&nbsp;better&nbsp;idea&nbsp;to&nbsp;make&nbsp;this&nbsp;an&nbsp;axiom&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="itree_refine_nonempty" class="idref" href="#itree_refine_nonempty"><span class="id" title="lemma">itree_refine_nonempty</span></a> : <span class="id" title="keyword">∀</span> (<a id="E:127" class="idref" href="#E:127"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:128" class="idref" href="#R:128"><span class="id" title="binder">R</span></a> : <span class="id" title="keyword">Type</span>) (<a id="t:129" class="idref" href="#t:129"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:127"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:128"><span class="id" title="variable">R</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="b:130" class="idref" href="#b:130"><span class="id" title="binder">b</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:127"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:128"><span class="id" title="variable">R</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:130"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#t:129"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <a class="idref" href="ITree.Axioms.html#classicT_inhabited"><span class="id" title="lemma">classicT_inhabited</span></a> <span class="id" title="keyword">as</span> [<span class="id" title="var">classicT</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#determinize"><span class="id" title="definition">determinize</span></a> <span class="id" title="var">classicT</span> <span class="id" title="var">t</span>). <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">pcofix</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#determinize"><span class="id" title="definition">determinize</span></a>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">classicT</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="var">ddestruction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">contradiction</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="refine_set_eq_to_eutt_vis_aux" class="idref" href="#refine_set_eq_to_eutt_vis_aux"><span class="id" title="lemma">refine_set_eq_to_eutt_vis_aux</span></a> : <span class="id" title="keyword">∀</span> (<a id="E:131" class="idref" href="#E:131"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:132" class="idref" href="#R:132"><span class="id" title="binder">R</span></a> : <span class="id" title="keyword">Type</span>) (<a id="r:133" class="idref" href="#r:133"><span class="id" title="binder">r</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:131"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:132"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:131"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:132"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="CIH:137" class="idref" href="#CIH:137"><span class="id" title="binder">CIH</span></a> : <span class="id" title="keyword">∀</span> <a id="t1:134" class="idref" href="#t1:134"><span class="id" title="binder">t1</span></a> <a id="t2:135" class="idref" href="#t2:135"><span class="id" title="binder">t2</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:131"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:132"><span class="id" title="variable">R</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="b:136" class="idref" href="#b:136"><span class="id" title="binder">b</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:131"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:132"><span class="id" title="variable">R</span></a>, <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:136"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#t1:134"><span class="id" title="variable">t1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:136"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#t2:135"><span class="id" title="variable">t2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#r:133"><span class="id" title="variable">r</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#t1:134"><span class="id" title="variable">t1</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#t2:135"><span class="id" title="variable">t2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="t1:138" class="idref" href="#t1:138"><span class="id" title="binder">t1</span></a> <a id="t2:139" class="idref" href="#t2:139"><span class="id" title="binder">t2</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:131"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:132"><span class="id" title="variable">R</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="H0:141" class="idref" href="#H0:141"><span class="id" title="binder">H0</span></a> : <span class="id" title="keyword">∀</span> <a id="b:140" class="idref" href="#b:140"><span class="id" title="binder">b</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:131"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:132"><span class="id" title="variable">R</span></a>, <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:140"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#t1:138"><span class="id" title="variable">t1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:140"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#t2:139"><span class="id" title="variable">t2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="A:142" class="idref" href="#A:142"><span class="id" title="binder">A</span></a> <a id="B:143" class="idref" href="#B:143"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>) (<a id="e:144" class="idref" href="#e:144"><span class="id" title="binder">e</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:131"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#A:142"><span class="id" title="variable">A</span></a>) (<a id="e0:145" class="idref" href="#e0:145"><span class="id" title="binder">e0</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:131"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#B:143"><span class="id" title="variable">B</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="k:146" class="idref" href="#k:146"><span class="id" title="binder">k</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#A:142"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:131"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:132"><span class="id" title="variable">R</span></a>) (<a id="k0:147" class="idref" href="#k0:147"><span class="id" title="binder">k0</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#B:143"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:131"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:132"><span class="id" title="variable">R</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht1:148" class="idref" href="#Ht1:148"><span class="id" title="binder">Ht1</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#t1:138"><span class="id" title="variable">t1</span></a> <a class="idref" href="ITree.Eq.Eqit.html#7123c605943b5e01235e17fe532efcae"><span class="id" title="notation">≅</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#e:144"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#k:146"><span class="id" title="variable">k</span></a>) (<a id="Ht2:149" class="idref" href="#Ht2:149"><span class="id" title="binder">Ht2</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#t2:139"><span class="id" title="variable">t2</span></a> <a class="idref" href="ITree.Eq.Eqit.html#7123c605943b5e01235e17fe532efcae"><span class="id" title="notation">≅</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#e0:145"><span class="id" title="variable">e0</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#k0:147"><span class="id" title="variable">k0</span></a> ),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Eq.Eqit.html#eqitF"><span class="id" title="inductive">eqitF</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> (<span class="id" title="definition">upaco2</span> (<a class="idref" href="ITree.Eq.Eqit.html#eqit_"><span class="id" title="definition">eqit_</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#r:133"><span class="id" title="variable">r</span></a>) (<a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#e:144"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#k:146"><span class="id" title="variable">k</span></a>) (<a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#e0:145"><span class="id" title="variable">e0</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#k0:147"><span class="id" title="variable">k0</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#classic_empty"><span class="id" title="lemma">classic_empty</span></a> <span class="id" title="var">A</span>) <span class="id" title="keyword">as</span> [ [<span class="id" title="var">a</span> | <span class="id" title="var">Ha</span>] <span class="id" title="var">_</span> ].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span>  <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#trace_refine_vis_add"><span class="id" title="lemma">trace_refine_vis_add</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">e</span> := <span class="id" title="var">e</span>) (<span class="id" title="var">k</span> := <span class="id" title="var">k</span>) (<span class="id" title="var">a</span> := <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hbrv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="b:151" class="idref" href="#b:151"><span class="id" title="binder">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:150"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">(</span></a><span class="id" title="var">k</span> <span class="id" title="var">a</span><a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">)</span></a> ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#itree_refine_nonempty"><span class="id" title="lemma">itree_refine_nonempty</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">b</span> <span class="id" title="var">Hbk</span>]. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#trace_refine_vis_add"><span class="id" title="lemma">trace_refine_vis_add</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">e</span> := <span class="id" title="var">e</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hbk</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Ht1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbk</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbk</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hbk0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbk</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbk0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pinversion</span> <span class="id" title="var">Hbk</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pinversion</span> <span class="id" title="var">Hbk0</span>. <span class="id" title="var">ddestruction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H10</span>. <span class="id" title="var">ddestruction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">Ht1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">Ht2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#trace_refine_vis_add"><span class="id" title="lemma">trace_refine_vis_add</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">e</span> := <span class="id" title="var">e</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#trace_refine_vis_inv"><span class="id" title="lemma">trace_refine_vis_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#trace_refine_vis_add"><span class="id" title="lemma">trace_refine_vis_add</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">e</span> := <span class="id" title="var">e</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#trace_refine_vis_inv"><span class="id" title="lemma">trace_refine_vis_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">set</span> (<span class="id" title="keyword">fun</span> <a id="v:154" class="idref" href="#v:154"><span class="id" title="binder">v</span></a> : <a class="idref" href="ITree.Basics.Basics.html#void"><span class="id" title="abbreviation">void</span></a> ⇒ <span class="id" title="keyword">match</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#v:152"><span class="id" title="variable">v</span></a> <span class="id" title="keyword">return</span> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <span class="id" title="var">E</span> <span class="id" title="var">R</span> <span class="id" title="keyword">with</span> <span class="id" title="keyword">end</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">ke</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evempty"><span class="id" title="constructor">evempty</span></a> <span class="id" title="var">A</span> <span class="id" title="var">Ha</span> <span class="id" title="var">e</span>) <span class="id" title="var">ke</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">b</span> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <span class="id" title="var">t1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">b</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht1</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">b</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">clear</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pinversion</span> <span class="id" title="var">H</span>. <span class="id" title="var">pinversion</span> <span class="id" title="var">H1</span>. <span class="id" title="var">ddestruction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H12</span>. <span class="id" title="var">ddestruction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">Ht1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">Ht2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">contradiction</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trace_refine_vis" class="idref" href="#trace_refine_vis"><span class="id" title="lemma">trace_refine_vis</span></a> : <span class="id" title="keyword">∀</span> (<a id="E:156" class="idref" href="#E:156"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:157" class="idref" href="#R:157"><span class="id" title="binder">R</span></a> <a id="A:158" class="idref" href="#A:158"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>) (<a id="b:159" class="idref" href="#b:159"><span class="id" title="binder">b</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:156"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:157"><span class="id" title="variable">R</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="e:160" class="idref" href="#e:160"><span class="id" title="binder">e</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:156"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#A:158"><span class="id" title="variable">A</span></a>) (<a id="k:161" class="idref" href="#k:161"><span class="id" title="binder">k</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#A:158"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:156"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:157"><span class="id" title="variable">R</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:159"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#e:160"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#k:161"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="X:162" class="idref" href="#X:162"><span class="id" title="binder">X</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="e0:163" class="idref" href="#e0:163"><span class="id" title="binder">e0</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#EvAns"><span class="id" title="inductive">EvAns</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:156"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#X:162"><span class="id" title="variable">X</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="k0:164" class="idref" href="#k0:164"><span class="id" title="binder">k0</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:159"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Basics.Monad.html#20d7a3de27e35f38017a31a5b4c235e8"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#e0:163"><span class="id" title="variable">e0</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#k0:164"><span class="id" title="variable">k0</span></a>)%<span class="id" title="var">itree</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">punfold</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">∃</span> <span class="id" title="var">A0</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">e1</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">k1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a> <span class="id" title="var">b</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hb</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hb</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">enough</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="X:168" class="idref" href="#X:168"><span class="id" title="binder">X</span></a> : <span class="id" title="keyword">Type</span>) (<a id="e0:169" class="idref" href="#e0:169"><span class="id" title="binder">e0</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#EvAns"><span class="id" title="inductive">EvAns</span></a> <span class="id" title="var">E</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#X:165"><span class="id" title="variable">X</span></a>) (<a id="k0:170" class="idref" href="#k0:170"><span class="id" title="binder">k0</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#X:165"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#EvAns"><span class="id" title="inductive">EvAns</span></a> <span class="id" title="var">E</span>) <span class="id" title="var">R</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a> (<span class="id" title="var">t1</span> <a class="idref" href="ITree.Basics.Monad.html#20d7a3de27e35f38017a31a5b4c235e8"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#e0:166"><span class="id" title="variable">e0</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#k0:167"><span class="id" title="variable">k0</span></a>)%<span class="id" title="var">itree</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [ <span class="id" title="var">X</span> [<span class="id" title="var">e0</span> [<span class="id" title="var">k0</span> <span class="id" title="var">Ht1</span>] ] ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">e0</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">k0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a> <span class="id" title="var">b</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hb</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hb</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHruttF</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trace_refine_vis_l" class="idref" href="#trace_refine_vis_l"><span class="id" title="lemma">trace_refine_vis_l</span></a> : <span class="id" title="keyword">∀</span> (<a id="E:171" class="idref" href="#E:171"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:172" class="idref" href="#R:172"><span class="id" title="binder">R</span></a> <a id="A:173" class="idref" href="#A:173"><span class="id" title="binder">A</span></a>: <span class="id" title="keyword">Type</span>) (<a id="t:174" class="idref" href="#t:174"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:171"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:172"><span class="id" title="variable">R</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="e:175" class="idref" href="#e:175"><span class="id" title="binder">e</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#EvAns"><span class="id" title="inductive">EvAns</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:171"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#A:173"><span class="id" title="variable">A</span></a>) (<a id="k:176" class="idref" href="#k:176"><span class="id" title="binder">k</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#A:173"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:171"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:172"><span class="id" title="variable">R</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#e:175"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#k:176"><span class="id" title="variable">k</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#t:174"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="X:177" class="idref" href="#X:177"><span class="id" title="binder">X</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="e0:178" class="idref" href="#e0:178"><span class="id" title="binder">e0</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:171"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#X:177"><span class="id" title="variable">X</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="k0:179" class="idref" href="#k0:179"><span class="id" title="binder">k0</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#X:177"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:171"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:172"><span class="id" title="variable">R</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#t:174"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Basics.Monad.html#20d7a3de27e35f38017a31a5b4c235e8"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#e0:178"><span class="id" title="variable">e0</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#k0:179"><span class="id" title="variable">k0</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">punfold</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">∃</span> <span class="id" title="var">B</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">e2</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">k2</span>. <span class="id" title="tactic">specialize</span> (<a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a> <span class="id" title="var">t</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<span class="id" title="var">t2</span> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a> <span class="id" title="var">t</span>). <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> &lt;- <span class="id" title="var">H0</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHruttF</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trace_refine_may_converge_ex" class="idref" href="#trace_refine_may_converge_ex"><span class="id" title="lemma">trace_refine_may_converge_ex</span></a> : <span class="id" title="keyword">∀</span> (<a id="E:180" class="idref" href="#E:180"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:181" class="idref" href="#R:181"><span class="id" title="binder">R</span></a> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="t:182" class="idref" href="#t:182"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:180"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:181"><span class="id" title="variable">R</span></a>) (<a id="r:183" class="idref" href="#r:183"><span class="id" title="binder">r</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:181"><span class="id" title="variable">R</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Props.Infinite.html#may_converge"><span class="id" title="inductive">may_converge</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#r:183"><span class="id" title="variable">r</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#t:182"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="b:184" class="idref" href="#b:184"><span class="id" title="binder">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="ITree.Props.Infinite.html#may_converge"><span class="id" title="inductive">may_converge</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#r:183"><span class="id" title="variable">r</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:184"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:184"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#t:182"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">∃</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <span class="id" title="var">r</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#trace_refine_ret"><span class="id" title="lemma">trace_refine_ret</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">IHmay_converge</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">br</span> [<span class="id" title="var">Hrbr</span> <span class="id" title="var">Hrefbr</span>] ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span>  (<a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evans"><span class="id" title="constructor">evans</span></a> <span class="id" title="var">B</span> <span class="id" title="var">e</span> <span class="id" title="var">b</span>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">br</span>) ). <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Props.Infinite.html#conv_vis"><span class="id" title="constructor">conv_vis</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">eauto</span>. <span class="id" title="var">Unshelve</span>. <span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#trace_refine_vis_add"><span class="id" title="lemma">trace_refine_vis_add</span></a>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trace_refine_may_converge" class="idref" href="#trace_refine_may_converge"><span class="id" title="lemma">trace_refine_may_converge</span></a> : <span class="id" title="keyword">∀</span> (<a id="E:185" class="idref" href="#E:185"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:186" class="idref" href="#R:186"><span class="id" title="binder">R</span></a> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="t:187" class="idref" href="#t:187"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:185"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:186"><span class="id" title="variable">R</span></a>) (<a id="r:188" class="idref" href="#r:188"><span class="id" title="binder">r</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:186"><span class="id" title="variable">R</span></a>) (<a id="b:189" class="idref" href="#b:189"><span class="id" title="binder">b</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:185"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:186"><span class="id" title="variable">R</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Props.Infinite.html#may_converge"><span class="id" title="inductive">may_converge</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#r:188"><span class="id" title="variable">r</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:189"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:189"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#t:187"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Props.Infinite.html#may_converge"><span class="id" title="inductive">may_converge</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#r:188"><span class="id" title="variable">r</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#t:187"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">t</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#trace_refine_ret_inv_r"><span class="id" title="lemma">trace_refine_ret_inv_r</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#trace_refine_vis_l"><span class="id" title="lemma">trace_refine_vis_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Ht0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">X</span> [<span class="id" title="var">e0</span> [<span class="id" title="var">k0</span> <span class="id" title="var">Ht0</span>] ] ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="var">pinversion</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ddestruction</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H4</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">ddestruction</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Props.Infinite.html#conv_vis"><span class="id" title="constructor">conv_vis</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>. <span class="id" title="var">Unshelve</span>. 2 : <span class="id" title="tactic">exact</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHmay_converge</span>. <span class="id" title="var">pclearbot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H9</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> <span class="id" title="var">a</span>). <span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#RAnsRef"><span class="id" title="inductive">RAnsRef</span></a> <span class="id" title="var">E</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <span class="id" title="var">X</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evans"><span class="id" title="constructor">evans</span></a> <span class="id" title="var">X</span> <span class="id" title="var">e0</span> <span class="id" title="var">a</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> <span class="id" title="var">e0</span> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H9</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trace_refine_all_infinite" class="idref" href="#trace_refine_all_infinite"><span class="id" title="lemma">trace_refine_all_infinite</span></a> : <span class="id" title="keyword">∀</span> (<a id="E:190" class="idref" href="#E:190"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:191" class="idref" href="#R:191"><span class="id" title="binder">R</span></a> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="t:192" class="idref" href="#t:192"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:190"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:191"><span class="id" title="variable">R</span></a>) (<a id="b:193" class="idref" href="#b:193"><span class="id" title="binder">b</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:190"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:191"><span class="id" title="variable">R</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Props.Infinite.html#all_infinite"><span class="id" title="definition">all_infinite</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#t:192"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:193"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#t:192"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Props.Infinite.html#all_infinite"><span class="id" title="definition">all_infinite</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:193"><span class="id" title="variable">b</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">R</span>. <span class="id" title="var">pcofix</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">punfold</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x0</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>. <span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>. <span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x0</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ddestruction</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">right</span>. <span class="id" title="var">pclearbot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">ddestruction</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">b0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> <span class="id" title="var">a</span>). <span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#RAnsRef"><span class="id" title="inductive">RAnsRef</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evans"><span class="id" title="constructor">evans</span></a> <span class="id" title="var">B</span> <span class="id" title="var">e2</span> <span class="id" title="var">a</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> <span class="id" title="var">e2</span> <span class="id" title="var">a</span> ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">left</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHruttF</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHruttF</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pclearbot</span>. <span class="id" title="var">punfold</span> <span class="id" title="var">H2</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trace_refine_converge_bind" class="idref" href="#trace_refine_converge_bind"><span class="id" title="lemma">trace_refine_converge_bind</span></a> : <span class="id" title="keyword">∀</span> (<a id="E:194" class="idref" href="#E:194"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:195" class="idref" href="#R:195"><span class="id" title="binder">R</span></a> <a id="S:196" class="idref" href="#S:196"><span class="id" title="binder">S</span></a> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="b:197" class="idref" href="#b:197"><span class="id" title="binder">b</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:194"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:195"><span class="id" title="variable">R</span></a>) (<a id="t:198" class="idref" href="#t:198"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:194"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:195"><span class="id" title="variable">R</span></a>) (<a id="f:199" class="idref" href="#f:199"><span class="id" title="binder">f</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:195"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:194"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#S:196"><span class="id" title="variable">S</span></a>) (<a id="g:200" class="idref" href="#g:200"><span class="id" title="binder">g</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:195"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:194"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#S:196"><span class="id" title="variable">S</span></a>) (<a id="r:201" class="idref" href="#r:201"><span class="id" title="binder">r</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:195"><span class="id" title="variable">R</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Props.Infinite.html#may_converge"><span class="id" title="inductive">may_converge</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#r:201"><span class="id" title="variable">r</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:197"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:197"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#t:198"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#f:199"><span class="id" title="variable">f</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#r:201"><span class="id" title="variable">r</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#g:200"><span class="id" title="variable">g</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#r:201"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:197"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#f:199"><span class="id" title="variable">f</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#t:198"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#g:200"><span class="id" title="variable">g</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">t</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#trace_refine_ret_inv_r"><span class="id" title="lemma">trace_refine_ret_inv_r</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_l"><span class="id" title="lemma">bind_ret_l</span></a>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHmay_converge</span> <span class="id" title="var">H1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#trace_refine_vis_l"><span class="id" title="lemma">trace_refine_vis_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">X</span> [<span class="id" title="var">e0</span> [<span class="id" title="var">k0</span> <span class="id" title="var">Ht</span>] ] ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="var">punfold</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ddestruction</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="var">pclearbot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H5</span>; <span class="id" title="var">ddestruction</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ddestruction</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H10</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>. <span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a0</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHmay_converge</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trace_refine_diverge_bind" class="idref" href="#trace_refine_diverge_bind"><span class="id" title="lemma">trace_refine_diverge_bind</span></a> : <span class="id" title="keyword">∀</span> (<a id="E:202" class="idref" href="#E:202"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:203" class="idref" href="#R:203"><span class="id" title="binder">R</span></a> <a id="S:204" class="idref" href="#S:204"><span class="id" title="binder">S</span></a> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="b:205" class="idref" href="#b:205"><span class="id" title="binder">b</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:202"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:203"><span class="id" title="variable">R</span></a>) (<a id="t:206" class="idref" href="#t:206"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:202"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:203"><span class="id" title="variable">R</span></a>) (<a id="f:207" class="idref" href="#f:207"><span class="id" title="binder">f</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:203"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:202"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#S:204"><span class="id" title="variable">S</span></a>) (<a id="g:208" class="idref" href="#g:208"><span class="id" title="binder">g</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:203"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:202"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#S:204"><span class="id" title="variable">S</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Props.Infinite.html#all_infinite"><span class="id" title="definition">all_infinite</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:205"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:205"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#t:206"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:205"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#f:207"><span class="id" title="variable">f</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#t:206"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#g:208"><span class="id" title="variable">g</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">R</span> <span class="id" title="var">S</span> <span class="id" title="var">b</span> <span class="id" title="var">t</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">b</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">pcofix</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x0</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>. <span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">CIH</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>. <span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x0</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>. <span class="id" title="var">ddestruction</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="var">pclearbot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="tactic">at</span> 1. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHruttF</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>. <span class="id" title="var">pclearbot</span>. <span class="id" title="var">pstep_reverse</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="tactic">at</span> 2. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHruttF</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="refine_set_eq_to_eutt" class="idref" href="#refine_set_eq_to_eutt"><span class="id" title="lemma">refine_set_eq_to_eutt</span></a> : <span class="id" title="keyword">∀</span> (<a id="E:209" class="idref" href="#E:209"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:210" class="idref" href="#R:210"><span class="id" title="binder">R</span></a> : <span class="id" title="keyword">Type</span>) (<a id="t1:211" class="idref" href="#t1:211"><span class="id" title="binder">t1</span></a> <a id="t2:212" class="idref" href="#t2:212"><span class="id" title="binder">t2</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:209"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:210"><span class="id" title="variable">R</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="b:213" class="idref" href="#b:213"><span class="id" title="binder">b</span></a>, <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:213"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#t1:211"><span class="id" title="variable">t1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:213"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#t2:212"><span class="id" title="variable">t2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#t1:211"><span class="id" title="variable">t1</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#t2:212"><span class="id" title="variable">t2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">R</span>. <span class="id" title="var">pcofix</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">ot1</span>. <span class="id" title="var">remember</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t2</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">ot2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">ot1</span>); <span class="id" title="tactic">destruct</span> (<span class="id" title="var">ot2</span>).<br/>
&nbsp;&nbsp;<span class="comment">(*Ret&nbsp;Ret*)</span><br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">H0</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <span class="id" title="var">r0</span>) ) <span class="id" title="keyword">as</span> <span class="id" title="var">Hr0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a> <span class="id" title="var">t1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Ht1</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqot1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a> <span class="id" title="var">t2</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Ht2</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqot2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hr0</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hr0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <span class="id" title="var">r0</span> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <span class="id" title="var">t2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht2</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hr0</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">pinversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*Ret&nbsp;Tau&nbsp;*)</span><br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a> <span class="id" title="var">t1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Ht1</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqot1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a> <span class="id" title="var">t2</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Ht2</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqot2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">Ht2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H0</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <span class="id" title="var">r0</span>) ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <span class="id" title="var">r0</span> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <span class="id" title="var">t1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht1</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">punfold</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">H0</span> <span class="id" title="var">Ht1</span> <span class="id" title="var">Ht2</span> <span class="id" title="var">Heqot1</span> <span class="id" title="var">Heqot2</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*Ret&nbsp;Vis*)</span><br/>
&nbsp;&nbsp;- <span class="id" title="var">exfalso</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a> <span class="id" title="var">t1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Ht1</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqot1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a> <span class="id" title="var">t2</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Ht2</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqot2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <span class="id" title="var">r0</span> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <span class="id" title="var">t1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht1</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">pinversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*Tau&nbsp;Ret*)</span><br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a> <span class="id" title="var">t1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Ht1</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqot1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a> <span class="id" title="var">t2</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Ht2</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqot2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">Ht1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">Ht2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <span class="id" title="var">r0</span> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <span class="id" title="var">t2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht2</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> <span class="id" title="var">H1</span>. <span class="id" title="var">punfold</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Heqot1</span> <span class="id" title="var">Heqot2</span> <span class="id" title="var">Ht1</span> <span class="id" title="var">Ht2</span> <span class="id" title="var">H</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*Tau&nbsp;Tau*)</span><br/>
&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a> <span class="id" title="var">t1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Ht1</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqot1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a> <span class="id" title="var">t2</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Ht2</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqot2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">t1</span> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <span class="id" title="var">t</span>). { <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht1</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a>. <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">t2</span> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <span class="id" title="var">t0</span>). { <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht2</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a>. <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H1</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*Tau&nbsp;Vis*)</span><br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a> <span class="id" title="var">t1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Ht1</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqot1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a> <span class="id" title="var">t2</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Ht2</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqot2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#itree_refine_nonempty"><span class="id" title="lemma">itree_refine_nonempty</span></a> <span class="id" title="var">t1</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">b</span> <span class="id" title="var">Hbt1</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbt1</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hbt2</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbt1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbt1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbt2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#trace_refine_vis"><span class="id" title="lemma">trace_refine_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbt2</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hb</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Y</span> [<span class="id" title="var">e0</span> [<span class="id" title="var">k0</span> <span class="id" title="var">Hb</span>] ] ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hb</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbt2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hb</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbt1</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Hb</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">Ht1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Heqot1</span> <span class="id" title="var">Heqot2</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Ht1</span> <span class="id" title="var">t1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">Hbt1</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbt1</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hbt1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a> <span class="id" title="var">t</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Ht</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#refine_set_eq_to_eutt_vis_aux"><span class="id" title="lemma">refine_set_eq_to_eutt_vis_aux</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHHbt1</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">t0</span> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a> <span class="id" title="var">t</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Ht</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*Vis&nbsp;Ret*)</span><br/>
&nbsp;&nbsp;- <span class="id" title="var">exfalso</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a> <span class="id" title="var">t1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Ht1</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqot1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a> <span class="id" title="var">t2</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Ht2</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqot2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <span class="id" title="var">r0</span> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <span class="id" title="var">t2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht2</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">pinversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*Vis&nbsp;Tau*)</span><br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a> <span class="id" title="var">t1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Ht1</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqot1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a> <span class="id" title="var">t2</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Ht2</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqot2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#itree_refine_nonempty"><span class="id" title="lemma">itree_refine_nonempty</span></a> <span class="id" title="var">t2</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">b</span> <span class="id" title="var">Hbt2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbt2</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hbt1</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbt1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbt2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbt2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#trace_refine_vis"><span class="id" title="lemma">trace_refine_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbt1</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hb</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Y</span> [<span class="id" title="var">e0</span> [<span class="id" title="var">k0</span> <span class="id" title="var">Hb</span>] ] ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hb</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbt2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hb</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbt1</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Hb</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">Ht2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Heqot1</span> <span class="id" title="var">Heqot2</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Ht2</span> <span class="id" title="var">t2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">Hbt2</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbt2</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hbt2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a> <span class="id" title="var">t</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Ht</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#refine_set_eq_to_eutt_vis_aux"><span class="id" title="lemma">refine_set_eq_to_eutt_vis_aux</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHHbt2</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">t2</span> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a> <span class="id" title="var">t</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Ht</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*Vis&nbsp;Vis*)</span><br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a> <span class="id" title="var">t1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Ht1</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqot1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a> <span class="id" title="var">t2</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Ht2</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqot2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#refine_set_eq_to_eutt_vis_aux"><span class="id" title="lemma">refine_set_eq_to_eutt_vis_aux</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trace_set_complete" class="idref" href="#trace_set_complete"><span class="id" title="lemma">trace_set_complete</span></a> : <span class="id" title="keyword">∀</span> <a id="E:214" class="idref" href="#E:214"><span class="id" title="binder">E</span></a> <a id="R:215" class="idref" href="#R:215"><span class="id" title="binder">R</span></a> (<a id="t1:216" class="idref" href="#t1:216"><span class="id" title="binder">t1</span></a> <a id="t2:217" class="idref" href="#t2:217"><span class="id" title="binder">t2</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:214"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:215"><span class="id" title="variable">R</span></a>), <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="b:218" class="idref" href="#b:218"><span class="id" title="binder">b</span></a>, <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:218"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#t1:216"><span class="id" title="variable">t1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:218"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#t2:217"><span class="id" title="variable">t2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#t1:216"><span class="id" title="variable">t1</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#t2:217"><span class="id" title="variable">t2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#refine_set_eq_to_eutt"><span class="id" title="lemma">refine_set_eq_to_eutt</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trace_refine_bind_cont_inv" class="idref" href="#trace_refine_bind_cont_inv"><span class="id" title="lemma">trace_refine_bind_cont_inv</span></a> : <span class="id" title="keyword">∀</span> (<a id="E:219" class="idref" href="#E:219"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:220" class="idref" href="#R:220"><span class="id" title="binder">R</span></a> <a id="S:221" class="idref" href="#S:221"><span class="id" title="binder">S</span></a> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="b:222" class="idref" href="#b:222"><span class="id" title="binder">b</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:219"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:220"><span class="id" title="variable">R</span></a>) (<a id="m:223" class="idref" href="#m:223"><span class="id" title="binder">m</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:219"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:220"><span class="id" title="variable">R</span></a>) (<a id="g:224" class="idref" href="#g:224"><span class="id" title="binder">g</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:220"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:219"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#S:221"><span class="id" title="variable">S</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="f:225" class="idref" href="#f:225"><span class="id" title="binder">f</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:220"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:219"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#S:221"><span class="id" title="variable">S</span></a>) (<a id="r:226" class="idref" href="#r:226"><span class="id" title="binder">r</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#R:220"><span class="id" title="variable">R</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Props.Infinite.html#may_converge"><span class="id" title="inductive">may_converge</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#r:226"><span class="id" title="variable">r</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:222"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:222"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#m:223"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:222"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#g:224"><span class="id" title="variable">g</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#m:223"><span class="id" title="variable">m</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#f:225"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#g:224"><span class="id" title="variable">g</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#r:226"><span class="id" title="variable">r</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#f:225"><span class="id" title="variable">f</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#r:226"><span class="id" title="variable">r</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">R</span> <span class="id" title="var">S</span>. <span class="id" title="var">pcofix</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">b</span> <span class="id" title="var">m</span> <span class="id" title="var">g</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">Hconv</span> <span class="id" title="var">Hrefb</span> <span class="id" title="var">Hrefbind</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span>  <span class="id" title="tactic">dependent</span> <span class="id" title="var">m</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span>  <span class="id" title="var">Hconv</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">m</span> <span class="id" title="var">Hrefb</span> <span class="id" title="var">Hrefbind</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrefbind</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_l"><span class="id" title="lemma">bind_ret_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrefbind</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrefb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#trace_refine_ret_inv_r"><span class="id" title="lemma">trace_refine_ret_inv_r</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrefb</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hrefb</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrefbind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_l"><span class="id" title="lemma">bind_ret_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrefbind</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">paco2_mon</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*m&nbsp;must&nbsp;be&nbsp;a&nbsp;vis,&nbsp;the&nbsp;continuations&nbsp;must&nbsp;refine&nbsp;then&nbsp;continuation&nbsp;in&nbsp;the&nbsp;m&nbsp;I&nbsp;use&nbsp;in&nbsp;the<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inductive&nbsp;hypothesis&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrefb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrefbind</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_vis"><span class="id" title="lemma">bind_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrefbind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#trace_refine_vis_l"><span class="id" title="lemma">trace_refine_vis_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrefb</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hvis</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hvis</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">X</span> [<span class="id" title="var">e'</span> [<span class="id" title="var">k'</span> <span class="id" title="var">Hvis</span> ] ] ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hvis</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrefbind</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_vis"><span class="id" title="lemma">bind_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrefbind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">Hrefbind</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrefbind</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrefbind</span>. <span class="id" title="var">inv</span> <span class="id" title="var">Hrefbind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ddestruction</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H2</span>. <span class="id" title="var">ddestruction</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hvis</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrefb</span>. <span class="id" title="var">punfold</span> <span class="id" title="var">Hrefb</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrefb</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrefb</span>. <span class="id" title="var">inv</span> <span class="id" title="var">Hrefb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ddestruction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#RAnsRef"><span class="id" title="inductive">RAnsRef</span></a> <span class="id" title="var">E</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <span class="id" title="var">A</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evans"><span class="id" title="constructor">evans</span></a> <span class="id" title="var">_</span> <span class="id" title="var">e'</span> <span class="id" title="var">ans</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> <span class="id" title="var">e'</span> <span class="id" title="var">ans</span> ); <span class="id" title="tactic">try</span> (<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHconv</span> (<span class="id" title="var">k'</span> <span class="id" title="var">ans</span>) ). <span class="id" title="tactic">apply</span> <span class="id" title="var">IHHconv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">H8</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">H7</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="may_converge_two_list" class="idref" href="#may_converge_two_list"><span class="id" title="lemma">may_converge_two_list</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="E:227" class="idref" href="#E:227"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="A:228" class="idref" href="#A:228"><span class="id" title="binder">A</span></a> <a id="B:229" class="idref" href="#B:229"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>) (<a id="log:230" class="idref" href="#log:230"><span class="id" title="binder">log</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#ev_list"><span class="id" title="definition">ev_list</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:227"><span class="id" title="variable">E</span></a>) (<a id="b:231" class="idref" href="#b:231"><span class="id" title="binder">b</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:227"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#A:228"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="a:232" class="idref" href="#a:232"><span class="id" title="binder">a</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#A:228"><span class="id" title="variable">A</span></a>) (<a id="log':233" class="idref" href="#log':233"><span class="id" title="binder">log'</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#ev_list"><span class="id" title="definition">ev_list</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:227"><span class="id" title="variable">E</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#ev_list_to_stream"><span class="id" title="definition">ev_list_to_stream</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#log:230"><span class="id" title="variable">log</span></a><a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">)</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:231"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#ev_list_to_stream"><span class="id" title="definition">ev_list_to_stream</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#log':233"><span class="id" title="variable">log'</span></a><a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">)</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#a:232"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Props.Infinite.html#may_converge"><span class="id" title="inductive">may_converge</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#a:232"><span class="id" title="variable">a</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b:231"><span class="id" title="variable">b</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">log'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">log</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_l"><span class="id" title="lemma">bind_ret_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#may_converge_append"><span class="id" title="lemma">may_converge_append</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#finite_list_to_stream"><span class="id" title="lemma">finite_list_to_stream</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Basics.Monad.html#20d7a3de27e35f38017a31a5b4c235e8"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <span class="id" title="var">a0</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#ev_list_to_stream"><span class="id" title="definition">ev_list_to_stream</span></a> <span class="id" title="var">log</span>)<a class="idref" href="ITree.Basics.Monad.html#20d7a3de27e35f38017a31a5b4c235e8"><span class="id" title="notation">)</span></a> <a class="idref" href="ITree.Basics.Monad.html#20d7a3de27e35f38017a31a5b4c235e8"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#ev_list_to_stream"><span class="id" title="definition">ev_list_to_stream</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">a0</span> <span class="id" title="var">log</span>) )%<span class="id" title="var">itree</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">cbn</span>. <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">log'</span> <span class="id" title="keyword">as</span> [ | <span class="id" title="var">h</span> <span class="id" title="var">t</span> ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_l"><span class="id" title="lemma">bind_ret_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">pinversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#append"><span class="id" title="definition">append</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_vis"><span class="id" title="lemma">bind_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">pinversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ddestruction</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#ev_list_to_stream"><span class="id" title="definition">ev_list_to_stream</span></a> <span class="id" title="var">log</span> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <span class="id" title="var">b</span> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#ev_list_to_stream"><span class="id" title="definition">ev_list_to_stream</span></a> <span class="id" title="var">t</span> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">REL</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHlog</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="all_infinite_bind_append" class="idref" href="#all_infinite_bind_append"><span class="id" title="lemma">all_infinite_bind_append</span></a>: <span class="id" title="keyword">∀</span> (<a id="E:234" class="idref" href="#E:234"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="A:235" class="idref" href="#A:235"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="log:236" class="idref" href="#log:236"><span class="id" title="binder">log</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#ev_list"><span class="id" title="definition">ev_list</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:234"><span class="id" title="variable">E</span></a>) (<a id="b':237" class="idref" href="#b':237"><span class="id" title="binder">b'</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#EvAns"><span class="id" title="inductive">EvAns</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#E:234"><span class="id" title="variable">E</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#A:235"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Props.Infinite.html#all_infinite"><span class="id" title="definition">all_infinite</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#ev_list_to_stream"><span class="id" title="definition">ev_list_to_stream</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#log:236"><span class="id" title="variable">log</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b':237"><span class="id" title="variable">b'</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Props.Infinite.html#all_infinite"><span class="id" title="definition">all_infinite</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#b':237"><span class="id" title="variable">b'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">A</span> <span class="id" title="var">log</span> <span class="id" title="var">b'</span> <span class="id" title="var">Hdiv</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">log</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdiv</span>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_l"><span class="id" title="lemma">bind_ret_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdiv</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">IHlog</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdiv</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#append"><span class="id" title="definition">append</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdiv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_vis"><span class="id" title="lemma">bind_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdiv</span>. <span class="id" title="var">pinversion</span> <span class="id" title="var">Hdiv</span>. <span class="id" title="var">ddestruction</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
