<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="https://github.com/DeepSpec/InteractionTrees">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">ITree.Extra.Dijkstra.StateIOTrace</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Arith.Arith.html#"><span class="id" title="library">Arith</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Strings.String.html#"><span class="id" title="library">String</span></a>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ExtLib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="library">Data.String</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="library">Structures.Monad</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="library">Core.RelDec</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="library">Data.Map.FMapAList</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Paco</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">paco</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ITree</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Axioms.html#"><span class="id" title="library">Axioms</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.ITree.html#"><span class="id" title="library">ITree</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.ITreeFacts.html#"><span class="id" title="library">ITreeFacts</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Eq.Rutt.html#"><span class="id" title="library">Eq.Rutt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Events.MapDefault.html#"><span class="id" title="library">Events.MapDefault</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Events.State.html#"><span class="id" title="library">Events.State</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Events.StateFacts.html#"><span class="id" title="library">Events.StateFacts</span></a>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ITree.Extra</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#"><span class="id" title="library">ITrace.ITraceDefinition</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#"><span class="id" title="library">ITrace.ITraceFacts</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.ITrace.ITracePreds.html#"><span class="id" title="library">ITrace.ITracePreds</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.Dijkstra.DelaySpecMonad.html#"><span class="id" title="library">Dijkstra.DelaySpecMonad</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.Dijkstra.DijkstraMonad.html#"><span class="id" title="library">Dijkstra.DijkstraMonad</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#"><span class="id" title="library">Dijkstra.TracesIT</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.Dijkstra.StateSpecT.html#"><span class="id" title="library">Dijkstra.StateSpecT</span></a>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="ITree.Basics.Basics.html#Monads"><span class="id" title="module">Monads</span></a>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="module">MonadNotation</span>.<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">monad_scope</span>.<br/>

<br/>
</div>

<div class="doc">
These enable typeclass instances for Maps keyed by strings and values 
</div>
<div class="code">
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="RelDec_string" class="idref" href="#RelDec_string"><span class="id" title="instance">RelDec_string</span></a> : <span class="id" title="class">RelDec</span> (@<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) :=<br/>
&nbsp;&nbsp;{ <span class="id" title="method">rel_dec</span> := <span class="id" title="keyword">fun</span> <a id="s1:1" class="idref" href="#s1:1"><span class="id" title="binder">s1</span></a> <a id="s2:2" class="idref" href="#s2:2"><span class="id" title="binder">s2</span></a> ⇒ <span class="id" title="keyword">if</span> <span class="id" title="definition">string_dec</span> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#s1:1"><span class="id" title="variable">s1</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#s2:2"><span class="id" title="variable">s2</span></a> <span class="id" title="keyword">then</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> }.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="RelDec_string_Correct" class="idref" href="#RelDec_string_Correct"><span class="id" title="instance">RelDec_string_Correct</span></a>: <span class="id" title="class">RelDec_Correct</span> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#RelDec_string"><span class="id" title="instance">RelDec_string</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <span class="id" title="method">rel_dec</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">string_dec</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">EQ</span>; [<span class="id" title="tactic">intros</span> <span class="id" title="var">_</span>; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">string_dec_sound</span>; <span class="id" title="tactic">assumption</span> | <span class="id" title="tactic">intros</span> <span class="id" title="var">abs</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">abs</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">string_dec_sound</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">unfold</span> <span class="id" title="method">rel_dec</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="env" class="idref" href="#env"><span class="id" title="definition">env</span></a> := <span class="id" title="definition">alist</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>.<br/>

<br/>
<span class="id" title="keyword">Variant</span> <a id="StateE" class="idref" href="#StateE"><span class="id" title="inductive">StateE</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;| <a id="GetE" class="idref" href="#GetE"><span class="id" title="constructor">GetE</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#StateE:3"><span class="id" title="inductive">StateE</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><br/>
&nbsp;&nbsp;| <a id="PutE" class="idref" href="#PutE"><span class="id" title="constructor">PutE</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#StateE:3"><span class="id" title="inductive">StateE</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a><br/>
.<br/>

<br/>
<span class="id" title="keyword">Variant</span> <a id="IO" class="idref" href="#IO"><span class="id" title="inductive">IO</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;| <a id="Read" class="idref" href="#Read"><span class="id" title="constructor">Read</span></a> : <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#IO:5"><span class="id" title="inductive">IO</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><br/>
&nbsp;&nbsp;| <a id="Write" class="idref" href="#Write"><span class="id" title="constructor">Write</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#IO:5"><span class="id" title="inductive">IO</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a><br/>
.<br/>
<span class="id" title="keyword">Notation</span> <a id="stateiotree" class="idref" href="#stateiotree"><span class="id" title="abbreviation">stateiotree</span></a> <span class="id" title="var">A</span> := (<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> (<a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#StateE"><span class="id" title="inductive">StateE</span></a> <a class="idref" href="ITree.Indexed.Sum.html#025d6c7e3112e73e8cdbce045a3e6f38"><span class="id" title="notation">+'</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#IO"><span class="id" title="inductive">IO</span></a>) <span class="id" title="var">A</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="StateIOSpec" class="idref" href="#StateIOSpec"><span class="id" title="definition">StateIOSpec</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span> := <a class="idref" href="ITree.Extra.Dijkstra.StateSpecT.html#StateSpecT"><span class="id" title="definition">StateSpecT</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#env"><span class="id" title="definition">env</span></a> (<a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpec"><span class="id" title="definition">TraceSpec</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#IO"><span class="id" title="inductive">IO</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="SIOSpecOrder" class="idref" href="#SIOSpecOrder"><span class="id" title="definition">SIOSpecOrder</span></a> := <a class="idref" href="ITree.Extra.Dijkstra.StateSpecT.html#StateSpecTOrder"><span class="id" title="instance">StateSpecTOrder</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#env"><span class="id" title="definition">env</span></a> (<a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpec"><span class="id" title="definition">TraceSpec</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#IO"><span class="id" title="inductive">IO</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="SIOSpecOrderLaws" class="idref" href="#SIOSpecOrderLaws"><span class="id" title="definition">SIOSpecOrderLaws</span></a> := <a class="idref" href="ITree.Extra.Dijkstra.StateSpecT.html#StateSpecTOrderedLaws"><span class="id" title="instance">StateSpecTOrderedLaws</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#env"><span class="id" title="definition">env</span></a> (<a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpec"><span class="id" title="definition">TraceSpec</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#IO"><span class="id" title="inductive">IO</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="SIOSpecEq" class="idref" href="#SIOSpecEq"><span class="id" title="definition">SIOSpecEq</span></a>  := <a class="idref" href="ITree.Extra.Dijkstra.StateSpecT.html#StateSpecTEq"><span class="id" title="instance">StateSpecTEq</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#env"><span class="id" title="definition">env</span></a> (<a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpec"><span class="id" title="definition">TraceSpec</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#IO"><span class="id" title="inductive">IO</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="SIOObs" class="idref" href="#SIOObs"><span class="id" title="definition">SIOObs</span></a> := <a class="idref" href="ITree.Extra.Dijkstra.StateSpecT.html#EffectObsStateT"><span class="id" title="instance">EffectObsStateT</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#env"><span class="id" title="definition">env</span></a> (<a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpec"><span class="id" title="definition">TraceSpec</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#IO"><span class="id" title="inductive">IO</span></a>) (<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#IO"><span class="id" title="inductive">IO</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="SIOMorph" class="idref" href="#SIOMorph"><span class="id" title="definition">SIOMorph</span></a> :=<a class="idref" href="ITree.Extra.Dijkstra.StateSpecT.html#MonadMorphimStateT"><span class="id" title="instance">MonadMorphimStateT</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#env"><span class="id" title="definition">env</span></a> (<a class="idref" href="ITree.Extra.Dijkstra.TracesIT.html#TraceSpec"><span class="id" title="definition">TraceSpec</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#IO"><span class="id" title="inductive">IO</span></a>) (<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#IO"><span class="id" title="inductive">IO</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="verify_cond" class="idref" href="#verify_cond"><span class="id" title="definition">verify_cond</span></a> {<a id="A:7" class="idref" href="#A:7"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} := <a class="idref" href="ITree.Extra.Dijkstra.DijkstraMonad.html#DijkstraProp"><span class="id" title="definition">DijkstraProp</span></a> (<a class="idref" href="ITree.Basics.Basics.html#Monads.stateT"><span class="id" title="definition">stateT</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#env"><span class="id" title="definition">env</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#IO"><span class="id" title="inductive">IO</span></a>)) <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#StateIOSpec"><span class="id" title="definition">StateIOSpec</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#SIOObs"><span class="id" title="definition">SIOObs</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#A:7"><span class="id" title="variable">A</span></a>.<br/>

<br/>
<span class="comment">(*Predicate&nbsp;on&nbsp;initial&nbsp;state&nbsp;and&nbsp;initial&nbsp;log*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="StateIOSpecPre" class="idref" href="#StateIOSpecPre"><span class="id" title="definition">StateIOSpecPre</span></a> : <span class="id" title="keyword">Type</span> := <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#env"><span class="id" title="definition">env</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#ev_list"><span class="id" title="definition">ev_list</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#IO"><span class="id" title="inductive">IO</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>.<br/>
<span class="comment">(*Predicate&nbsp;on&nbsp;final&nbsp;log&nbsp;and&nbsp;possible&nbsp;return&nbsp;value*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="StateIOSpecPost" class="idref" href="#StateIOSpecPost"><span class="id" title="definition">StateIOSpecPost</span></a> (<a id="A:8" class="idref" href="#A:8"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>) : <span class="id" title="keyword">Type</span> := <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#IO"><span class="id" title="inductive">IO</span></a> (<a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#env"><span class="id" title="definition">env</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#A:8"><span class="id" title="variable">A</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>.<br/>

<br/>
<span class="id" title="keyword">Program Definition</span> <a id="encode" class="idref" href="#encode"><span class="id" title="definition">encode</span></a> {<a id="A:9" class="idref" href="#A:9"><span class="id" title="binder">A</span></a>} (<a id="pre:10" class="idref" href="#pre:10"><span class="id" title="binder">pre</span></a> : <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#StateIOSpecPre"><span class="id" title="definition">StateIOSpecPre</span></a>) (<a id="post:11" class="idref" href="#post:11"><span class="id" title="binder">post</span></a> : <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#StateIOSpecPost"><span class="id" title="definition">StateIOSpecPost</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#A:9"><span class="id" title="variable">A</span></a>) : <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#StateIOSpec"><span class="id" title="definition">StateIOSpec</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#A:9"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="s:12" class="idref" href="#s:12"><span class="id" title="binder">s</span></a> <a id="log:13" class="idref" href="#log:13"><span class="id" title="binder">log</span></a> <a id="p:14" class="idref" href="#p:14"><span class="id" title="binder">p</span></a> ⇒ <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#pre:10"><span class="id" title="variable">pre</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#s:12"><span class="id" title="variable">s</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#log:13"><span class="id" title="variable">log</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="tr:15" class="idref" href="#tr:15"><span class="id" title="binder">tr</span></a>, <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#post:11"><span class="id" title="variable">post</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#tr:15"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#p:14"><span class="id" title="variable">p</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#tr:15"><span class="id" title="variable">tr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="PrintMults" class="idref" href="#PrintMults"><span class="id" title="section">PrintMults</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a id="PrintMults.X" class="idref" href="#PrintMults.X"><span class="id" title="variable">X</span></a> <a id="PrintMults.Y" class="idref" href="#PrintMults.Y"><span class="id" title="variable">Y</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<a id="HXY:18" class="idref" href="#HXY:18"><span class="id" title="binder">HXY</span></a> : <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#PrintMults.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#PrintMults.Y"><span class="id" title="variable">Y</span></a>).<br/>
&nbsp;&nbsp;<span class="comment">(*this&nbsp;part&nbsp;has&nbsp;some&nbsp;pretty&nbsp;basic&nbsp;errors*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variant</span> <a id="write_next_mult" class="idref" href="#write_next_mult"><span class="id" title="inductive">write_next_mult</span></a>  (<a id="n:19" class="idref" href="#n:19"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <span class="id" title="keyword">∀</span> <a id="B:20" class="idref" href="#B:20"><span class="id" title="binder">B</span></a>, <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#IO"><span class="id" title="inductive">IO</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#B:20"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#B:20"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="wnm" class="idref" href="#wnm"><span class="id" title="constructor">wnm</span></a> : <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#write_next_mult:21"><span class="id" title="inductive">write_next_mult</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#n:19"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> (<a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#Write"><span class="id" title="constructor">Write</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#n:19"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="wnm_ev" class="idref" href="#wnm_ev"><span class="id" title="definition">wnm_ev</span></a> (<a id="next:23" class="idref" href="#next:23"><span class="id" title="binder">next</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <a id="A:24" class="idref" href="#A:24"><span class="id" title="binder">A</span></a>  (<a id="io:25" class="idref" href="#io:25"><span class="id" title="binder">io</span></a> : <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#IO"><span class="id" title="inductive">IO</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#A:24"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">_</span> : <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#A:24"><span class="id" title="variable">A</span></a>) : <span class="id" title="keyword">∀</span> <a id="B:26" class="idref" href="#B:26"><span class="id" title="binder">B</span></a>, <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#IO"><span class="id" title="inductive">IO</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#B:26"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#B:26"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#io:25"><span class="id" title="variable">io</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#Write"><span class="id" title="constructor">Write</span></a> <span class="id" title="var">n</span> ⇒ <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#write_next_mult"><span class="id" title="inductive">write_next_mult</span></a> (<a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#next:23"><span class="id" title="variable">next</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#Read"><span class="id" title="constructor">Read</span></a> ⇒ <span class="id" title="definition">bot3</span> <span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variant</span> <a id="writes_n" class="idref" href="#writes_n"><span class="id" title="inductive">writes_n</span></a> (<a id="n:28" class="idref" href="#n:28"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <span class="id" title="keyword">∀</span> <a id="A:29" class="idref" href="#A:29"><span class="id" title="binder">A</span></a>, <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#IO"><span class="id" title="inductive">IO</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#A:29"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#A:29"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="wn" class="idref" href="#wn"><span class="id" title="constructor">wn</span></a> : <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#writes_n:30"><span class="id" title="inductive">writes_n</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#n:28"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> (<a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#Write"><span class="id" title="constructor">Write</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#n:28"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="mults_n" class="idref" href="#mults_n"><span class="id" title="definition">mults_n</span></a> {<a id="R:32" class="idref" href="#R:32"><span class="id" title="binder">R</span></a> : <span class="id" title="keyword">Type</span>} (<a id="n:33" class="idref" href="#n:33"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="tr:34" class="idref" href="#tr:34"><span class="id" title="binder">tr</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#IO"><span class="id" title="inductive">IO</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#R:32"><span class="id" title="variable">R</span></a>) := <a class="idref" href="ITree.Extra.ITrace.ITracePreds.html#state_machine"><span class="id" title="definition">state_machine</span></a> (<a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#wnm_ev"><span class="id" title="definition">wnm_ev</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#n:33"><span class="id" title="variable">n</span></a>) <span class="id" title="definition">bot4</span> (<a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#writes_n"><span class="id" title="inductive">writes_n</span></a> 0) <span class="id" title="definition">bot1</span> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#tr:34"><span class="id" title="variable">tr</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">CoFixpoint</span> <a id="mults_of_n_from_m" class="idref" href="#mults_of_n_from_m"><span class="id" title="definition">mults_of_n_from_m</span></a> {<a id="R:35" class="idref" href="#R:35"><span class="id" title="binder">R</span></a> : <span class="id" title="keyword">Type</span>} (<a id="n:36" class="idref" href="#n:36"><span class="id" title="binder">n</span></a> <a id="m:37" class="idref" href="#m:37"><span class="id" title="binder">m</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#IO"><span class="id" title="inductive">IO</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#R:35"><span class="id" title="variable">R</span></a>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evans"><span class="id" title="constructor">evans</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> (<a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#Write"><span class="id" title="constructor">Write</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#m:37"><span class="id" title="variable">m</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#mults_of_n_from_m:38"><span class="id" title="definition">mults_of_n_from_m</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#n:36"><span class="id" title="variable">n</span></a> (<a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#n:36"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#m:37"><span class="id" title="variable">m</span></a>) ).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="mults_of_n" class="idref" href="#mults_of_n"><span class="id" title="definition">mults_of_n</span></a> {<a id="R:39" class="idref" href="#R:39"><span class="id" title="binder">R</span></a> : <span class="id" title="keyword">Type</span>} (<a id="n:40" class="idref" href="#n:40"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#IO"><span class="id" title="inductive">IO</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#R:39"><span class="id" title="variable">R</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#mults_of_n_from_m"><span class="id" title="definition">mults_of_n_from_m</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#n:40"><span class="id" title="variable">n</span></a> 0.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="print_mults_pre" class="idref" href="#print_mults_pre"><span class="id" title="definition">print_mults_pre</span></a> : <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#StateIOSpecPre"><span class="id" title="definition">StateIOSpecPre</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="s:41" class="idref" href="#s:41"><span class="id" title="binder">s</span></a> <a id="log:42" class="idref" href="#log:42"><span class="id" title="binder">log</span></a> ⇒ <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#log:42"><span class="id" title="variable">log</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a>  <a class="idref" href="ITree.Events.MapDefault.html#lookup_default"><span class="id" title="definition">lookup_default</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#PrintMults.Y"><span class="id" title="variable">Y</span></a> 0 <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#s:41"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 0.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*Is&nbsp;there&nbsp;going&nbsp;to&nbsp;be&nbsp;a&nbsp;problem&nbsp;introducing&nbsp;k?*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="print_mults_post" class="idref" href="#print_mults_post"><span class="id" title="definition">print_mults_post</span></a> : <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#StateIOSpecPost"><span class="id" title="definition">StateIOSpecPost</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="tr:43" class="idref" href="#tr:43"><span class="id" title="binder">tr</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="n:44" class="idref" href="#n:44"><span class="id" title="binder">n</span></a> <a id="k:45" class="idref" href="#k:45"><span class="id" title="binder">k</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> (<a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#tr:43"><span class="id" title="variable">tr</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evans"><span class="id" title="constructor">evans</span></a> <span class="id" title="var">_</span> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#Read"><span class="id" title="constructor">Read</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#n:44"><span class="id" title="variable">n</span></a>) <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#k:45"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#mults_of_n"><span class="id" title="definition">mults_of_n</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#n:44"><span class="id" title="variable">n</span></a><a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">)</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#k:45"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">)</span></a>)%<span class="id" title="var">itree</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="print_mults" class="idref" href="#print_mults"><span class="id" title="definition">print_mults</span></a> : <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#stateiotree"><span class="id" title="abbreviation">stateiotree</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;<a id="x:46" class="idref" href="#x:46"><span class="id" title="binder">x</span></a> <span class="id" title="notation">&lt;-</span> <a class="idref" href="ITree.Core.Subevent.html#trigger"><span class="id" title="abbreviation">trigger</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#Read"><span class="id" title="constructor">Read</span></a><span class="id" title="notation">;;</span><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Core.Subevent.html#trigger"><span class="id" title="abbreviation">trigger</span></a> (<a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#PutE"><span class="id" title="constructor">PutE</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#PrintMults.X"><span class="id" title="variable">X</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#x:46"><span class="id" title="variable">x</span></a>)<span class="id" title="notation">;;</span><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.iter"><span class="id" title="definition">ITree.iter</span></a> ( <span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="y:47" class="idref" href="#y:47"><span class="id" title="binder">y</span></a> <span class="id" title="notation">&lt;-</span> <a class="idref" href="ITree.Core.Subevent.html#trigger"><span class="id" title="abbreviation">trigger</span></a> (<a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#GetE"><span class="id" title="constructor">GetE</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#PrintMults.Y"><span class="id" title="variable">Y</span></a>)<span class="id" title="notation">;;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Core.Subevent.html#trigger"><span class="id" title="abbreviation">trigger</span></a> (<a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#Write"><span class="id" title="constructor">Write</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#y:47"><span class="id" title="variable">y</span></a>)<span class="id" title="notation">;;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="x:48" class="idref" href="#x:48"><span class="id" title="binder">x</span></a> <span class="id" title="notation">&lt;-</span> <a class="idref" href="ITree.Core.Subevent.html#trigger"><span class="id" title="abbreviation">trigger</span></a> (<a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#GetE"><span class="id" title="constructor">GetE</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#PrintMults.X"><span class="id" title="variable">X</span></a>)<span class="id" title="notation">;;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Core.Subevent.html#trigger"><span class="id" title="abbreviation">trigger</span></a> (<a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#PutE"><span class="id" title="constructor">PutE</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#PrintMults.Y"><span class="id" title="variable">Y</span></a> (<a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#y:47"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#x:48"><span class="id" title="variable">x</span></a>))<span class="id" title="notation">;;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>)<br/>
&nbsp;&nbsp;&nbsp;) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="add" class="idref" href="#add"><span class="id" title="definition">add</span></a> (<a id="V:49" class="idref" href="#V:49"><span class="id" title="binder">V</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) (<a id="v:50" class="idref" href="#v:50"><span class="id" title="binder">v</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="s:51" class="idref" href="#s:51"><span class="id" title="binder">s</span></a> : <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#env"><span class="id" title="definition">env</span></a>) : <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#env"><span class="id" title="definition">env</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">alist_add</span> <span class="id" title="var">_</span> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#V:49"><span class="id" title="variable">V</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#v:50"><span class="id" title="variable">v</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#s:51"><span class="id" title="variable">s</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="handleIOStateE" class="idref" href="#handleIOStateE"><span class="id" title="definition">handleIOStateE</span></a> (<a id="A:52" class="idref" href="#A:52"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>) (<a id="ev:53" class="idref" href="#ev:53"><span class="id" title="binder">ev</span></a> : <a class="idref" href="ITree.Indexed.Sum.html#025d6c7e3112e73e8cdbce045a3e6f38"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#StateE"><span class="id" title="inductive">StateE</span></a> <a class="idref" href="ITree.Indexed.Sum.html#025d6c7e3112e73e8cdbce045a3e6f38"><span class="id" title="notation">+'</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#IO"><span class="id" title="inductive">IO</span></a><a class="idref" href="ITree.Indexed.Sum.html#025d6c7e3112e73e8cdbce045a3e6f38"><span class="id" title="notation">)</span></a> <a class="idref" href="ITree.Indexed.Sum.html#025d6c7e3112e73e8cdbce045a3e6f38"><span class="id" title="notation">A</span></a>) : <a class="idref" href="ITree.Basics.Basics.html#Monads.stateT"><span class="id" title="definition">stateT</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#env"><span class="id" title="definition">env</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#IO"><span class="id" title="inductive">IO</span></a>) <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#A:52"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="s:54" class="idref" href="#s:54"><span class="id" title="binder">s</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#ev:53"><span class="id" title="variable">ev</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ITree.Indexed.Sum.html#inl1"><span class="id" title="constructor">inl1</span></a> <span class="id" title="var">ev'</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">ev'</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#GetE"><span class="id" title="constructor">GetE</span></a> <span class="id" title="var">V</span> ⇒ <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#s:54"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ITree.Events.MapDefault.html#lookup_default"><span class="id" title="definition">lookup_default</span></a> <span class="id" title="var">V</span> 0 <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#s:54"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#PutE"><span class="id" title="constructor">PutE</span></a> <span class="id" title="var">V</span> <span class="id" title="var">v</span> ⇒ <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="method">Maps.add</span> <span class="id" title="var">V</span> <span class="id" title="var">v</span> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#s:54"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ITree.Indexed.Sum.html#inr1"><span class="id" title="constructor">inr1</span></a> <span class="id" title="var">ev'</span> ⇒ <a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <span class="id" title="var">ev'</span> (<span class="id" title="keyword">fun</span> <a id="x:57" class="idref" href="#x:57"><span class="id" title="binder">x</span></a> ⇒ <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#s:54"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#x:57"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> )<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Ltac</span> <span class="id" title="var">unf_res</span> := <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Basics.CategoryOps.html#resum"><span class="id" title="definition">resum</span></a>, <a class="idref" href="ITree.Basics.CategoryOps.html#ReSum_id"><span class="id" title="instance">ReSum_id</span></a>, <a class="idref" href="ITree.Basics.CategoryOps.html#id_"><span class="id" title="definition">id_</span></a>, <a class="idref" href="ITree.Indexed.Function.html#Id_IFun"><span class="id" title="instance">Id_IFun</span></a> <span class="id" title="tactic">in</span> ×.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="lookup_eq" class="idref" href="#lookup_eq"><span class="id" title="lemma">lookup_eq</span></a> : <span class="id" title="keyword">∀</span> (<a id="s:58" class="idref" href="#s:58"><span class="id" title="binder">s</span></a> : <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#env"><span class="id" title="definition">env</span></a>) (<a id="x:59" class="idref" href="#x:59"><span class="id" title="binder">x</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) (<a id="v:60" class="idref" href="#v:60"><span class="id" title="binder">v</span></a> <a id="d:61" class="idref" href="#d:61"><span class="id" title="binder">d</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Events.MapDefault.html#lookup_default"><span class="id" title="definition">lookup_default</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#x:59"><span class="id" title="variable">x</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#d:61"><span class="id" title="variable">d</span></a> (<span class="id" title="method">Maps.add</span> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#x:59"><span class="id" title="variable">x</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#v:60"><span class="id" title="variable">v</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#s:58"><span class="id" title="variable">s</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#v:60"><span class="id" title="variable">v</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="method">Maps.mapsto</span> <span class="id" title="var">x</span> <span class="id" title="var">v</span> (<span class="id" title="method">Maps.add</span> <span class="id" title="var">x</span> <span class="id" title="var">v</span> <span class="id" title="var">s</span>) ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="method">Maps.mapsto_add_eq</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="method">Maps.mapsto_lookup</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Events.MapDefault.html#lookup_default"><span class="id" title="definition">lookup_default</span></a>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="lookup_nin" class="idref" href="#lookup_nin"><span class="id" title="lemma">lookup_nin</span></a> : <span class="id" title="keyword">∀</span> (<a id="x:62" class="idref" href="#x:62"><span class="id" title="binder">x</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) (<a id="s:63" class="idref" href="#s:63"><span class="id" title="binder">s</span></a> : <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#env"><span class="id" title="definition">env</span></a>), <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="v:64" class="idref" href="#v:64"><span class="id" title="binder">v</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">¬</span></a> <span class="id" title="method">Maps.mapsto</span> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#x:62"><span class="id" title="variable">x</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#v:64"><span class="id" title="variable">v</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#s:63"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="method">Maps.lookup</span> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#x:62"><span class="id" title="variable">x</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#s:63"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">s</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">s</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">s</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">y</span> <span class="id" title="var">v</span>]. <span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Strings.String.html#string_dec"><span class="id" title="definition">Strings.String.string_dec</span></a> <span class="id" title="var">x</span> <span class="id" title="var">y</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">subst</span>. <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">RelDec.rel_dec_eq_true</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#RelDec_string_Correct"><span class="id" title="instance">RelDec_string_Correct</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">RelDec.rel_dec_neq_false</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#RelDec_string_Correct"><span class="id" title="instance">RelDec_string_Correct</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="method">Maps.lookup</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IHs</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHs</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hcontra</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">RelDec.rel_dec_neq_false</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#RelDec_string_Correct"><span class="id" title="instance">RelDec_string_Correct</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="lookup_neq" class="idref" href="#lookup_neq"><span class="id" title="lemma">lookup_neq</span></a> : <span class="id" title="keyword">∀</span> (<a id="s:65" class="idref" href="#s:65"><span class="id" title="binder">s</span></a> : <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#env"><span class="id" title="definition">env</span></a>) (<a id="x:66" class="idref" href="#x:66"><span class="id" title="binder">x</span></a> <a id="y:67" class="idref" href="#y:67"><span class="id" title="binder">y</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) (<a id="v:68" class="idref" href="#v:68"><span class="id" title="binder">v</span></a> <a id="d:69" class="idref" href="#d:69"><span class="id" title="binder">d</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>), <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#x:66"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#y:67"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Events.MapDefault.html#lookup_default"><span class="id" title="definition">lookup_default</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#x:66"><span class="id" title="variable">x</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#d:69"><span class="id" title="variable">d</span></a> (<span class="id" title="method">Maps.add</span> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#y:67"><span class="id" title="variable">y</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#v:68"><span class="id" title="variable">v</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#s:65"><span class="id" title="variable">s</span></a>)  <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.Events.MapDefault.html#lookup_default"><span class="id" title="definition">lookup_default</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#x:66"><span class="id" title="variable">x</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#d:69"><span class="id" title="variable">d</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#s:65"><span class="id" title="variable">s</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Axioms.html#classic"><span class="id" title="definition">classic</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="v':71" class="idref" href="#v':71"><span class="id" title="binder">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <span class="id" title="method">Maps.mapsto</span> <span class="id" title="var">x</span> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#v':70"><span class="id" title="variable">v'</span></a> <span class="id" title="var">s</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">v'</span> <span class="id" title="var">Hv'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="method">Maps.mapsto</span> <span class="id" title="var">x</span> <span class="id" title="var">v'</span> (<span class="id" title="method">Maps.add</span> <span class="id" title="var">y</span> <span class="id" title="var">v</span> <span class="id" title="var">s</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="method">Maps.mapsto_add_neq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv'</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="method">Maps.mapsto_lookup</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">apply</span> <span class="id" title="method">Maps.mapsto_lookup</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv'</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Events.MapDefault.html#lookup_default"><span class="id" title="definition">lookup_default</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hv'</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<span class="id" title="keyword">∀</span> <a id="v':73" class="idref" href="#v':73"><span class="id" title="binder">v'</span></a>,<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">¬</span></a> <span class="id" title="method">Maps.mapsto</span> <span class="id" title="var">x</span> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#v':72"><span class="id" title="variable">v'</span></a> <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">v'</span> <span class="id" title="var">Hc</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">v'</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#lookup_nin"><span class="id" title="lemma">lookup_nin</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hs</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Events.MapDefault.html#lookup_default"><span class="id" title="definition">lookup_default</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="keyword">∀</span> <a id="v':75" class="idref" href="#v':75"><span class="id" title="binder">v'</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">¬</span></a><span class="id" title="method">Maps.mapsto</span> <span class="id" title="var">x</span> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#v':74"><span class="id" title="variable">v'</span></a> (<span class="id" title="method">Maps.add</span> <span class="id" title="var">y</span> <span class="id" title="var">v</span> <span class="id" title="var">s</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">v'</span> <span class="id" title="var">Hcontra</span>. <span class="id" title="tactic">apply</span> <span class="id" title="method">Maps.mapsto_add_neq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcontra</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#lookup_nin"><span class="id" title="lemma">lookup_nin</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hs'</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hs'</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Ltac</span> <span class="id" title="var">prove_arg</span> <span class="id" title="var">H</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">H'</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">type</span> <span class="id" title="keyword">of</span> <span class="id" title="var">H</span> <span class="id" title="keyword">with</span> ?<span class="id" title="var">P</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">assert</span> (<span class="id" title="var">H'</span> : <span class="id" title="var">P</span>); <span class="id" title="tactic">try</span> (<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H</span> <span class="id" title="var">H'</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">H'</span>) <span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="print_mults_sats_spec" class="idref" href="#print_mults_sats_spec"><span class="id" title="lemma">print_mults_sats_spec</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#verify_cond"><span class="id" title="definition">verify_cond</span></a> (<a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#encode"><span class="id" title="definition">encode</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#print_mults_pre"><span class="id" title="definition">print_mults_pre</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#print_mults_post"><span class="id" title="definition">print_mults_post</span></a>) (<a class="idref" href="ITree.Events.State.html#interp_state"><span class="id" title="definition">interp_state</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#handleIOStateE"><span class="id" title="definition">handleIOStateE</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#print_mults"><span class="id" title="definition">print_mults</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">log</span> [<span class="id" title="var">p</span> <span class="id" title="var">Hp</span>] [<span class="id" title="var">Hpre</span> <span class="id" title="var">H'</span>] <span class="id" title="var">b</span> <span class="id" title="var">Href</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H'</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">H'</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#print_mults_pre"><span class="id" title="definition">print_mults_pre</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpre</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hpre</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hlog</span> <span class="id" title="var">Henv</span>]. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#print_mults_post"><span class="id" title="definition">print_mults_post</span></a>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#append_nil"><span class="id" title="lemma">append_nil</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#print_mults"><span class="id" title="definition">print_mults</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Events.StateFacts.html#interp_state_bind"><span class="id" title="lemma">interp_state_bind</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Events.StateFacts.html#interp_state_trigger"><span class="id" title="lemma">interp_state_trigger</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_vis"><span class="id" title="lemma">bind_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#trace_refine_vis"><span class="id" title="lemma">trace_refine_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hbhd</span>. <span class="id" title="var">basic_solve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hbhd</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>. <span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">Hbhd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">e0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2 : <span class="id" title="tactic">destruct</span> <span class="id" title="var">ev</span>; <span class="id" title="tactic">assert</span> <a class="idref" href="ITree.Basics.Basics.html#void"><span class="id" title="abbreviation">void</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hempty</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">constructor</span>; <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">ev</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="var">pinversion</span> <span class="id" title="var">Href</span>. <span class="id" title="var">ddestruction</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">ans</span> <span class="id" title="var">into</span> <span class="id" title="var">n</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">type</span> <span class="id" title="keyword">of</span> <span class="id" title="var">Href</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_</span> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <span class="id" title="var">_</span> ?<span class="id" title="var">k</span> ⇒ <span class="id" title="var">remember</span> <span class="id" title="var">k</span> <span class="id" title="keyword">as</span> <span class="id" title="var">kp</span> <span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">k0</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Henv</span>. <span class="id" title="var">unf_res</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pinversion</span> <span class="id" title="var">Href</span>. <span class="id" title="var">ddestruction</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="var">ddestruction</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Hp</span> <span class="id" title="var">p</span> <span class="id" title="var">Hbhd</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">k0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <span class="id" title="var">kp</span> <span class="id" title="var">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">clear</span> <span class="id" title="var">Heqkp</span>. <span class="id" title="var">pinversion</span> <span class="id" title="var">Href</span>. <span class="id" title="var">ddestruction</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Basics.CategoryOps.html#resum"><span class="id" title="definition">resum</span></a>, <a class="idref" href="ITree.Basics.CategoryOps.html#ReSum_id"><span class="id" title="instance">ReSum_id</span></a>, <a class="idref" href="ITree.Basics.CategoryOps.html#id_"><span class="id" title="definition">id_</span></a>, <a class="idref" href="ITree.Indexed.Function.html#Id_IFun"><span class="id" title="instance">Id_IFun</span></a> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="var">ddestruction</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#RAnsRef"><span class="id" title="inductive">RAnsRef</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#IO"><span class="id" title="inductive">IO</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evans"><span class="id" title="constructor">evans</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#Read"><span class="id" title="constructor">Read</span></a> <span class="id" title="var">n</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#Read"><span class="id" title="constructor">Read</span></a> <span class="id" title="var">n</span>); <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H6</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Href</span> <span class="id" title="var">ev</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_l"><span class="id" title="lemma">bind_ret_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Events.StateFacts.html#interp_state_bind"><span class="id" title="lemma">interp_state_bind</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Events.StateFacts.html#interp_state_trigger"><span class="id" title="lemma">interp_state_trigger</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_l"><span class="id" title="lemma">bind_ret_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (@<a class="idref" href="ITree.Events.StateFacts.html#interp_state_iter'"><span class="id" title="lemma">interp_state_iter'</span></a> (<a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#StateE"><span class="id" title="inductive">StateE</span></a> <a class="idref" href="ITree.Indexed.Sum.html#025d6c7e3112e73e8cdbce045a3e6f38"><span class="id" title="notation">+'</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#IO"><span class="id" title="inductive">IO</span></a>) ) <span class="id" title="keyword">as</span> <span class="id" title="var">Hiter</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Events.StateFacts.html#state_eq"><span class="id" title="definition">state_eq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hiter</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hiter</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Hiter</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="method">Maps.add</span> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#PrintMults.X"><span class="id" title="variable">X</span></a> <span class="id" title="var">n</span> <span class="id" title="var">s</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">si</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">si</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="definition">alist_add</span> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#RelDec_string"><span class="id" title="instance">RelDec_string</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#PrintMults.X"><span class="id" title="variable">X</span></a> <span class="id" title="var">n</span> <span class="id" title="var">s</span>); <span class="id" title="tactic">try</span> (<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#mults_of_n"><span class="id" title="definition">mults_of_n</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> 0 <span class="id" title="keyword">as</span> <span class="id" title="var">next_to_write</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*set&nbsp;up&nbsp;invariant&nbsp;for&nbsp;the&nbsp;coind&nbsp;hyp*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Events.MapDefault.html#lookup_default"><span class="id" title="definition">lookup_default</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#PrintMults.Y"><span class="id" title="variable">Y</span></a> 0 <span class="id" title="var">si</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">next_to_write</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#lookup_neq"><span class="id" title="lemma">lookup_neq</span></a>; <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<a class="idref" href="ITree.Events.MapDefault.html#lookup_default"><span class="id" title="definition">lookup_default</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#PrintMults.X"><span class="id" title="variable">X</span></a> 0 <span class="id" title="var">si</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#lookup_eq"><span class="id" title="lemma">lookup_eq</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Heqsi</span> <span class="id" title="var">Heqnext_to_write</span> <span class="id" title="var">Henv</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">si</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="var">k0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">tr</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Heqtr</span> <span class="id" title="var">k0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">tr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">next_to_write</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pcofix</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*This&nbsp;coinductive&nbsp;hypothesis&nbsp;looks&nbsp;good*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H1</span> <span class="id" title="var">into</span> <span class="id" title="var">HX</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*should&nbsp;be&nbsp;able&nbsp;to&nbsp;learn&nbsp;that&nbsp;observe&nbsp;tr&nbsp;is&nbsp;what&nbsp;we&nbsp;need*)</span><br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*This&nbsp;block&nbsp;shows&nbsp;how&nbsp;to&nbsp;proceed&nbsp;through&nbsp;the&nbsp;loop&nbsp;body*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H0</span> <span class="id" title="var">into</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Basics.Basics.html#iter"><span class="id" title="definition">Basics.iter</span></a>, <a class="idref" href="ITree.Basics.Basics.html#MonadIter_stateT0"><span class="id" title="instance">MonadIter_stateT0</span></a>, <a class="idref" href="ITree.Basics.Basics.html#iter"><span class="id" title="definition">Basics.iter</span></a>, <a class="idref" href="ITree.Core.ITreeDefinition.html#MonadIter_itree"><span class="id" title="instance">MonadIter_itree</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#unfold_iter"><span class="id" title="lemma">unfold_iter</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">type</span> <span class="id" title="keyword">of</span> <span class="id" title="var">H</span> <span class="id" title="keyword">with</span> <span class="id" title="var">_</span> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> <span class="id" title="var">_</span> ?<span class="id" title="var">k0</span> ⇒ <span class="id" title="var">remember</span> <span class="id" title="var">k0</span> <span class="id" title="keyword">as</span> <span class="id" title="var">k</span> <span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_bind"><span class="id" title="lemma">bind_bind</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_trigger"><span class="id" title="lemma">bind_trigger</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Events.StateFacts.html#interp_state_vis"><span class="id" title="lemma">interp_state_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_l"><span class="id" title="lemma">bind_ret_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_trigger"><span class="id" title="lemma">bind_trigger</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Events.StateFacts.html#interp_state_vis"><span class="id" title="lemma">interp_state_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_vis"><span class="id" title="lemma">bind_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_vis"><span class="id" title="lemma">bind_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_l"><span class="id" title="lemma">bind_ret_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unf_res</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHruttF</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="var">ddestruction</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">ddestruction</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">H0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">prove_arg</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>. <span class="id" title="var">pclearbot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">type</span> <span class="id" title="keyword">of</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">paco2</span> <span class="id" title="var">_</span> <span class="id" title="definition">bot2</span> ?<span class="id" title="var">tr</span> ?<span class="id" title="var">t</span> ⇒ <span class="id" title="tactic">assert</span> (<span class="id" title="var">Hk1</span> : <span class="id" title="var">tr</span> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <span class="id" title="var">t</span>); <span class="id" title="tactic">auto</span> <span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">x</span> <span class="id" title="var">tr</span>. <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="ITree.Events.MapDefault.html#lookup_default"><span class="id" title="definition">lookup_default</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#PrintMults.X"><span class="id" title="variable">X</span></a> 0 <span class="id" title="var">si</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="ITree.Events.MapDefault.html#lookup_default"><span class="id" title="definition">lookup_default</span></a> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#PrintMults.Y"><span class="id" title="variable">Y</span></a> 0 <span class="id" title="var">si</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">m</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span> <span class="id" title="keyword">with</span> (<span class="id" title="method">Maps.add</span> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#PrintMults.Y"><span class="id" title="variable">Y</span></a> (<span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">m</span>) <span class="id" title="var">si</span>); <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#lookup_eq"><span class="id" title="lemma">lookup_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2: { <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#lookup_neq"><span class="id" title="lemma">lookup_neq</span></a>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hk1</span>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_trigger"><span class="id" title="lemma">bind_trigger</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hk1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Events.StateFacts.html#interp_state_vis"><span class="id" title="lemma">interp_state_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hk1</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_l"><span class="id" title="lemma">bind_ret_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hk1</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hk1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_vis"><span class="id" title="lemma">bind_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hk1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Events.StateFacts.html#interp_state_vis"><span class="id" title="lemma">interp_state_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hk1</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_l"><span class="id" title="lemma">bind_ret_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hk1</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_l"><span class="id" title="lemma">bind_ret_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hk1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hk1</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Events.StateFacts.html#interp_state_ret"><span class="id" title="lemma">interp_state_ret</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hk1</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_l"><span class="id" title="lemma">bind_ret_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hk1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hk1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Basics.Basics.html#iter"><span class="id" title="definition">Basics.iter</span></a>, <a class="idref" href="ITree.Basics.Basics.html#MonadIter_stateT0"><span class="id" title="instance">MonadIter_stateT0</span></a>, <a class="idref" href="ITree.Basics.Basics.html#iter"><span class="id" title="definition">Basics.iter</span></a>, <a class="idref" href="ITree.Core.ITreeDefinition.html#MonadIter_itree"><span class="id" title="instance">MonadIter_itree</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H</span> : <span class="id" title="var">_</span> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.iter"><span class="id" title="definition">ITree.iter</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>?<span class="id" title="var">s1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> |- <span class="id" title="var">_</span> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.iter"><span class="id" title="definition">ITree.iter</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>?<span class="id" title="var">s2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">enough</span> (<span class="id" title="var">Hseq</span> : <span class="id" title="var">s2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">s1</span>) <span class="id" title="keyword">end</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hseq</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Arith.PeanoNat.html#Nat.add_comm"><span class="id" title="lemma">Nat.add_comm</span></a>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="ITree.Extra.Dijkstra.StateIOTrace.html#PrintMults"><span class="id" title="section">PrintMults</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
