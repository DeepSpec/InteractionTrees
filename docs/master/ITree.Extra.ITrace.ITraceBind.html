<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="https://github.com/DeepSpec/InteractionTrees">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">ITree.Extra.ITrace.ITraceBind</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#"><span class="id" title="library">Morphisms</span></a><br/>
.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ITree</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Axioms.html#"><span class="id" title="library">Axioms</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.ITree.html#"><span class="id" title="library">ITree</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.ITreeFacts.html#"><span class="id" title="library">ITreeFacts</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Eq.Rutt.html#"><span class="id" title="library">Eq.Rutt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Props.Infinite.html#"><span class="id" title="library">Props.Infinite</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Props.EuttNoRet.html#"><span class="id" title="library">Props.EuttNoRet</span></a>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ITree.Extra</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#"><span class="id" title="library">ITrace.ITraceDefinition</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#"><span class="id" title="library">ITrace.ITraceFacts</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.ITrace.ITracePrefix.html#"><span class="id" title="library">ITrace.ITracePrefix</span></a><br/>
.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Paco</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">paco</span>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="ITree.Basics.Basics.html#Monads"><span class="id" title="module">Monads</span></a>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="module">MonadNotation</span>.<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">monad_scope</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Contains&nbsp;the&nbsp;proof&nbsp;of&nbsp;peel_lemma&nbsp;which&nbsp;allows&nbsp;us<br/>
&nbsp;&nbsp;&nbsp;to&nbsp;decompose&nbsp;a&nbsp;trace&nbsp;of&nbsp;bind&nbsp;t&nbsp;f&nbsp;into&nbsp;a&nbsp;head&nbsp;that&nbsp;refines&nbsp;t&nbsp;and&nbsp;a&nbsp;tail<br/>
&nbsp;&nbsp;&nbsp;that&nbsp;refines&nbsp;f&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="Peel" class="idref" href="#Peel"><span class="id" title="section">Peel</span></a>.<br/>
<span class="id" title="keyword">Context</span> (<a id="classicT:2" class="idref" href="#classicT:2"><span class="id" title="binder">classicT</span></a> : <span class="id" title="keyword">∀</span> (<a id="P:1" class="idref" href="#P:1"><span class="id" title="binder">P</span></a> : <span class="id" title="keyword">Type</span>), <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#P:1"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#P:1"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">)</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="peel_vis" class="idref" href="#peel_vis"><span class="id" title="definition">peel_vis</span></a> {<a id="E:3" class="idref" href="#E:3"><span class="id" title="binder">E</span></a> <a id="R:4" class="idref" href="#R:4"><span class="id" title="binder">R</span></a> <a id="S:5" class="idref" href="#S:5"><span class="id" title="binder">S</span></a> <a id="A:6" class="idref" href="#A:6"><span class="id" title="binder">A</span></a> <a id="B:7" class="idref" href="#B:7"><span class="id" title="binder">B</span></a>} (<a id="e0:8" class="idref" href="#e0:8"><span class="id" title="binder">e0</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:3"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A:6"><span class="id" title="variable">A</span></a>) (<a id="a:9" class="idref" href="#a:9"><span class="id" title="binder">a</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A:6"><span class="id" title="variable">A</span></a>) (<a id="k0:10" class="idref" href="#k0:10"><span class="id" title="binder">k0</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:3"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:4"><span class="id" title="variable">R</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="e1:11" class="idref" href="#e1:11"><span class="id" title="binder">e1</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:3"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#B:7"><span class="id" title="variable">B</span></a>) (<a id="k1:12" class="idref" href="#k1:12"><span class="id" title="binder">k1</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#B:7"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:3"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:5"><span class="id" title="variable">S</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="peel:13" class="idref" href="#peel:13"><span class="id" title="binder">peel</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace'"><span class="id" title="definition">itrace'</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:3"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:4"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree'"><span class="id" title="abbreviation">itree'</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:3"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:5"><span class="id" title="variable">S</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:3"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:5"><span class="id" title="variable">S</span></a>) : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:3"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:5"><span class="id" title="variable">S</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#Peel.classicT"><span class="id" title="variable">classicT</span></a> (<span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">B</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">apply</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evans"><span class="id" title="constructor">evans</span></a> <span class="id" title="var">_</span> <span class="id" title="var">e0</span> <span class="id" title="var">a</span>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">peel</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> (<span class="id" title="var">k0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>)) (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> (<span class="id" title="var">k1</span> <span class="id" title="var">a</span>) ) ) ).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.spin"><span class="id" title="definition">ITree.spin</span></a>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">CoFixpoint</span> <a id="peel_" class="idref" href="#peel_"><span class="id" title="definition">peel_</span></a> {<a id="E:14" class="idref" href="#E:14"><span class="id" title="binder">E</span></a> <a id="R:15" class="idref" href="#R:15"><span class="id" title="binder">R</span></a> <a id="S:16" class="idref" href="#S:16"><span class="id" title="binder">S</span></a>} (<a id="ob:17" class="idref" href="#ob:17"><span class="id" title="binder">ob</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace'"><span class="id" title="definition">itrace'</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:14"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:15"><span class="id" title="variable">R</span></a>) (<a id="ot:18" class="idref" href="#ot:18"><span class="id" title="binder">ot</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree'"><span class="id" title="abbreviation">itree'</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:14"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:16"><span class="id" title="variable">S</span></a>) : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:14"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:16"><span class="id" title="variable">S</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#ob:17"><span class="id" title="variable">ob</span></a>, <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#ot:18"><span class="id" title="variable">ot</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="ITree.Core.ITreeDefinition.html#TauF"><span class="id" title="constructor">TauF</span></a> <span class="id" title="var">b</span>, <a class="idref" href="ITree.Core.ITreeDefinition.html#TauF"><span class="id" title="constructor">TauF</span></a> <span class="id" title="var">t</span> ⇒ <a class="idref" href="ITree.Core.ITreeDefinition.html#Tau"><span class="id" title="abbreviation">Tau</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_:19"><span class="id" title="definition">peel_</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">b</span>) (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t</span>))<br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span>, <a class="idref" href="ITree.Core.ITreeDefinition.html#RetF"><span class="id" title="constructor">RetF</span></a> <span class="id" title="var">s</span> ⇒ <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <span class="id" title="var">s</span><br/>
&nbsp;&nbsp;| <a class="idref" href="ITree.Core.ITreeDefinition.html#TauF"><span class="id" title="constructor">TauF</span></a> <span class="id" title="var">b</span>, <span class="id" title="var">ot</span> ⇒ <a class="idref" href="ITree.Core.ITreeDefinition.html#Tau"><span class="id" title="abbreviation">Tau</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_:19"><span class="id" title="definition">peel_</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">b</span>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#ot:18"><span class="id" title="variable">ot</span></a> )<br/>
&nbsp;&nbsp;| <span class="id" title="var">ob</span>, <a class="idref" href="ITree.Core.ITreeDefinition.html#TauF"><span class="id" title="constructor">TauF</span></a> <span class="id" title="var">t</span> ⇒ <a class="idref" href="ITree.Core.ITreeDefinition.html#Tau"><span class="id" title="abbreviation">Tau</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_:19"><span class="id" title="definition">peel_</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#ob:17"><span class="id" title="variable">ob</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t</span>) )<br/>
&nbsp;&nbsp;| <a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evempty"><span class="id" title="constructor">evempty</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Hempty</span> <span class="id" title="var">e</span>) <span class="id" title="var">_</span> , <span class="id" title="var">_</span> ⇒ <a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evempty"><span class="id" title="constructor">evempty</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Hempty</span> <span class="id" title="var">e</span>) (<span class="id" title="keyword">fun</span> <a id="v:22" class="idref" href="#v:22"><span class="id" title="binder">v</span></a> : <a class="idref" href="ITree.Basics.Basics.html#void"><span class="id" title="abbreviation">void</span></a> ⇒ <span class="id" title="keyword">match</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#v:22"><span class="id" title="variable">v</span></a> <span class="id" title="keyword">with</span> <span class="id" title="keyword">end</span>)<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;type&nbsp;of&nbsp;this&nbsp;is&nbsp;problematic&nbsp;need&nbsp;some&nbsp;tricky&nbsp;dependently&nbsp;typed&nbsp;programming<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;order&nbsp;to&nbsp;have&nbsp;this&nbsp;work<br/>
&nbsp;&nbsp;&nbsp;*)</span><br/>
<br/>
&nbsp;&nbsp;| <a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evans"><span class="id" title="constructor">evans</span></a> <span class="id" title="var">_</span> <span class="id" title="var">e0</span> <span class="id" title="var">a</span>) <span class="id" title="var">k0</span>, <a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> <span class="id" title="var">e1</span> <span class="id" title="var">k1</span> ⇒ <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_vis"><span class="id" title="definition">peel_vis</span></a> <span class="id" title="var">e0</span> <span class="id" title="var">a</span> <span class="id" title="var">k0</span> <span class="id" title="var">e1</span> <span class="id" title="var">k1</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_:19"><span class="id" title="definition">peel_</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span>, <span class="id" title="var">_</span> ⇒ <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.spin"><span class="id" title="definition">ITree.spin</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="peel" class="idref" href="#peel"><span class="id" title="definition">peel</span></a> {<a id="E:24" class="idref" href="#E:24"><span class="id" title="binder">E</span></a> <a id="R:25" class="idref" href="#R:25"><span class="id" title="binder">R</span></a> <a id="S:26" class="idref" href="#S:26"><span class="id" title="binder">S</span></a>} (<a id="b:27" class="idref" href="#b:27"><span class="id" title="binder">b</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:24"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:25"><span class="id" title="variable">R</span></a>) (<a id="t:28" class="idref" href="#t:28"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:24"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:26"><span class="id" title="variable">S</span></a>) : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:24"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:26"><span class="id" title="variable">S</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_"><span class="id" title="definition">peel_</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b:27"><span class="id" title="variable">b</span></a>) (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t:28"><span class="id" title="variable">t</span></a>).<br/>
<span class="comment">(*&nbsp;here&nbsp;is&nbsp;a&nbsp;sketchy&nbsp;axiom&nbsp;use&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="peel_cont_vis" class="idref" href="#peel_cont_vis"><span class="id" title="definition">peel_cont_vis</span></a> {<a id="E:29" class="idref" href="#E:29"><span class="id" title="binder">E</span></a> <a id="R:30" class="idref" href="#R:30"><span class="id" title="binder">R</span></a> <a id="S:31" class="idref" href="#S:31"><span class="id" title="binder">S</span></a> <a id="A:32" class="idref" href="#A:32"><span class="id" title="binder">A</span></a> <a id="B:33" class="idref" href="#B:33"><span class="id" title="binder">B</span></a>} (<a id="e0:34" class="idref" href="#e0:34"><span class="id" title="binder">e0</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:29"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A:32"><span class="id" title="variable">A</span></a>) (<a id="a:35" class="idref" href="#a:35"><span class="id" title="binder">a</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A:32"><span class="id" title="variable">A</span></a>) (<a id="k0:36" class="idref" href="#k0:36"><span class="id" title="binder">k0</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:29"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:30"><span class="id" title="variable">R</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="e1:37" class="idref" href="#e1:37"><span class="id" title="binder">e1</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:29"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#B:33"><span class="id" title="variable">B</span></a>) (<a id="k1:38" class="idref" href="#k1:38"><span class="id" title="binder">k1</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#B:33"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:29"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:31"><span class="id" title="variable">S</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="peel:39" class="idref" href="#peel:39"><span class="id" title="binder">peel</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace'"><span class="id" title="definition">itrace'</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:29"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:30"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree'"><span class="id" title="abbreviation">itree'</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:29"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:31"><span class="id" title="variable">S</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:29"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:30"><span class="id" title="variable">R</span></a>) : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:29"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:30"><span class="id" title="variable">R</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#Peel.classicT"><span class="id" title="variable">classicT</span></a> (<span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">B</span>) ).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">apply</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Tau"><span class="id" title="abbreviation">Tau</span></a> (<span class="id" title="var">peel</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> (<span class="id" title="var">k0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>)) (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> (<span class="id" title="var">k1</span> <span class="id" title="var">a</span>) ) ) ).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.spin"><span class="id" title="definition">ITree.spin</span></a>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="comment">(*Actually&nbsp;I&nbsp;may&nbsp;be&nbsp;able&nbsp;to&nbsp;remove&nbsp;this&nbsp;ugly&nbsp;bs.&nbsp;I&nbsp;think&nbsp;I&nbsp;really&nbsp;only&nbsp;use&nbsp;peel*)</span><br/>
<span class="id" title="keyword">CoFixpoint</span> <a id="peel_cont_" class="idref" href="#peel_cont_"><span class="id" title="definition">peel_cont_</span></a> {<a id="E:40" class="idref" href="#E:40"><span class="id" title="binder">E</span></a> <a id="R:41" class="idref" href="#R:41"><span class="id" title="binder">R</span></a> <a id="S:42" class="idref" href="#S:42"><span class="id" title="binder">S</span></a>} (<a id="ob:43" class="idref" href="#ob:43"><span class="id" title="binder">ob</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace'"><span class="id" title="definition">itrace'</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:40"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:41"><span class="id" title="variable">R</span></a>) (<a id="ot:44" class="idref" href="#ot:44"><span class="id" title="binder">ot</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree'"><span class="id" title="abbreviation">itree'</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:40"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:42"><span class="id" title="variable">S</span></a>) : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:40"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:41"><span class="id" title="variable">R</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#ot:44"><span class="id" title="variable">ot</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="ITree.Core.ITreeDefinition.html#RetF"><span class="id" title="constructor">RetF</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="ITree.Core.ITreeDefinition.html#go"><span class="id" title="constructor">go</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#ob:43"><span class="id" title="variable">ob</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="ITree.Core.ITreeDefinition.html#TauF"><span class="id" title="constructor">TauF</span></a> <span class="id" title="var">t</span> ⇒ <span class="id" title="keyword">match</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#ob:43"><span class="id" title="variable">ob</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ITree.Core.ITreeDefinition.html#TauF"><span class="id" title="constructor">TauF</span></a> <span class="id" title="var">b</span> ⇒ <a class="idref" href="ITree.Core.ITreeDefinition.html#Tau"><span class="id" title="abbreviation">Tau</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_cont_:45"><span class="id" title="definition">peel_cont_</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">b</span>) (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">ob</span> ⇒ <a class="idref" href="ITree.Core.ITreeDefinition.html#Tau"><span class="id" title="abbreviation">Tau</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_cont_:45"><span class="id" title="definition">peel_cont_</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#ob:43"><span class="id" title="variable">ob</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t</span>)  )<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;| <a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> <span class="id" title="var">e1</span> <span class="id" title="var">k1</span> ⇒ <span class="id" title="keyword">match</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#ob:43"><span class="id" title="variable">ob</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ITree.Core.ITreeDefinition.html#TauF"><span class="id" title="constructor">TauF</span></a> <span class="id" title="var">b</span> ⇒ <a class="idref" href="ITree.Core.ITreeDefinition.html#Tau"><span class="id" title="abbreviation">Tau</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_cont_:45"><span class="id" title="definition">peel_cont_</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">b</span>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#ot:44"><span class="id" title="variable">ot</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evempty"><span class="id" title="constructor">evempty</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Hempty</span> <span class="id" title="var">e</span>) <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.spin"><span class="id" title="definition">ITree.spin</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evans"><span class="id" title="constructor">evans</span></a> <span class="id" title="var">_</span> <span class="id" title="var">e0</span> <span class="id" title="var">a</span>) <span class="id" title="var">k0</span> ⇒ <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_cont_vis"><span class="id" title="definition">peel_cont_vis</span></a> <span class="id" title="var">e0</span> <span class="id" title="var">a</span> <span class="id" title="var">k0</span> <span class="id" title="var">e1</span> <span class="id" title="var">k1</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_cont_:45"><span class="id" title="definition">peel_cont_</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.spin"><span class="id" title="definition">ITree.spin</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="peel_cont" class="idref" href="#peel_cont"><span class="id" title="definition">peel_cont</span></a> {<a id="E:49" class="idref" href="#E:49"><span class="id" title="binder">E</span></a> <a id="R:50" class="idref" href="#R:50"><span class="id" title="binder">R</span></a> <a id="S:51" class="idref" href="#S:51"><span class="id" title="binder">S</span></a>} (<a id="b:52" class="idref" href="#b:52"><span class="id" title="binder">b</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:49"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:50"><span class="id" title="variable">R</span></a>) (<a id="t:53" class="idref" href="#t:53"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:49"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:51"><span class="id" title="variable">S</span></a>) : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:51"><span class="id" title="variable">S</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:49"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:50"><span class="id" title="variable">R</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="s:54" class="idref" href="#s:54"><span class="id" title="binder">s</span></a> ⇒ <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_cont_"><span class="id" title="definition">peel_cont_</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b:52"><span class="id" title="variable">b</span></a>) (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t:53"><span class="id" title="variable">t</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="refine_ret_vis_contra" class="idref" href="#refine_ret_vis_contra"><span class="id" title="lemma">refine_ret_vis_contra</span></a> : <span class="id" title="keyword">∀</span> (<a id="E:55" class="idref" href="#E:55"><span class="id" title="binder">E</span></a>: <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:56" class="idref" href="#R:56"><span class="id" title="binder">R</span></a> <a id="A:57" class="idref" href="#A:57"><span class="id" title="binder">A</span></a>: <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="r:58" class="idref" href="#r:58"><span class="id" title="binder">r</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:56"><span class="id" title="variable">R</span></a>) (<a id="e:59" class="idref" href="#e:59"><span class="id" title="binder">e</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:55"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A:57"><span class="id" title="variable">A</span></a>) (<a id="k:60" class="idref" href="#k:60"><span class="id" title="binder">k</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A:57"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:55"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:56"><span class="id" title="variable">R</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">¬</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#r:58"><span class="id" title="variable">r</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#e:59"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#k:60"><span class="id" title="variable">k</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">Hcontra</span>. <span class="id" title="var">pinversion</span> <span class="id" title="var">Hcontra</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;maybe&nbsp;a&nbsp;better&nbsp;way&nbsp;of&nbsp;doing&nbsp;it&nbsp;is&nbsp;to&nbsp;use&nbsp;strong&nbsp;LEM&nbsp;to&nbsp;see&nbsp;if&nbsp;X&nbsp;=&nbsp;A&nbsp;in&nbsp;the&nbsp;vis&nbsp;case<br/>
&nbsp;&nbsp;&nbsp;then&nbsp;I&nbsp;can&nbsp;remove&nbsp;that&nbsp;if&nbsp;statement&nbsp;given<br/>
<br/>
&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="peel_t_ret" class="idref" href="#peel_t_ret"><span class="id" title="lemma">peel_t_ret</span></a> : <span class="id" title="keyword">∀</span> <a id="E:61" class="idref" href="#E:61"><span class="id" title="binder">E</span></a> <a id="R:62" class="idref" href="#R:62"><span class="id" title="binder">R</span></a> <a id="S:63" class="idref" href="#S:63"><span class="id" title="binder">S</span></a> (<a id="b:64" class="idref" href="#b:64"><span class="id" title="binder">b</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:61"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:63"><span class="id" title="variable">S</span></a>) (<a id="t:65" class="idref" href="#t:65"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:61"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:62"><span class="id" title="variable">R</span></a>) <a id="r:66" class="idref" href="#r:66"><span class="id" title="binder">r</span></a>, <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t:65"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Eq.Eqit.html#7123c605943b5e01235e17fe532efcae"><span class="id" title="notation">≅</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#r:66"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel"><span class="id" title="definition">peel</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b:64"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t:65"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Eq.Eqit.html#7123c605943b5e01235e17fe532efcae"><span class="id" title="notation">≅</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#r:66"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel"><span class="id" title="definition">peel</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">pinversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">inv</span> <span class="id" title="var">CHECK</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">b</span>); <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*doing&nbsp;these&nbsp;proofs,&nbsp;may&nbsp;require&nbsp;some&nbsp;techniques&nbsp;you&nbsp;don't&nbsp;really&nbsp;know*)</span><br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="peel_refine_t" class="idref" href="#peel_refine_t"><span class="id" title="lemma">peel_refine_t</span></a> : <span class="id" title="keyword">∀</span> (<a id="E:67" class="idref" href="#E:67"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:68" class="idref" href="#R:68"><span class="id" title="binder">R</span></a> <a id="S:69" class="idref" href="#S:69"><span class="id" title="binder">S</span></a> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="b:70" class="idref" href="#b:70"><span class="id" title="binder">b</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:67"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:69"><span class="id" title="variable">S</span></a>) (<a id="t:71" class="idref" href="#t:71"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:67"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:68"><span class="id" title="variable">R</span></a>) (<a id="f:72" class="idref" href="#f:72"><span class="id" title="binder">f</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:68"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:67"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:69"><span class="id" title="variable">S</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hrutt:73" class="idref" href="#Hrutt:73"><span class="id" title="binder">Hrutt</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b:70"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t:71"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#f:72"><span class="id" title="variable">f</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel"><span class="id" title="definition">peel</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b:70"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t:71"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t:71"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">R</span> <span class="id" title="var">S</span> <span class="id" title="var">b</span> <span class="id" title="var">t</span> <span class="id" title="var">f</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">b</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">pcofix</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">Hrutt</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrutt</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrutt</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel"><span class="id" title="definition">peel</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">b</span>); <span class="id" title="var">cbn</span>; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hrutt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_tau"><span class="id" title="lemma">bind_tau</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="var">pinversion</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">CHECK</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x0</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#eq_sub_eutt"><span class="id" title="instance">eq_sub_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x0</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#eq_sub_eutt"><span class="id" title="instance">eq_sub_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heq</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_tau"><span class="id" title="lemma">bind_tau</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="var">pinversion</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">CHECK</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">IHHrutt</span>. <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#eq_sub_eutt"><span class="id" title="instance">eq_sub_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heq</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">cbn</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">b</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">Heq'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heq'</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq'</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#eq_sub_eutt"><span class="id" title="instance">eq_sub_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heq</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">cbn</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">IHHrutt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#eq_sub_eutt"><span class="id" title="instance">eq_sub_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#eq_sub_eutt"><span class="id" title="instance">eq_sub_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">enough</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Tau"><span class="id" title="abbreviation">Tau</span></a> <span class="id" title="var">t1</span> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <span class="id" title="var">t2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pfold</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heq'</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">IHHrutt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#eq_sub_eutt"><span class="id" title="instance">eq_sub_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#eq_sub_eutt"><span class="id" title="instance">eq_sub_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heq</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">x</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq'</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heq'</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">IHHrutt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#eq_sub_eutt"><span class="id" title="instance">eq_sub_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#eq_sub_eutt"><span class="id" title="instance">eq_sub_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heq</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">x</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq'</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hrutt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_vis"><span class="id" title="lemma">bind_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pinversion</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_vis"><span class="id" title="lemma">bind_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pinversion</span> <span class="id" title="var">x</span>; <span class="id" title="var">inv</span> <span class="id" title="var">CHECK</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_vis"><span class="id" title="lemma">bind_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="var">pinversion</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ddestruction</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="var">ddestruction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_vis"><span class="id" title="definition">peel_vis</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#Peel.classicT"><span class="id" title="variable">classicT</span></a> (<span class="id" title="var">B</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">B</span>) ); <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_rect_r"><span class="id" title="definition">eq_rect_r</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_rect"><span class="id" title="definition">eq_rect</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a> <span class="id" title="var">_</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">He</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">HeqHe</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">He</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="var">ddestruction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">x1</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">x1</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">x1</span>. <span class="id" title="var">ddestruction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">H0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> <span class="id" title="var">a</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#rar"><span class="id" title="constructor">rar</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">REL0</span> <span class="id" title="var">a</span>). <span class="id" title="var">pclearbot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="definition">paco2</span> ?<span class="id" title="var">x</span> ?<span class="id" title="var">y</span> ?<span class="id" title="var">t</span> ?<span class="id" title="var">u</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="ITree.Eq.Eqit.html#eq_itree"><span class="id" title="definition">eq_itree</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <span class="id" title="var">t</span> <span class="id" title="var">u</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">REL0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">REL0</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHHrutt</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_vis"><span class="id" title="lemma">bind_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pinversion</span> <span class="id" title="var">x</span>; <span class="id" title="var">inv</span> <span class="id" title="var">CHECK</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="not_spin_eutt_ret" class="idref" href="#not_spin_eutt_ret"><span class="id" title="lemma">not_spin_eutt_ret</span></a> : <span class="id" title="keyword">∀</span> <a id="E:74" class="idref" href="#E:74"><span class="id" title="binder">E</span></a> <a id="R:75" class="idref" href="#R:75"><span class="id" title="binder">R</span></a> (<a id="r:76" class="idref" href="#r:76"><span class="id" title="binder">r</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:75"><span class="id" title="variable">R</span></a>), <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">¬</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">(</span></a>@<a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.spin"><span class="id" title="definition">ITree.spin</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:74"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:75"><span class="id" title="variable">R</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#r:76"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">Hcontra</span>. <span class="id" title="tactic">specialize</span> (@<a class="idref" href="ITree.Props.Infinite.html#spin_infinite"><span class="id" title="lemma">spin_infinite</span></a> <span class="id" title="var">E</span> <span class="id" title="var">R</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hdiv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hcontra</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdiv</span>. <span class="id" title="var">pinversion</span> <span class="id" title="var">Hdiv</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="proper_peel_eutt_l" class="idref" href="#proper_peel_eutt_l"><span class="id" title="lemma">proper_peel_eutt_l</span></a> : <span class="id" title="keyword">∀</span> (<a id="E:77" class="idref" href="#E:77"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:78" class="idref" href="#R:78"><span class="id" title="binder">R</span></a> <a id="S:79" class="idref" href="#S:79"><span class="id" title="binder">S</span></a> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="b:80" class="idref" href="#b:80"><span class="id" title="binder">b</span></a> <a id="b':81" class="idref" href="#b':81"><span class="id" title="binder">b'</span></a>: <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:77"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:78"><span class="id" title="variable">R</span></a>) (<a id="t:82" class="idref" href="#t:82"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:77"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:79"><span class="id" title="variable">S</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b:80"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b':81"><span class="id" title="variable">b'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel"><span class="id" title="definition">peel</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b:80"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t:82"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel"><span class="id" title="definition">peel</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b':81"><span class="id" title="variable">b'</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t:82"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">R</span> <span class="id" title="var">S</span>. <span class="id" title="var">pcofix</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel"><span class="id" title="definition">peel</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">b</span>); <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">b'</span>); <span class="id" title="var">cbn</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>); <span class="id" title="tactic">try</span> (<span class="id" title="tactic">destruct</span> <span class="id" title="var">e0</span>); <span class="id" title="var">cbn</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">fail</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="var">pfold</span>. <span class="id" title="var">punfold</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x0</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">x0</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x0</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x0</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">x0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">x0</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x0</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">b</span>); <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">b'</span>); <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>. <span class="id" title="var">remember</span> (@<a class="idref" href="ITree.Core.ITreeDefinition.html#go"><span class="id" title="constructor">go</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#EvAns"><span class="id" title="inductive">EvAns</span></a> <span class="id" title="var">E</span>) <span class="id" title="var">_</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#RetF"><span class="id" title="constructor">RetF</span></a> <span class="id" title="var">r0</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">t1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#RetF"><span class="id" title="constructor">RetF</span></a> <span class="id" title="var">r0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqt1</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqt1</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">enough</span> (<span class="id" title="var">t2</span> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Tau"><span class="id" title="abbreviation">Tau</span></a> <span class="id" title="var">t3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pfold</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">red</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (@<a class="idref" href="ITree.Core.ITreeDefinition.html#go"><span class="id" title="constructor">go</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#EvAns"><span class="id" title="inductive">EvAns</span></a> <span class="id" title="var">E</span>) <span class="id" title="var">_</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evans"><span class="id" title="constructor">evans</span></a> <span class="id" title="var">A</span> <span class="id" title="var">ev</span> <span class="id" title="var">ans</span>) <span class="id" title="var">k</span> )  ) <span class="id" title="keyword">as</span> <span class="id" title="var">t1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evans"><span class="id" title="constructor">evans</span></a> <span class="id" title="var">A</span> <span class="id" title="var">ev</span> <span class="id" title="var">ans</span>) <span class="id" title="var">k</span>  <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqt1</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#go"><span class="id" title="constructor">go</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evempty"><span class="id" title="constructor">evempty</span></a> <span class="id" title="var">A</span> <span class="id" title="var">Hempty</span> <span class="id" title="var">ev</span>) <span class="id" title="var">k</span> )  ) <span class="id" title="keyword">as</span> <span class="id" title="var">t1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evempty"><span class="id" title="constructor">evempty</span></a> <span class="id" title="var">A</span> <span class="id" title="var">Hempty</span> <span class="id" title="var">ev</span>) <span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t1</span> ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">b</span>); <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">b'</span>); <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>. <span class="id" title="var">remember</span> (@<a class="idref" href="ITree.Core.ITreeDefinition.html#go"><span class="id" title="constructor">go</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#EvAns"><span class="id" title="inductive">EvAns</span></a> <span class="id" title="var">E</span>) <span class="id" title="var">_</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#RetF"><span class="id" title="constructor">RetF</span></a> <span class="id" title="var">r0</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">t2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#RetF"><span class="id" title="constructor">RetF</span></a> <span class="id" title="var">r0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqt2</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">enough</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Tau"><span class="id" title="abbreviation">Tau</span></a> <span class="id" title="var">t1</span> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <span class="id" title="var">t3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pfold</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">red</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (@<a class="idref" href="ITree.Core.ITreeDefinition.html#go"><span class="id" title="constructor">go</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#EvAns"><span class="id" title="inductive">EvAns</span></a> <span class="id" title="var">E</span>) <span class="id" title="var">_</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evans"><span class="id" title="constructor">evans</span></a> <span class="id" title="var">A</span> <span class="id" title="var">ev</span> <span class="id" title="var">ans</span>) <span class="id" title="var">k</span> )  ) <span class="id" title="keyword">as</span> <span class="id" title="var">t2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evans"><span class="id" title="constructor">evans</span></a> <span class="id" title="var">A</span> <span class="id" title="var">ev</span> <span class="id" title="var">ans</span>) <span class="id" title="var">k</span>  <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#go"><span class="id" title="constructor">go</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evempty"><span class="id" title="constructor">evempty</span></a> <span class="id" title="var">A</span> <span class="id" title="var">Hempty</span> <span class="id" title="var">ev</span>) <span class="id" title="var">k</span> )  ) <span class="id" title="keyword">as</span> <span class="id" title="var">t2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evempty"><span class="id" title="constructor">evempty</span></a> <span class="id" title="var">A</span> <span class="id" title="var">Hempty</span> <span class="id" title="var">ev</span>) <span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t2</span> ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">pfold</span>. <span class="id" title="var">punfold</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x0</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">paco2_mon</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">r</span> := <span class="id" title="definition">bot2</span>); <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">enough</span> (@<a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.spin"><span class="id" title="definition">ITree.spin</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#EvAns"><span class="id" title="inductive">EvAns</span></a> <span class="id" title="var">E</span>) <span class="id" title="var">S</span>  <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.spin"><span class="id" title="definition">ITree.spin</span></a>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x0</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#go"><span class="id" title="constructor">go</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> <span class="id" title="var">e</span> <span class="id" title="var">k</span>) ) <span class="id" title="keyword">as</span> <span class="id" title="var">t0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> <span class="id" title="var">e</span> <span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>. <span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x0</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_vis"><span class="id" title="definition">peel_vis</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#Peel.classicT"><span class="id" title="variable">classicT</span></a> (<span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">X</span>) ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_rect_r"><span class="id" title="definition">eq_rect_r</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_rect"><span class="id" title="definition">eq_rect</span></a>. <span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a> <span class="id" title="var">e</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">He</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">He</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>. <span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">paco2_mon</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">r</span> := <span class="id" title="definition">bot2</span>); <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">enough</span> (@<a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.spin"><span class="id" title="definition">ITree.spin</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#EvAns"><span class="id" title="inductive">EvAns</span></a> <span class="id" title="var">E</span>) <span class="id" title="var">S</span> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.spin"><span class="id" title="definition">ITree.spin</span></a> ); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">left</span>. <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">b'</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heq</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHeqitF</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#go"><span class="id" title="constructor">go</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> <span class="id" title="var">e</span> <span class="id" title="var">k</span>) ) <span class="id" title="keyword">as</span> <span class="id" title="var">t2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> <span class="id" title="var">e</span> <span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">enough</span> (<span class="id" title="var">t1</span> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Tau"><span class="id" title="abbreviation">Tau</span></a> <span class="id" title="var">t0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pfold</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heq</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHeqitF</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">b</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heq</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHeqitF</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#go"><span class="id" title="constructor">go</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> <span class="id" title="var">e</span> <span class="id" title="var">k</span>) ) <span class="id" title="keyword">as</span> <span class="id" title="var">t1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> <span class="id" title="var">e</span> <span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">enough</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Tau"><span class="id" title="abbreviation">Tau</span></a> <span class="id" title="var">t0</span> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <span class="id" title="var">t2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pfold</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heq</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHeqitF</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="proper_peel_eutt_r" class="idref" href="#proper_peel_eutt_r"><span class="id" title="lemma">proper_peel_eutt_r</span></a> : <span class="id" title="keyword">∀</span> (<a id="E:83" class="idref" href="#E:83"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:84" class="idref" href="#R:84"><span class="id" title="binder">R</span></a> <a id="S:85" class="idref" href="#S:85"><span class="id" title="binder">S</span></a> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="b:86" class="idref" href="#b:86"><span class="id" title="binder">b</span></a>: <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:83"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:84"><span class="id" title="variable">R</span></a>) (<a id="t:87" class="idref" href="#t:87"><span class="id" title="binder">t</span></a> <a id="t':88" class="idref" href="#t':88"><span class="id" title="binder">t'</span></a>: <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:83"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:85"><span class="id" title="variable">S</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t:87"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t':88"><span class="id" title="variable">t'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel"><span class="id" title="definition">peel</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b:86"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t:87"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel"><span class="id" title="definition">peel</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b:86"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t':88"><span class="id" title="variable">t'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">R</span> <span class="id" title="var">S</span>. <span class="id" title="var">pcofix</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel"><span class="id" title="definition">peel</span></a>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">b</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">Heqb</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">punfold</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x0</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x0</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>. <span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x0</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.EuttExtras.html#paco2_eqit_refl"><span class="id" title="lemma">paco2_eqit_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHeqitF</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHeqitF</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">punfold</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x0</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x0</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x0</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">x0</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x0</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t'</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">Heqt'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">IHeqitF</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t0</span>); <span class="id" title="var">cbn</span>; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t2</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">Heqt2</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqt2</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHeqitF</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHeqitF</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>; <span class="id" title="var">cbn</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqt2</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHeqitF</span>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">enough</span> (<span class="id" title="var">t1</span> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Tau"><span class="id" title="abbreviation">Tau</span></a> <span class="id" title="var">t2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pfold</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqt'</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqt'</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">IHeqitF</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t0</span>); <span class="id" title="tactic">try</span> (<span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>); <span class="id" title="var">cbn</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t1</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">Heqt1</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqt1</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHeqitF</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHeqitF</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqt1</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHeqitF</span>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">at</span> 1. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>. <span class="id" title="var">remember</span> ((<a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <span class="id" title="var">e</span> <span class="id" title="var">k</span>) ) <span class="id" title="keyword">as</span> <span class="id" title="var">t1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> <span class="id" title="var">e</span> <span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">punfold</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x0</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x0</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">right</span>; <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqb</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>; <span class="id" title="var">pclearbot</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x0</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">e0</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_vis"><span class="id" title="definition">peel_vis</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#Peel.classicT"><span class="id" title="variable">classicT</span></a> (<span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">u</span>) ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_rect_r"><span class="id" title="definition">eq_rect_r</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_rect"><span class="id" title="definition">eq_rect</span></a>. <span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a> <span class="id" title="var">e0</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">He</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">He</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>. <span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.EuttExtras.html#paco2_eqit_refl"><span class="id" title="lemma">paco2_eqit_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t'</span>); <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">IHeqitF</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">IHeqitF</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqb</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> &lt;- <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">at</span> 2. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqb</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> &lt;- <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">at</span> 2. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">IHeqitF</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_vis"><span class="id" title="definition">peel_vis</span></a>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#Peel.classicT"><span class="id" title="variable">classicT</span></a> (<span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">X0</span>) ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_rect_r"><span class="id" title="definition">eq_rect_r</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_rect"><span class="id" title="definition">eq_rect</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a> <span class="id" title="var">e</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">He</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">He</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">right</span>. <span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.EuttExtras.html#paco2_eqit_refl"><span class="id" title="lemma">paco2_eqit_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHeqitF</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">IHeqitF</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHeqitF</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">Heqt</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">IHeqitF</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">IHeqitF</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqb</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pfold</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqb</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pfold</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">IHeqitF</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_vis"><span class="id" title="definition">peel_vis</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#Peel.classicT"><span class="id" title="variable">classicT</span></a> (<span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">X0</span>) ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_rect_r"><span class="id" title="definition">eq_rect_r</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_rect"><span class="id" title="definition">eq_rect</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a> <span class="id" title="var">e</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">He</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">He</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">right</span>. <span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">REL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.EuttExtras.html#paco2_eqit_refl"><span class="id" title="lemma">paco2_eqit_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">IHeqitF</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="proper_eutt_peel" class="idref" href="#proper_eutt_peel"><span class="id" title="instance">proper_eutt_peel</span></a> {<a id="E:89" class="idref" href="#E:89"><span class="id" title="binder">E</span></a> <a id="R:90" class="idref" href="#R:90"><span class="id" title="binder">R</span></a> <a id="S:91" class="idref" href="#S:91"><span class="id" title="binder">S</span></a>} : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="ITree.Eq.Eqit.html#eutt"><span class="id" title="definition">eutt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="ITree.Eq.Eqit.html#eutt"><span class="id" title="definition">eutt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="ITree.Eq.Eqit.html#eutt"><span class="id" title="definition">eutt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>) (@<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel"><span class="id" title="definition">peel</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:89"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:90"><span class="id" title="variable">R</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:91"><span class="id" title="variable">S</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? ? ? ? ? ?. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#proper_peel_eutt_l"><span class="id" title="lemma">proper_peel_eutt_l</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">t</span> := <span class="id" title="var">x0</span>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#proper_peel_eutt_r"><span class="id" title="lemma">proper_peel_eutt_r</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="not_peel_vis_ret" class="idref" href="#not_peel_vis_ret"><span class="id" title="lemma">not_peel_vis_ret</span></a>: <span class="id" title="keyword">∀</span> (<a id="R:92" class="idref" href="#R:92"><span class="id" title="binder">R</span></a> : <span class="id" title="keyword">Type</span>) (<a id="E:93" class="idref" href="#E:93"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="S:94" class="idref" href="#S:94"><span class="id" title="binder">S</span></a> <a id="X:95" class="idref" href="#X:95"><span class="id" title="binder">X</span></a> : <span class="id" title="keyword">Type</span>) (<a id="e:96" class="idref" href="#e:96"><span class="id" title="binder">e</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:93"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#X:95"><span class="id" title="variable">X</span></a>) (<a id="k:97" class="idref" href="#k:97"><span class="id" title="binder">k</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#X:95"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:93"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:92"><span class="id" title="variable">R</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="r:98" class="idref" href="#r:98"><span class="id" title="binder">r</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:92"><span class="id" title="variable">R</span></a>) (<a id="t1:99" class="idref" href="#t1:99"><span class="id" title="binder">t1</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#EvAns"><span class="id" title="inductive">EvAns</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:93"><span class="id" title="variable">E</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:94"><span class="id" title="variable">S</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">¬</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel"><span class="id" title="definition">peel</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t1:99"><span class="id" title="variable">t1</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#e:96"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#k:97"><span class="id" title="variable">k</span></a>) <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#r:98"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">R</span> <span class="id" title="var">E</span> <span class="id" title="var">S</span> <span class="id" title="var">X</span> <span class="id" title="var">e</span> <span class="id" title="var">k</span> <span class="id" title="var">r</span> <span class="id" title="var">t1</span> <span class="id" title="var">Heutt</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">Heutt</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel"><span class="id" title="definition">peel</span></a> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heutt</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span>  <span class="id" title="var">Heutt</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t1</span>); <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">e0</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_vis"><span class="id" title="definition">peel_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#Peel.classicT"><span class="id" title="variable">classicT</span></a> (<span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">X</span>)); <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_rect_r"><span class="id" title="definition">eq_rect_r</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_rect"><span class="id" title="definition">eq_rect</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a> <span class="id" title="var">e0</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">He</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">He</span>. <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t1</span>); <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">injection</span> <span class="id" title="var">x</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hspin</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hspin</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heutt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#not_spin_eutt_ret"><span class="id" title="lemma">not_spin_eutt_ret</span></a>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">injection</span> <span class="id" title="var">x</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Ht0</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHHeutt</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht0</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">e0</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_vis"><span class="id" title="definition">peel_vis</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#Peel.classicT"><span class="id" title="variable">classicT</span></a> (<span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">X</span>) ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_rect_r"><span class="id" title="definition">eq_rect_r</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_rect"><span class="id" title="definition">eq_rect</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a> <span class="id" title="var">e0</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">He</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">He</span>. <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">injection</span> <span class="id" title="var">x</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hspin</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hspin</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heutt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#not_spin_eutt_ret"><span class="id" title="lemma">not_spin_eutt_ret</span></a>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="peel_ret_inv" class="idref" href="#peel_ret_inv"><span class="id" title="lemma">peel_ret_inv</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="R:100" class="idref" href="#R:100"><span class="id" title="binder">R</span></a> : <span class="id" title="keyword">Type</span>) (<a id="r:101" class="idref" href="#r:101"><span class="id" title="binder">r</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:100"><span class="id" title="variable">R</span></a>) (<a id="E:102" class="idref" href="#E:102"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="S:103" class="idref" href="#S:103"><span class="id" title="binder">S</span></a> : <span class="id" title="keyword">Type</span>) (<a id="b:104" class="idref" href="#b:104"><span class="id" title="binder">b</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:102"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:103"><span class="id" title="variable">S</span></a>) (<a id="t:105" class="idref" href="#t:105"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:102"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:100"><span class="id" title="variable">R</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel"><span class="id" title="definition">peel</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b:104"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t:105"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#r:101"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t:105"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#r:101"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">R</span> <span class="id" title="var">r</span> <span class="id" title="var">E</span> <span class="id" title="var">S</span> <span class="id" title="var">b</span> <span class="id" title="var">t</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel"><span class="id" title="definition">peel</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel"><span class="id" title="definition">peel</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">b</span>); <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t</span>); <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>; <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>; <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>; <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_vis"><span class="id" title="definition">peel_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#Peel.classicT"><span class="id" title="variable">classicT</span></a> (<span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">X0</span>) ) <span class="id" title="var">eqn</span> : <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_rect_r"><span class="id" title="definition">eq_rect_r</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_rect"><span class="id" title="definition">eq_rect</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">He</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">He</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">x0</span>. <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">b</span>); <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t</span>); <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHeqitF</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">b</span> := <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <span class="id" title="var">r0</span>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#not_spin_eutt_ret"><span class="id" title="lemma">not_spin_eutt_ret</span></a>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHeqitF</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#not_spin_eutt_ret"><span class="id" title="lemma">not_spin_eutt_ret</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span>  <span class="id" title="var">H</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#not_peel_vis_ret"><span class="id" title="lemma">not_peel_vis_ret</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pfold</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> <span class="id" title="var">e0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">clear</span> <span class="id" title="var">IHeqitF</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_vis"><span class="id" title="definition">peel_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#Peel.classicT"><span class="id" title="variable">classicT</span></a> (<span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">X</span>) ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_rect_r"><span class="id" title="definition">eq_rect_r</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_rect"><span class="id" title="definition">eq_rect</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a> <span class="id" title="var">e0</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">He</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">He</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#not_spin_eutt_ret"><span class="id" title="lemma">not_spin_eutt_ret</span></a>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHeqitF</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">b</span> := <a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <span class="id" title="var">e</span> <span class="id" title="var">k</span>); <span class="id" title="tactic">eauto</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_vis"><span class="id" title="definition">peel_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#Peel.classicT"><span class="id" title="variable">classicT</span></a> (<span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">X0</span>) ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_rect_r"><span class="id" title="definition">eq_rect_r</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_rect"><span class="id" title="definition">eq_rect</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a> <span class="id" title="var">e</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">He</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">He</span>. <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">injection</span> <span class="id" title="var">x</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hspin</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hspin</span>. <span class="id" title="var">exfalso</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">t1</span> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <span class="id" title="var">r</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">pfold</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hspin</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#not_spin_eutt_ret"><span class="id" title="lemma">not_spin_eutt_ret</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eqitF_r_refl" class="idref" href="#eqitF_r_refl"><span class="id" title="lemma">eqitF_r_refl</span></a>: <span class="id" title="keyword">∀</span> (<a id="E:106" class="idref" href="#E:106"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:107" class="idref" href="#R:107"><span class="id" title="binder">R</span></a>: <span class="id" title="keyword">Type</span>) <a id="r:108" class="idref" href="#r:108"><span class="id" title="binder">r</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="ot:109" class="idref" href="#ot:109"><span class="id" title="binder">ot</span></a>: <a class="idref" href="ITree.Core.ITreeDefinition.html#itree'"><span class="id" title="abbreviation">itree'</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:106"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:107"><span class="id" title="variable">R</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Eq.Eqit.html#eqitF"><span class="id" title="inductive">eqitF</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> (<span class="id" title="definition">upaco2</span> (<a class="idref" href="ITree.Eq.Eqit.html#eqit_"><span class="id" title="definition">eqit_</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#r:108"><span class="id" title="variable">r</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#ot:109"><span class="id" title="variable">ot</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#ot:109"><span class="id" title="variable">ot</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">R</span> <span class="id" title="var">r</span> <span class="id" title="var">ot</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">ot</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">left</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">paco2_mon</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">r</span> := <span class="id" title="definition">bot2</span>); <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#Equivalence_eutt"><span class="id" title="instance">Equivalence_eutt</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.RelationClasses.html#eq_equivalence"><span class="id" title="instance">eq_equivalence</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">left</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">paco2_mon</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">r</span> := <span class="id" title="definition">bot2</span>); <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#Equivalence_eutt"><span class="id" title="instance">Equivalence_eutt</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.RelationClasses.html#eq_equivalence"><span class="id" title="instance">eq_equivalence</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eqitF_mon" class="idref" href="#eqitF_mon"><span class="id" title="lemma">eqitF_mon</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="E:110" class="idref" href="#E:110"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:111" class="idref" href="#R:111"><span class="id" title="binder">R</span></a> : <span class="id" title="keyword">Type</span>) (<a id="r:112" class="idref" href="#r:112"><span class="id" title="binder">r</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#EvAns"><span class="id" title="inductive">EvAns</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:110"><span class="id" title="variable">E</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:111"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#EvAns"><span class="id" title="inductive">EvAns</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:110"><span class="id" title="variable">E</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:111"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="t1:113" class="idref" href="#t1:113"><span class="id" title="binder">t1</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree'"><span class="id" title="abbreviation">itree'</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#EvAns"><span class="id" title="inductive">EvAns</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:110"><span class="id" title="variable">E</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:111"><span class="id" title="variable">R</span></a>) (<a id="t0:114" class="idref" href="#t0:114"><span class="id" title="binder">t0</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree'"><span class="id" title="abbreviation">itree'</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#EvAns"><span class="id" title="inductive">EvAns</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:110"><span class="id" title="variable">E</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:111"><span class="id" title="variable">R</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Eq.Eqit.html#eqitF"><span class="id" title="inductive">eqitF</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> (<span class="id" title="definition">upaco2</span> (<a class="idref" href="ITree.Eq.Eqit.html#eqit_"><span class="id" title="definition">eqit_</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>) <span class="id" title="definition">bot2</span>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t1:113"><span class="id" title="variable">t1</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t0:114"><span class="id" title="variable">t0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Eq.Eqit.html#eqitF"><span class="id" title="inductive">eqitF</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> (<span class="id" title="definition">upaco2</span> (<a class="idref" href="ITree.Eq.Eqit.html#eqit_"><span class="id" title="definition">eqit_</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#r:112"><span class="id" title="variable">r</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t1:113"><span class="id" title="variable">t1</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t0:114"><span class="id" title="variable">t0</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">R</span> <span class="id" title="var">r</span> <span class="id" title="var">t1</span> <span class="id" title="var">t0'</span> <span class="id" title="var">REL</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">REL</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">paco2_mon</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">paco2_mon</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">intuition</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eqitF_observe_peel_cont_vis" class="idref" href="#eqitF_observe_peel_cont_vis"><span class="id" title="lemma">eqitF_observe_peel_cont_vis</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="E:115" class="idref" href="#E:115"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:116" class="idref" href="#R:116"><span class="id" title="binder">R</span></a> <a id="S:117" class="idref" href="#S:117"><span class="id" title="binder">S</span></a> <a id="A:118" class="idref" href="#A:118"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>) (<a id="ev:119" class="idref" href="#ev:119"><span class="id" title="binder">ev</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:115"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A:118"><span class="id" title="variable">A</span></a>) (<a id="ans:120" class="idref" href="#ans:120"><span class="id" title="binder">ans</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A:118"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="k1:121" class="idref" href="#k1:121"><span class="id" title="binder">k1</span></a> <a id="k2:122" class="idref" href="#k2:122"><span class="id" title="binder">k2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#EvAns"><span class="id" title="inductive">EvAns</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:115"><span class="id" title="variable">E</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:116"><span class="id" title="variable">R</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="v:123" class="idref" href="#v:123"><span class="id" title="binder">v</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> (<span class="id" title="definition">upaco2</span> (<a class="idref" href="ITree.Eq.Eqit.html#eqit_"><span class="id" title="definition">eqit_</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>) <span class="id" title="definition">bot2</span>) (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#k1:121"><span class="id" title="variable">k1</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#v:123"><span class="id" title="variable">v</span></a>) (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#k2:122"><span class="id" title="variable">k2</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#v:123"><span class="id" title="variable">v</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="r:124" class="idref" href="#r:124"><span class="id" title="binder">r</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#EvAns"><span class="id" title="inductive">EvAns</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:115"><span class="id" title="variable">E</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:116"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#EvAns"><span class="id" title="inductive">EvAns</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:115"><span class="id" title="variable">E</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:116"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> (<a id="b:125" class="idref" href="#b:125"><span class="id" title="binder">b</span></a> <a id="b':126" class="idref" href="#b':126"><span class="id" title="binder">b'</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:115"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:116"><span class="id" title="variable">R</span></a>) (<a id="t:127" class="idref" href="#t:127"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:115"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:117"><span class="id" title="variable">S</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b:125"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b':126"><span class="id" title="variable">b'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#r:124"><span class="id" title="variable">r</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_cont_"><span class="id" title="definition">peel_cont_</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b:125"><span class="id" title="variable">b</span></a>) (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t:127"><span class="id" title="variable">t</span></a>)) (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_cont_"><span class="id" title="definition">peel_cont_</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b':126"><span class="id" title="variable">b'</span></a>) (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t:127"><span class="id" title="variable">t</span></a>))<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="X:128" class="idref" href="#X:128"><span class="id" title="binder">X</span></a> : <span class="id" title="keyword">Type</span>) (<a id="e:129" class="idref" href="#e:129"><span class="id" title="binder">e</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:115"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#X:128"><span class="id" title="variable">X</span></a>) (<a id="k:130" class="idref" href="#k:130"><span class="id" title="binder">k</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#X:128"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:115"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:117"><span class="id" title="variable">S</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Eq.Eqit.html#eqitF"><span class="id" title="inductive">eqitF</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> (<span class="id" title="definition">upaco2</span> (<a class="idref" href="ITree.Eq.Eqit.html#eqit_"><span class="id" title="definition">eqit_</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#r:124"><span class="id" title="variable">r</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_cont_"><span class="id" title="definition">peel_cont_</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evans"><span class="id" title="constructor">evans</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A:118"><span class="id" title="variable">A</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#ev:119"><span class="id" title="variable">ev</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#ans:120"><span class="id" title="variable">ans</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#k1:121"><span class="id" title="variable">k1</span></a>) (<a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#e:129"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#k:130"><span class="id" title="variable">k</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_cont_"><span class="id" title="definition">peel_cont_</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evans"><span class="id" title="constructor">evans</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A:118"><span class="id" title="variable">A</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#ev:119"><span class="id" title="variable">ev</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#ans:120"><span class="id" title="variable">ans</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#k2:122"><span class="id" title="variable">k2</span></a>) (<a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#e:129"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#k:130"><span class="id" title="variable">k</span></a>))).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">R</span> <span class="id" title="var">S</span> <span class="id" title="var">A</span> <span class="id" title="var">ev</span> <span class="id" title="var">ans</span> <span class="id" title="var">k1</span> <span class="id" title="var">k2</span> <span class="id" title="var">REL</span> <span class="id" title="var">r</span> <span class="id" title="var">CIH</span> <span class="id" title="var">X</span> <span class="id" title="var">e</span> <span class="id" title="var">k</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_cont_vis"><span class="id" title="definition">peel_cont_vis</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#Peel.classicT"><span class="id" title="variable">classicT</span></a> (<span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">X</span>) ).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_rect_r"><span class="id" title="definition">eq_rect_r</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_rect"><span class="id" title="definition">eq_rect</span></a>. <span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a> <span class="id" title="var">e0</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">He</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">He</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">right</span>. <span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#eqitF_r_refl"><span class="id" title="lemma">eqitF_r_refl</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="proper_peel_cont_eutt_l" class="idref" href="#proper_peel_cont_eutt_l"><span class="id" title="lemma">proper_peel_cont_eutt_l</span></a> : <span class="id" title="keyword">∀</span> (<a id="E:131" class="idref" href="#E:131"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:132" class="idref" href="#R:132"><span class="id" title="binder">R</span></a> <a id="S:133" class="idref" href="#S:133"><span class="id" title="binder">S</span></a> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="b:134" class="idref" href="#b:134"><span class="id" title="binder">b</span></a> <a id="b':135" class="idref" href="#b':135"><span class="id" title="binder">b'</span></a>: <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:131"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:132"><span class="id" title="variable">R</span></a>) (<a id="t:136" class="idref" href="#t:136"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:131"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:133"><span class="id" title="variable">S</span></a>) (<a id="s:137" class="idref" href="#s:137"><span class="id" title="binder">s</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:133"><span class="id" title="variable">S</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b:134"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b':135"><span class="id" title="variable">b'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_cont"><span class="id" title="definition">peel_cont</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b:134"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t:136"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#s:137"><span class="id" title="variable">s</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_cont"><span class="id" title="definition">peel_cont</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b':135"><span class="id" title="variable">b'</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t:136"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#s:137"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">R</span> <span class="id" title="var">S</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_cont"><span class="id" title="definition">peel_cont</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">b</span> <span class="id" title="var">b'</span> <span class="id" title="var">t</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">b</span> <span class="id" title="var">b'</span> <span class="id" title="var">t</span>. <span class="id" title="var">pcofix</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">pfold</span>. <span class="id" title="var">punfold</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">Heqt</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">red</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">b'</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">Hb</span>; <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">b</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">Hb'</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>; <span class="id" title="var">cbn</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">fail</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#eqitF_mon"><span class="id" title="lemma">eqitF_mon</span></a>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">fail</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>; <span class="id" title="var">cbn</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#eqitF_mon"><span class="id" title="lemma">eqitF_mon</span></a>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">constructor</span>. <span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">paco2_mon</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">subst</span>. <span class="id" title="var">ddestruction</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">left</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ddestruction</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">paco2_mon</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">ddestruction</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="var">ddestruction</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*looks&nbsp;like&nbsp;I&nbsp;didn't&nbsp;actually&nbsp;need&nbsp;to&nbsp;induct&nbsp;here&nbsp;...&nbsp;*)</span><br/>
&nbsp;&nbsp;- <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">clear</span> <span class="id" title="var">IHeqitF</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x0</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x0</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>. <span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x0</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">x0</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x0</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">x0</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x0</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">b'</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">Heqb'</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqb'</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqb'</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqb'</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqb'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pfold</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">setoid_rewrite</span> &lt;- <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">at</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pfold</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqb'</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqb'</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqb'</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqb'</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">b</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">Heqb</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqb</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqb</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">at</span> 1. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqb</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>. <span class="id" title="var">pfold</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqb</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">red</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H0</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+  <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x0</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">left</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#eqitF_r_refl"><span class="id" title="lemma">eqitF_r_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x0</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqt</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x0</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#eqitF_observe_peel_cont_vis"><span class="id" title="lemma">eqitF_observe_peel_cont_vis</span></a>; <span class="id" title="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#eqitF_r_refl"><span class="id" title="lemma">eqitF_r_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="peel_cont_ret_inv" class="idref" href="#peel_cont_ret_inv"><span class="id" title="lemma">peel_cont_ret_inv</span></a> : <span class="id" title="keyword">∀</span> <a id="E:138" class="idref" href="#E:138"><span class="id" title="binder">E</span></a> <a id="R:139" class="idref" href="#R:139"><span class="id" title="binder">R</span></a> <a id="S:140" class="idref" href="#S:140"><span class="id" title="binder">S</span></a> (<a id="b:141" class="idref" href="#b:141"><span class="id" title="binder">b</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:138"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:139"><span class="id" title="variable">R</span></a>) (<a id="t:142" class="idref" href="#t:142"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:138"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:140"><span class="id" title="variable">S</span></a>) (<a id="s:143" class="idref" href="#s:143"><span class="id" title="binder">s</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:140"><span class="id" title="variable">S</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t:142"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#s:143"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_cont_"><span class="id" title="definition">peel_cont_</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b:141"><span class="id" title="variable">b</span></a>) (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t:142"><span class="id" title="variable">t</span></a>) <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b:141"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">R</span> <span class="id" title="var">S</span>. <span class="id" title="var">pcofix</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">punfold</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#eqitF_r_refl"><span class="id" title="lemma">eqitF_r_refl</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">b</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">Hb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHeqitF</span> <span class="id" title="var">r</span> <span class="id" title="var">CIH</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <span class="id" title="var">r0</span>) <span class="id" title="var">t1</span> <span class="id" title="var">s</span> ); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">S</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">S</span>). <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHeqitF</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hb</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">s</span> := <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pfold</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hb</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hb</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHeqitF</span> <span class="id" title="var">r</span> <span class="id" title="var">CIH</span> <span class="id" title="var">b</span> <span class="id" title="var">t1</span> <span class="id" title="var">s</span> ); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">S</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">S</span>). <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHeqitF</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">punfold</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="proper_peel_cont_eutt_r" class="idref" href="#proper_peel_cont_eutt_r"><span class="id" title="lemma">proper_peel_cont_eutt_r</span></a> : <span class="id" title="keyword">∀</span> (<a id="E:144" class="idref" href="#E:144"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:145" class="idref" href="#R:145"><span class="id" title="binder">R</span></a> <a id="S:146" class="idref" href="#S:146"><span class="id" title="binder">S</span></a> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="b:147" class="idref" href="#b:147"><span class="id" title="binder">b</span></a>: <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:144"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:145"><span class="id" title="variable">R</span></a>) (<a id="t:148" class="idref" href="#t:148"><span class="id" title="binder">t</span></a> <a id="t':149" class="idref" href="#t':149"><span class="id" title="binder">t'</span></a>: <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:144"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:146"><span class="id" title="variable">S</span></a>) (<a id="s:150" class="idref" href="#s:150"><span class="id" title="binder">s</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:146"><span class="id" title="variable">S</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t:148"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t':149"><span class="id" title="variable">t'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_cont"><span class="id" title="definition">peel_cont</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b:147"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t:148"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#s:150"><span class="id" title="variable">s</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_cont"><span class="id" title="definition">peel_cont</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b:147"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t':149"><span class="id" title="variable">t'</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#s:150"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">R</span> <span class="id" title="var">S</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_cont"><span class="id" title="definition">peel_cont</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">b</span> <span class="id" title="var">t</span> <span class="id" title="var">t'</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">b</span> <span class="id" title="var">t</span> <span class="id" title="var">t'</span>. <span class="id" title="var">pcofix</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">pfold</span>. <span class="id" title="var">punfold</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x0</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#eqitF_r_refl"><span class="id" title="lemma">eqitF_r_refl</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x0</span>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">b</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">Heqb</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqb</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>. <span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>. <span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqb</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>; <span class="id" title="var">pclearbot</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x0</span>. <span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">b</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">Heqb</span>; <span class="id" title="tactic">red</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#eqitF_r_refl"><span class="id" title="lemma">eqitF_r_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">x0</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x0</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">e0</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_cont_vis"><span class="id" title="definition">peel_cont_vis</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#Peel.classicT"><span class="id" title="variable">classicT</span></a> (<span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">u</span>) ); <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#eqitF_r_refl"><span class="id" title="lemma">eqitF_r_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_rect_r"><span class="id" title="definition">eq_rect_r</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_rect"><span class="id" title="definition">eq_rect</span></a>. <span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a> <span class="id" title="var">e0</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">He</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">He</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#eqitF_r_refl"><span class="id" title="lemma">eqitF_r_refl</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">b</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">Heqb</span>; <span class="id" title="tactic">red</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqb</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHeqitF</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">cbn</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t'</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">Heqt'</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">paco2_mon</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">r</span> := <span class="id" title="definition">bot2</span>); <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_cont_ret_inv"><span class="id" title="lemma">peel_cont_ret_inv</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">s</span> := <span class="id" title="var">r0</span>). <span class="id" title="var">pfold</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">setoid_rewrite</span> &lt;- <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">at</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pfold</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqt'</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqt'</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqb</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHeqitF</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">b</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">Heqb</span>; <span class="id" title="tactic">red</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqb</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHeqitF</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">Heqt</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">paco2_mon</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">r</span> := <span class="id" title="definition">bot2</span>); <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">enough</span> (<span class="id" title="var">t0</span> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_cont_"><span class="id" title="definition">peel_cont_</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t0</span>) (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t2</span>) ). <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_cont_ret_inv"><span class="id" title="lemma">peel_cont_ret_inv</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">s</span> := <span class="id" title="var">r0</span>). <span class="id" title="tactic">symmetry</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">at</span> 1. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqt</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqt</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqb</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHeqitF</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="proper_eutt_peel_cont" class="idref" href="#proper_eutt_peel_cont"><span class="id" title="instance">proper_eutt_peel_cont</span></a> {<a id="E:151" class="idref" href="#E:151"><span class="id" title="binder">E</span></a> <a id="R:152" class="idref" href="#R:152"><span class="id" title="binder">R</span></a> <a id="S:153" class="idref" href="#S:153"><span class="id" title="binder">S</span></a>} : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="ITree.Eq.Eqit.html#eutt"><span class="id" title="definition">eutt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="ITree.Eq.Eqit.html#eutt"><span class="id" title="definition">eutt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="ITree.Eq.Eqit.html#eutt"><span class="id" title="definition">eutt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>) (@<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_cont"><span class="id" title="definition">peel_cont</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:151"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:152"><span class="id" title="variable">R</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:153"><span class="id" title="variable">S</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#proper_peel_cont_eutt_l"><span class="id" title="lemma">proper_peel_cont_eutt_l</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#proper_peel_cont_eutt_r"><span class="id" title="lemma">proper_peel_cont_eutt_r</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="comment">(*<br/>
Lemma&nbsp;peel_cont_bind&nbsp;:&nbsp;forall&nbsp;(E&nbsp;:&nbsp;Type&nbsp;-&gt;&nbsp;Type)&nbsp;(R&nbsp;S&nbsp;:&nbsp;Type)&nbsp;(b&nbsp;:&nbsp;itrace&nbsp;E&nbsp;S)&nbsp;(t&nbsp;:&nbsp;itree&nbsp;E&nbsp;R)&nbsp;(f&nbsp;:&nbsp;R&nbsp;-&gt;&nbsp;itree&nbsp;E&nbsp;S),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;b&nbsp;⊑&nbsp;ITree.bind&nbsp;t&nbsp;f&nbsp;-&gt;&nbsp;(ITree.bind&nbsp;(peel&nbsp;b&nbsp;t)&nbsp;(peel_cont&nbsp;b&nbsp;t)&nbsp;≈&nbsp;b).<br/>
Proof.<br/>
&nbsp;&nbsp;intros&nbsp;E&nbsp;R&nbsp;S.&nbsp;pcofix&nbsp;CIH.&nbsp;intros.&nbsp;punfold&nbsp;H0.&nbsp;pfold.&nbsp;red.&nbsp;red&nbsp;in&nbsp;H0.&nbsp;cbn&nbsp;in&nbsp;*.<br/>
&nbsp;&nbsp;unfold&nbsp;ITree.bind&nbsp;in&nbsp;H0.&nbsp;unfold&nbsp;ITree.bind.&nbsp;cbn&nbsp;in&nbsp;*.<br/>
&nbsp;&nbsp;unfold&nbsp;observe&nbsp;at&nbsp;1.&nbsp;cbn.<br/>
&nbsp;*)</span><br/>
<span class="comment">(*may&nbsp;need&nbsp;an&nbsp;analgous&nbsp;lemma&nbsp;for&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="vis_refine_peel" class="idref" href="#vis_refine_peel"><span class="id" title="lemma">vis_refine_peel</span></a> : <span class="id" title="keyword">∀</span> (<a id="E:154" class="idref" href="#E:154"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:155" class="idref" href="#R:155"><span class="id" title="binder">R</span></a> <a id="S:156" class="idref" href="#S:156"><span class="id" title="binder">S</span></a> <a id="A:157" class="idref" href="#A:157"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>) (<a id="e:158" class="idref" href="#e:158"><span class="id" title="binder">e</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:154"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A:157"><span class="id" title="variable">A</span></a>) (<a id="a:159" class="idref" href="#a:159"><span class="id" title="binder">a</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A:157"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="k1:160" class="idref" href="#k1:160"><span class="id" title="binder">k1</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:154"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:156"><span class="id" title="variable">S</span></a>) (<a id="k2:161" class="idref" href="#k2:161"><span class="id" title="binder">k2</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A:157"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:154"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:155"><span class="id" title="variable">R</span></a>) (<a id="k3:162" class="idref" href="#k3:162"><span class="id" title="binder">k3</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:154"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:155"><span class="id" title="variable">R</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel"><span class="id" title="definition">peel</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evans"><span class="id" title="constructor">evans</span></a> <span class="id" title="var">_</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#e:158"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#a:159"><span class="id" title="variable">a</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#k1:160"><span class="id" title="variable">k1</span></a>) (<a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#e:158"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#k2:161"><span class="id" title="variable">k2</span></a>) <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evans"><span class="id" title="constructor">evans</span></a> <span class="id" title="var">_</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#e:158"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#a:159"><span class="id" title="variable">a</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#k3:162"><span class="id" title="variable">k3</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#k3:162"><span class="id" title="variable">k3</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel"><span class="id" title="definition">peel</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#k1:160"><span class="id" title="variable">k1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>) (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#k2:161"><span class="id" title="variable">k2</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#a:159"><span class="id" title="variable">a</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">R</span> <span class="id" title="var">S</span> <span class="id" title="var">A</span>. <span class="comment">(*&nbsp;pcofix&nbsp;CIH.&nbsp;*)</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">k1</span> <span class="id" title="var">k2</span> <span class="id" title="var">k3</span> <span class="id" title="var">Hpeel</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel"><span class="id" title="definition">peel</span></a> <span class="id" title="tactic">in</span> ×. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="var">punfold</span> <span class="id" title="var">Hpeel</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpeel</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpeel</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpeel</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpeel</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_vis"><span class="id" title="definition">peel_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpeel</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">A</span>). <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#Peel.classicT"><span class="id" title="variable">classicT</span></a> (<span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">A</span>) ); <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_rect_r"><span class="id" title="definition">eq_rect_r</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_rect"><span class="id" title="definition">eq_rect</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpeel</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a> <span class="id" title="var">e0</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">He</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">He</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">HeqHe</span> <span class="id" title="var">e0</span> <span class="id" title="var">H</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>. <span class="id" title="var">inv</span> <span class="id" title="var">Hpeel</span>. <span class="id" title="var">ddestruction</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">REL</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_"><span class="id" title="definition">peel_</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> (<span class="id" title="var">k1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>)) (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> (<span class="id" title="var">k2</span> <span class="id" title="var">a</span>)) <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <span class="id" title="var">k3</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> ). <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">punfold</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="vis_refine_peel_cont" class="idref" href="#vis_refine_peel_cont"><span class="id" title="lemma">vis_refine_peel_cont</span></a> :  <span class="id" title="keyword">∀</span> (<a id="E:163" class="idref" href="#E:163"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:164" class="idref" href="#R:164"><span class="id" title="binder">R</span></a> <a id="S:165" class="idref" href="#S:165"><span class="id" title="binder">S</span></a> <a id="A:166" class="idref" href="#A:166"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>) (<a id="e:167" class="idref" href="#e:167"><span class="id" title="binder">e</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:163"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A:166"><span class="id" title="variable">A</span></a>) (<a id="a:168" class="idref" href="#a:168"><span class="id" title="binder">a</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A:166"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="k1:169" class="idref" href="#k1:169"><span class="id" title="binder">k1</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:163"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:165"><span class="id" title="variable">S</span></a>) (<a id="k2:170" class="idref" href="#k2:170"><span class="id" title="binder">k2</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A:166"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:163"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:164"><span class="id" title="variable">R</span></a>) (<a id="t:171" class="idref" href="#t:171"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:163"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:165"><span class="id" title="variable">S</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_cont_"><span class="id" title="definition">peel_cont_</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evans"><span class="id" title="constructor">evans</span></a> <span class="id" title="var">_</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#e:167"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#a:168"><span class="id" title="variable">a</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#k1:169"><span class="id" title="variable">k1</span></a>) (<a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#e:167"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#k2:170"><span class="id" title="variable">k2</span></a>) <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t:171"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t:171"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_cont_"><span class="id" title="definition">peel_cont_</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#k1:169"><span class="id" title="variable">k1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>)) (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#k2:170"><span class="id" title="variable">k2</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#a:168"><span class="id" title="variable">a</span></a>))<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">R</span> <span class="id" title="var">S</span> <span class="id" title="var">A</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">k1</span> <span class="id" title="var">k2</span> <span class="id" title="var">t</span> <span class="id" title="var">Hpeelcont</span>. <span class="id" title="var">punfold</span> <span class="id" title="var">Hpeelcont</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpeelcont</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpeelcont</span> <span class="id" title="tactic">at</span> 1. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_cont_vis"><span class="id" title="definition">peel_cont_vis</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">A</span>); <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#Peel.classicT"><span class="id" title="variable">classicT</span></a> (<span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">A</span>) ); <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_rect_r"><span class="id" title="definition">eq_rect_r</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_rect"><span class="id" title="definition">eq_rect</span></a> <span class="id" title="tactic">in</span> ×. <span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a> <span class="id" title="var">e0</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">He</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">He</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Tau"><span class="id" title="abbreviation">Tau</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_cont_"><span class="id" title="definition">peel_cont_</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> (<span class="id" title="var">k1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>)) (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> (<span class="id" title="var">k2</span> <span class="id" title="var">a</span>) ) )  <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <span class="id" title="var">t</span> ).<br/>
&nbsp;&nbsp;{ <span class="id" title="var">pfold</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="spin_not_vis" class="idref" href="#spin_not_vis"><span class="id" title="lemma">spin_not_vis</span></a> : <span class="id" title="keyword">∀</span> (<a id="E:172" class="idref" href="#E:172"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:173" class="idref" href="#R:173"><span class="id" title="binder">R</span></a> <a id="A:174" class="idref" href="#A:174"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="e:175" class="idref" href="#e:175"><span class="id" title="binder">e</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:172"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A:174"><span class="id" title="variable">A</span></a>) (<a id="k:176" class="idref" href="#k:176"><span class="id" title="binder">k</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A:174"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:172"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:173"><span class="id" title="variable">R</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">¬</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.spin"><span class="id" title="definition">ITree.spin</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#e:175"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#k:176"><span class="id" title="variable">k</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">R</span> <span class="id" title="var">A</span> <span class="id" title="var">e</span> <span class="id" title="var">k</span> <span class="id" title="var">Hcontra</span>. <span class="id" title="var">punfold</span> <span class="id" title="var">Hcontra</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcontra</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hcontra</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHHcontra</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="peel_vis_empty_contra" class="idref" href="#peel_vis_empty_contra"><span class="id" title="lemma">peel_vis_empty_contra</span></a>: <span class="id" title="keyword">∀</span> (<a id="R:177" class="idref" href="#R:177"><span class="id" title="binder">R</span></a> : <span class="id" title="keyword">Type</span>) (<a id="E:178" class="idref" href="#E:178"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="S:179" class="idref" href="#S:179"><span class="id" title="binder">S</span></a> <a id="A0:180" class="idref" href="#A0:180"><span class="id" title="binder">A0</span></a> : <span class="id" title="keyword">Type</span>) (<a id="Hempty:181" class="idref" href="#Hempty:181"><span class="id" title="binder">Hempty</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A0:180"><span class="id" title="variable">A0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Basics.Basics.html#void"><span class="id" title="abbreviation">void</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="ev:182" class="idref" href="#ev:182"><span class="id" title="binder">ev</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:178"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A0:180"><span class="id" title="variable">A0</span></a>) (<a id="k0:183" class="idref" href="#k0:183"><span class="id" title="binder">k0</span></a> : <a class="idref" href="ITree.Basics.Basics.html#void"><span class="id" title="abbreviation">void</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#EvAns"><span class="id" title="inductive">EvAns</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:178"><span class="id" title="variable">E</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:179"><span class="id" title="variable">S</span></a>) (<a id="t0:184" class="idref" href="#t0:184"><span class="id" title="binder">t0</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:178"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:177"><span class="id" title="variable">R</span></a>) (<a id="A:185" class="idref" href="#A:185"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="a:186" class="idref" href="#a:186"><span class="id" title="binder">a</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A:185"><span class="id" title="variable">A</span></a>) (<a id="e:187" class="idref" href="#e:187"><span class="id" title="binder">e</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:178"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A:185"><span class="id" title="variable">A</span></a>) (<a id="k:188" class="idref" href="#k:188"><span class="id" title="binder">k</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:178"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:177"><span class="id" title="variable">R</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Eq.Eqit.html#eqitF"><span class="id" title="inductive">eqitF</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> (<span class="id" title="definition">upaco2</span> (<a class="idref" href="ITree.Eq.Eqit.html#eqit_"><span class="id" title="definition">eqit_</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>) <span class="id" title="definition">bot2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_"><span class="id" title="definition">peel_</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evempty"><span class="id" title="constructor">evempty</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A0:180"><span class="id" title="variable">A0</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#Hempty:181"><span class="id" title="variable">Hempty</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#ev:182"><span class="id" title="variable">ev</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#k0:183"><span class="id" title="variable">k0</span></a>) (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t0:184"><span class="id" title="variable">t0</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evans"><span class="id" title="constructor">evans</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A:185"><span class="id" title="variable">A</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#e:187"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#a:186"><span class="id" title="variable">a</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#k:188"><span class="id" title="variable">k</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">R</span> <span class="id" title="var">E</span> <span class="id" title="var">S</span> <span class="id" title="var">A0</span> <span class="id" title="var">Hempty</span> <span class="id" title="var">ev</span> <span class="id" title="var">k0</span> <span class="id" title="var">t0</span> <span class="id" title="var">A</span> <span class="id" title="var">a</span> <span class="id" title="var">e</span> <span class="id" title="var">k</span> <span class="id" title="var">Hpeel</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hpeel</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t0</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">Heqt0</span>; <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t0</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">Heqt0</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">injection</span> <span class="id" title="var">x</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Ht1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IHHpeel</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHHpeel</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="vis_peel_l" class="idref" href="#vis_peel_l"><span class="id" title="lemma">vis_peel_l</span></a> : <span class="id" title="keyword">∀</span> (<a id="E:189" class="idref" href="#E:189"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:190" class="idref" href="#R:190"><span class="id" title="binder">R</span></a> <a id="S:191" class="idref" href="#S:191"><span class="id" title="binder">S</span></a> <a id="A:192" class="idref" href="#A:192"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>) (<a id="e:193" class="idref" href="#e:193"><span class="id" title="binder">e</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:189"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A:192"><span class="id" title="variable">A</span></a>) (<a id="a:194" class="idref" href="#a:194"><span class="id" title="binder">a</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A:192"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="b:195" class="idref" href="#b:195"><span class="id" title="binder">b</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:189"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:191"><span class="id" title="variable">S</span></a>) (<a id="t:196" class="idref" href="#t:196"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:189"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:190"><span class="id" title="variable">R</span></a>) (<a id="f:197" class="idref" href="#f:197"><span class="id" title="binder">f</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:190"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:189"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:191"><span class="id" title="variable">S</span></a>) (<a id="k:198" class="idref" href="#k:198"><span class="id" title="binder">k</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:189"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:190"><span class="id" title="variable">R</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b:195"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t:196"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#f:197"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel"><span class="id" title="definition">peel</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b:195"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t:196"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evans"><span class="id" title="constructor">evans</span></a> <span class="id" title="var">_</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#e:193"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#a:194"><span class="id" title="variable">a</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#k:198"><span class="id" title="variable">k</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="k':199" class="idref" href="#k':199"><span class="id" title="binder">k'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b:195"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Basics.Monad.html#20d7a3de27e35f38017a31a5b4c235e8"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evans"><span class="id" title="constructor">evans</span></a> <span class="id" title="var">_</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#e:193"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#a:194"><span class="id" title="variable">a</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#k':199"><span class="id" title="variable">k'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">R</span> <span class="id" title="var">S</span> <span class="id" title="var">A</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">t</span> <span class="id" title="var">f</span> <span class="id" title="var">k</span> <span class="id" title="var">Href</span> <span class="id" title="var">Hpeel</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">Hpeel</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpeel</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpeel</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hpeel</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel"><span class="id" title="definition">peel</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">b</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">Heqb</span>; <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">Heqt</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">e0</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_vis"><span class="id" title="definition">peel_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">A0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">X0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqb</span>. <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqt</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqb</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqb</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqt</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_vis"><span class="id" title="lemma">bind_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">Href</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="var">inv</span> <span class="id" title="var">Href</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ddestruction</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#Peel.classicT"><span class="id" title="variable">classicT</span></a> (<span class="id" title="var">A0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">X0</span>)); <span class="id" title="tactic">try</span> (<span class="id" title="var">exfalso</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">fail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_rect_r"><span class="id" title="definition">eq_rect_r</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_rect"><span class="id" title="definition">eq_rect</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a> <span class="id" title="var">e0</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">He</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">He</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">injection</span> <span class="id" title="var">x</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hevans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ddestruction</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="var">ddestruction</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">k0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqb</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqb</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqb</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel"><span class="id" title="definition">peel</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">b</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">Heqb</span>; <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">Heqt</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">e0</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqt</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqt</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqt</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHHpeel</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel"><span class="id" title="definition">peel</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqb</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#spin_not_vis"><span class="id" title="lemma">spin_not_vis</span></a>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqb</span>. <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqt</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqb</span>. <span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">Heqb</span>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqb</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqt</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHHpeel</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqb</span>. <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqt</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqb</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">Heqb</span>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqb</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqt</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHHpeel</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqt</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqt</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqt</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqb</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqb</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqb</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">Heqb</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHHpeel</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_vis_empty_contra"><span class="id" title="lemma">peel_vis_empty_contra</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_vis"><span class="id" title="definition">peel_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqb</span>. <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqt</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqb</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqb</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqt</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_vis"><span class="id" title="lemma">bind_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>. <span class="id" title="var">punfold</span> <span class="id" title="var">Href</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">Href</span>. <span class="id" title="var">ddestruction</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">subst</span>; <span class="id" title="var">ddestruction</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">A0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">A0</span>); <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#Peel.classicT"><span class="id" title="variable">classicT</span></a> (<span class="id" title="var">A0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">A0</span>) ); <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_rect_r"><span class="id" title="definition">eq_rect_r</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_rect"><span class="id" title="definition">eq_rect</span></a> <span class="id" title="tactic">in</span> ×. <span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a> <span class="id" title="var">e0</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">He</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">He</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">discriminate</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="vis_peel_r" class="idref" href="#vis_peel_r"><span class="id" title="lemma">vis_peel_r</span></a> : <span class="id" title="keyword">∀</span> (<a id="E:200" class="idref" href="#E:200"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:201" class="idref" href="#R:201"><span class="id" title="binder">R</span></a> <a id="S:202" class="idref" href="#S:202"><span class="id" title="binder">S</span></a> <a id="A:203" class="idref" href="#A:203"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>) (<a id="e:204" class="idref" href="#e:204"><span class="id" title="binder">e</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:200"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A:203"><span class="id" title="variable">A</span></a>) (<a id="a:205" class="idref" href="#a:205"><span class="id" title="binder">a</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A:203"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="b:206" class="idref" href="#b:206"><span class="id" title="binder">b</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:200"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:202"><span class="id" title="variable">S</span></a>) (<a id="t:207" class="idref" href="#t:207"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:200"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:201"><span class="id" title="variable">R</span></a>) (<a id="f:208" class="idref" href="#f:208"><span class="id" title="binder">f</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:201"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:200"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:202"><span class="id" title="variable">S</span></a>) (<a id="k:209" class="idref" href="#k:209"><span class="id" title="binder">k</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:200"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:201"><span class="id" title="variable">R</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b:206"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t:207"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#f:208"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel"><span class="id" title="definition">peel</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b:206"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t:207"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evans"><span class="id" title="constructor">evans</span></a> <span class="id" title="var">_</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#e:204"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#a:205"><span class="id" title="variable">a</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#k:209"><span class="id" title="variable">k</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="k':210" class="idref" href="#k':210"><span class="id" title="binder">k'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t:207"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Basics.Monad.html#20d7a3de27e35f38017a31a5b4c235e8"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#e:204"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#k':210"><span class="id" title="variable">k'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">R</span> <span class="id" title="var">S</span> <span class="id" title="var">A</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">t</span> <span class="id" title="var">f</span> <span class="id" title="var">k</span> <span class="id" title="var">Href</span> <span class="id" title="var">Hpeel</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#vis_peel_l"><span class="id" title="lemma">vis_peel_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpeel</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hpeell</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hpeell</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">k'</span> <span class="id" title="var">Hb</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hb</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hb</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpeel</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Hb</span> <span class="id" title="var">b</span>. <span class="id" title="var">punfold</span> <span class="id" title="var">Hpeel</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpeel</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel"><span class="id" title="definition">peel</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpeel</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hpeel</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">Heqt</span>; <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqt</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqt</span>. <span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">Heqt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_vis"><span class="id" title="definition">peel_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#Peel.classicT"><span class="id" title="variable">classicT</span></a> (<span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">X</span>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_rect_r"><span class="id" title="definition">eq_rect_r</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_rect"><span class="id" title="definition">eq_rect</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a> <span class="id" title="var">e1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">He</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">He</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">∃</span> <span class="id" title="var">k0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqt</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_vis"><span class="id" title="lemma">bind_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>. <span class="id" title="var">punfold</span> <span class="id" title="var">Href</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="var">inv</span> <span class="id" title="var">Href</span>. <span class="id" title="var">ddestruction</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H1</span>. <span class="id" title="var">ddestruction</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">Heqt</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqt</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqt</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqt</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">Heqt</span>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHHpeel</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_vis"><span class="id" title="definition">peel_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#Peel.classicT"><span class="id" title="variable">classicT</span></a> (<span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">X</span>) ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_rect_r"><span class="id" title="definition">eq_rect_r</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_rect"><span class="id" title="definition">eq_rect</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a> <span class="id" title="var">e1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">He</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">He</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">injection</span> <span class="id" title="var">x</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Ht1</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpeel</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exfalso</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#spin_not_vis"><span class="id" title="lemma">spin_not_vis</span></a>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="peel_cont_vis_eutt" class="idref" href="#peel_cont_vis_eutt"><span class="id" title="lemma">peel_cont_vis_eutt</span></a>: <span class="id" title="keyword">∀</span> (<a id="R:211" class="idref" href="#R:211"><span class="id" title="binder">R</span></a> : <span class="id" title="keyword">Type</span>) (<a id="r:212" class="idref" href="#r:212"><span class="id" title="binder">r</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:211"><span class="id" title="variable">R</span></a>) (<a id="E:213" class="idref" href="#E:213"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="S:214" class="idref" href="#S:214"><span class="id" title="binder">S</span></a> <a id="A:215" class="idref" href="#A:215"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>) (<a id="ev:216" class="idref" href="#ev:216"><span class="id" title="binder">ev</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:213"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A:215"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="ans:217" class="idref" href="#ans:217"><span class="id" title="binder">ans</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A:215"><span class="id" title="variable">A</span></a>) (<a id="kb:218" class="idref" href="#kb:218"><span class="id" title="binder">kb</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#EvAns"><span class="id" title="inductive">EvAns</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:213"><span class="id" title="variable">E</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:214"><span class="id" title="variable">S</span></a>) (<a id="kt:219" class="idref" href="#kt:219"><span class="id" title="binder">kt</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A:215"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:213"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:211"><span class="id" title="variable">R</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_cont"><span class="id" title="definition">peel_cont</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evans"><span class="id" title="constructor">evans</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A:215"><span class="id" title="variable">A</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#ev:216"><span class="id" title="variable">ev</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#ans:217"><span class="id" title="variable">ans</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#kb:218"><span class="id" title="variable">kb</span></a>) (<a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#ev:216"><span class="id" title="variable">ev</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#kt:219"><span class="id" title="variable">kt</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#r:212"><span class="id" title="variable">r</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_cont"><span class="id" title="definition">peel_cont</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#kb:218"><span class="id" title="variable">kb</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>) (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#kt:219"><span class="id" title="variable">kt</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#ans:217"><span class="id" title="variable">ans</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#r:212"><span class="id" title="variable">r</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">R</span> <span class="id" title="var">r</span> <span class="id" title="var">E</span> <span class="id" title="var">S</span> <span class="id" title="var">A</span> <span class="id" title="var">ev</span> <span class="id" title="var">ans</span> <span class="id" title="var">kb</span> <span class="id" title="var">kt</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">pfold</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="tactic">at</span> 1. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_cont_vis"><span class="id" title="definition">peel_cont_vis</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">A</span>); <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#Peel.classicT"><span class="id" title="variable">classicT</span></a> (<span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">A</span>)); <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_rect_r"><span class="id" title="definition">eq_rect_r</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_rect"><span class="id" title="definition">eq_rect</span></a>. <span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a> <span class="id" title="var">e</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">He</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">He</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_cont"><span class="id" title="definition">peel_cont</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#eqitF_r_refl"><span class="id" title="lemma">eqitF_r_refl</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="peel_cont_refine_t" class="idref" href="#peel_cont_refine_t"><span class="id" title="lemma">peel_cont_refine_t</span></a> : <span class="id" title="keyword">∀</span> (<a id="E:220" class="idref" href="#E:220"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:221" class="idref" href="#R:221"><span class="id" title="binder">R</span></a> <a id="S:222" class="idref" href="#S:222"><span class="id" title="binder">S</span></a> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="b:223" class="idref" href="#b:223"><span class="id" title="binder">b</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:220"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:222"><span class="id" title="variable">S</span></a>) (<a id="t:224" class="idref" href="#t:224"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:220"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:221"><span class="id" title="variable">R</span></a>) (<a id="f:225" class="idref" href="#f:225"><span class="id" title="binder">f</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:221"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:220"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:222"><span class="id" title="variable">S</span></a>) (<a id="r:226" class="idref" href="#r:226"><span class="id" title="binder">r</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:221"><span class="id" title="variable">R</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hrutt:227" class="idref" href="#Hrutt:227"><span class="id" title="binder">Hrutt</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b:223"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t:224"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#f:225"><span class="id" title="variable">f</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Props.Infinite.html#may_converge"><span class="id" title="inductive">may_converge</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#r:226"><span class="id" title="variable">r</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel"><span class="id" title="definition">peel</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b:223"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t:224"><span class="id" title="variable">t</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_cont"><span class="id" title="definition">peel_cont</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b:223"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t:224"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#r:226"><span class="id" title="variable">r</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#f:225"><span class="id" title="variable">f</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#r:226"><span class="id" title="variable">r</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">remember</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel"><span class="id" title="definition">peel</span></a> <span class="id" title="var">b</span> <span class="id" title="var">t</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">t'</span>. <span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel"><span class="id" title="definition">peel</span></a> <span class="id" title="var">b</span> <span class="id" title="var">t</span> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <span class="id" title="var">t'</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Heqt'</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">b</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_ret_inv"><span class="id" title="lemma">peel_ret_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrutt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_l"><span class="id" title="lemma">bind_ret_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrutt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_cont"><span class="id" title="definition">peel_cont</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_cont_ret_inv"><span class="id" title="lemma">peel_cont_ret_inv</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#vis_peel_l"><span class="id" title="lemma">vis_peel_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hb</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#vis_peel_r"><span class="id" title="lemma">vis_peel_r</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Ht</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hb</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">kb</span> <span class="id" title="var">Hkb</span>]. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">kt</span> <span class="id" title="var">Htk</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Htk</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hkb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hkb</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrutt</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Htk</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrutt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hkb</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Htk</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#vis_refine_peel"><span class="id" title="lemma">vis_refine_peel</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hk</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_cont_vis_eutt"><span class="id" title="lemma">peel_cont_vis_eutt</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHmay_converge</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_vis"><span class="id" title="lemma">bind_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrutt</span>. <span class="id" title="var">punfold</span> <span class="id" title="var">Hrutt</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrutt</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">Hrutt</span>. <span class="id" title="var">ddestruction</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#RAnsRef"><span class="id" title="inductive">RAnsRef</span></a> <span class="id" title="var">E</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <span class="id" title="var">A</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evans"><span class="id" title="constructor">evans</span></a> <span class="id" title="var">A</span> <span class="id" title="var">ev</span> <span class="id" title="var">ans</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> <span class="id" title="var">ev</span> <span class="id" title="var">ans</span> ); <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H8</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span>. <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">fold_eutt</span> := <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> |- <span class="id" title="definition">paco2</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ?<span class="id" title="var">t1</span> ?<span class="id" title="var">t2</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">paco2_mon</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">r</span> := <span class="id" title="definition">bot2</span>); <span class="id" title="tactic">intuition</span>; <span class="id" title="var">enough</span> (<span class="id" title="var">t1</span> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <span class="id" title="var">t2</span>); <span class="id" title="tactic">auto</span> <span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">fold_peel_cont</span> <span class="id" title="var">r</span> := <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> |- <span class="id" title="keyword">context</span> [<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_cont_"><span class="id" title="definition">peel_cont_</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> ?<span class="id" title="var">b</span>) (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> ?<span class="id" title="var">t</span>) ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hfpc</span> : <span class="id" title="keyword">∀</span> <a id="r:228" class="idref" href="#r:228"><span class="id" title="binder">r</span></a>, <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_cont_"><span class="id" title="definition">peel_cont_</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">b</span>) (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_cont"><span class="id" title="definition">peel_cont</span></a> <span class="id" title="var">b</span> <span class="id" title="var">t</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#r:228"><span class="id" title="variable">r</span></a> ); <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">Hfpc</span> <span class="id" title="var">r</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Hfpc</span> <span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trace_prefix_tau_ret" class="idref" href="#trace_prefix_tau_ret"><span class="id" title="lemma">trace_prefix_tau_ret</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="E:229" class="idref" href="#E:229"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:230" class="idref" href="#R:230"><span class="id" title="binder">R</span></a> <a id="S:231" class="idref" href="#S:231"><span class="id" title="binder">S</span></a> : <span class="id" title="keyword">Type</span>) (<a id="r:232" class="idref" href="#r:232"><span class="id" title="binder">r</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:229"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:231"><span class="id" title="variable">S</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:229"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:230"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="b:233" class="idref" href="#b:233"><span class="id" title="binder">b</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:229"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:230"><span class="id" title="variable">R</span></a>) (<a id="t:234" class="idref" href="#t:234"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:229"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:231"><span class="id" title="variable">S</span></a>) (<a id="f:235" class="idref" href="#f:235"><span class="id" title="binder">f</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:231"><span class="id" title="variable">S</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:229"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:230"><span class="id" title="variable">R</span></a>) (<a id="r0:236" class="idref" href="#r0:236"><span class="id" title="binder">r0</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:230"><span class="id" title="variable">R</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b:233"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t:234"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#f:235"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b:233"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#RetF"><span class="id" title="constructor">RetF</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#r0:236"><span class="id" title="variable">r0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="t0:237" class="idref" href="#t0:237"><span class="id" title="binder">t0</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:229"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:231"><span class="id" title="variable">S</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t:234"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#TauF"><span class="id" title="constructor">TauF</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t0:237"><span class="id" title="variable">t0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.ITrace.ITracePrefix.html#trace_prefixF"><span class="id" title="inductive">trace_prefixF</span></a> (<span class="id" title="definition">upaco2</span> <a class="idref" href="ITree.Extra.ITrace.ITracePrefix.html#trace_prefix_"><span class="id" title="definition">trace_prefix_</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#r:232"><span class="id" title="variable">r</span></a>) (<a class="idref" href="ITree.Core.ITreeDefinition.html#TauF"><span class="id" title="constructor">TauF</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_"><span class="id" title="definition">peel_</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#RetF"><span class="id" title="constructor">RetF</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#r0:236"><span class="id" title="variable">r0</span></a>) (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t0:237"><span class="id" title="variable">t0</span></a>))) (<a class="idref" href="ITree.Core.ITreeDefinition.html#RetF"><span class="id" title="constructor">RetF</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#r0:236"><span class="id" title="variable">r0</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">R</span> <span class="id" title="var">S</span> <span class="id" title="var">r</span> <span class="id" title="var">b</span> <span class="id" title="var">t</span> <span class="id" title="var">f</span> <span class="id" title="var">r0</span> <span class="id" title="var">Hrutt</span> <span class="id" title="var">Heqb</span> <span class="id" title="var">t0</span> <span class="id" title="var">Heqt</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqb</span>. <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqt</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqb</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqt</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqb</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrutt</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqt</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrutt</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrutt</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#trace_refine_ret_inv_r"><span class="id" title="lemma">trace_refine_ret_inv_r</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrutt</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="s:239" class="idref" href="#s:239"><span class="id" title="binder">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <span class="id" title="var">t0</span> <a class="idref" href="ITree.Basics.Monad.html#20d7a3de27e35f38017a31a5b4c235e8"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#s:238"><span class="id" title="variable">s</span></a>).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">Hrutt</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrutt</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hrutt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t0</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">Ht0</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">r1</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht0</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t0</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">Ht0</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">∃</span> <span class="id" title="var">r1</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht0</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">injection</span> <span class="id" title="var">x</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Ht1</span>. <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht0</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#eq_sub_eutt"><span class="id" title="instance">eq_sub_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht0</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Ht0'</span>. <span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">Ht0'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHHrutt</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht1</span>. <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s</span> <span class="id" title="var">Ht0</span>]. <span class="id" title="var">punfold</span> <span class="id" title="var">Ht0</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht0</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Heqt</span> <span class="id" title="var">Hrutt</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Ht0</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span>. <span class="id" title="var">punfold</span> <span class="id" title="var">Heqb</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqb</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="var">inv</span> <span class="id" title="var">Heqb</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">inv</span> <span class="id" title="var">CHECK</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHHt0</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trace_prefix_vis_evans" class="idref" href="#trace_prefix_vis_evans"><span class="id" title="lemma">trace_prefix_vis_evans</span></a>: <span class="id" title="keyword">∀</span> (<a id="E:240" class="idref" href="#E:240"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:241" class="idref" href="#R:241"><span class="id" title="binder">R</span></a> <a id="S:242" class="idref" href="#S:242"><span class="id" title="binder">S</span></a> : <span class="id" title="keyword">Type</span>) (<a id="r:243" class="idref" href="#r:243"><span class="id" title="binder">r</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:240"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:242"><span class="id" title="variable">S</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:240"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:241"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="A0:244" class="idref" href="#A0:244"><span class="id" title="binder">A0</span></a> : <span class="id" title="keyword">Type</span>) (<a id="ev:245" class="idref" href="#ev:245"><span class="id" title="binder">ev</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:240"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A0:244"><span class="id" title="variable">A0</span></a>) (<a id="ans:246" class="idref" href="#ans:246"><span class="id" title="binder">ans</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A0:244"><span class="id" title="variable">A0</span></a>) (<a id="k:247" class="idref" href="#k:247"><span class="id" title="binder">k</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#EvAns"><span class="id" title="inductive">EvAns</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:240"><span class="id" title="variable">E</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:241"><span class="id" title="variable">R</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="k':248" class="idref" href="#k':248"><span class="id" title="binder">k'</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A0:244"><span class="id" title="variable">A0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:240"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:242"><span class="id" title="variable">S</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="t0:249" class="idref" href="#t0:249"><span class="id" title="binder">t0</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:240"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:242"><span class="id" title="variable">S</span></a>) (<a id="f:250" class="idref" href="#f:250"><span class="id" title="binder">f</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:242"><span class="id" title="variable">S</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:240"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:241"><span class="id" title="variable">R</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> (<a id="a:251" class="idref" href="#a:251"><span class="id" title="binder">a</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>) (<a id="b:252" class="idref" href="#b:252"><span class="id" title="binder">b</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A0:244"><span class="id" title="variable">A0</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#RAnsRef"><span class="id" title="inductive">RAnsRef</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:240"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A0:244"><span class="id" title="variable">A0</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evans"><span class="id" title="constructor">evans</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A0:244"><span class="id" title="variable">A0</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#ev:245"><span class="id" title="variable">ev</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#ans:246"><span class="id" title="variable">ans</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#a:251"><span class="id" title="variable">a</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#ev:245"><span class="id" title="variable">ev</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b:252"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="definition">upaco2</span> (<a class="idref" href="ITree.Eq.Rutt.html#rutt_"><span class="id" title="definition">rutt_</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#REvRef"><span class="id" title="inductive">REvRef</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:240"><span class="id" title="variable">E</span></a>) (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#RAnsRef"><span class="id" title="inductive">RAnsRef</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:240"><span class="id" title="variable">E</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">bot2</span>) (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#k:247"><span class="id" title="variable">k</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#a:251"><span class="id" title="variable">a</span></a>) (<a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#k':248"><span class="id" title="variable">k'</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b:252"><span class="id" title="variable">b</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#f:250"><span class="id" title="variable">f</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t0:249"><span class="id" title="variable">t0</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#ev:245"><span class="id" title="variable">ev</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#k':248"><span class="id" title="variable">k'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> (<a id="b:253" class="idref" href="#b:253"><span class="id" title="binder">b</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:240"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:241"><span class="id" title="variable">R</span></a>) (<a id="t:254" class="idref" href="#t:254"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:240"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:242"><span class="id" title="variable">S</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="f:255" class="idref" href="#f:255"><span class="id" title="binder">f</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:242"><span class="id" title="variable">S</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:240"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:241"><span class="id" title="variable">R</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b:253"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t:254"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#f:255"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#r:243"><span class="id" title="variable">r</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel"><span class="id" title="definition">peel</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b:253"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t:254"><span class="id" title="variable">t</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b:253"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.ITrace.ITracePrefix.html#trace_prefixF"><span class="id" title="inductive">trace_prefixF</span></a> (<span class="id" title="definition">upaco2</span> <a class="idref" href="ITree.Extra.ITrace.ITracePrefix.html#trace_prefix_"><span class="id" title="definition">trace_prefix_</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#r:243"><span class="id" title="variable">r</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_"><span class="id" title="definition">peel_</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evans"><span class="id" title="constructor">evans</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A0:244"><span class="id" title="variable">A0</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#ev:245"><span class="id" title="variable">ev</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#ans:246"><span class="id" title="variable">ans</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#k:247"><span class="id" title="variable">k</span></a>) (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t0:249"><span class="id" title="variable">t0</span></a>))) (<a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evans"><span class="id" title="constructor">evans</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A0:244"><span class="id" title="variable">A0</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#ev:245"><span class="id" title="variable">ev</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#ans:246"><span class="id" title="variable">ans</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#k:247"><span class="id" title="variable">k</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">R</span> <span class="id" title="var">S</span> <span class="id" title="var">r</span> <span class="id" title="var">A0</span> <span class="id" title="var">ev</span> <span class="id" title="var">ans</span> <span class="id" title="var">k</span> <span class="id" title="var">k'</span> <span class="id" title="var">t0</span> <span class="id" title="var">f</span> <span class="id" title="var">Hk'</span> <span class="id" title="var">Ht0</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">Ht0</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht0</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Ht0</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_vis"><span class="id" title="definition">peel_vis</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">A0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">A0</span>); <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#Peel.classicT"><span class="id" title="variable">classicT</span></a> (<span class="id" title="var">A0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">A0</span>)); <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_rect_r"><span class="id" title="definition">eq_rect_r</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_rect"><span class="id" title="definition">eq_rect</span></a>. <span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a> <span class="id" title="var">e</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">He</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">He</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#RAnsRef"><span class="id" title="inductive">RAnsRef</span></a> <span class="id" title="var">E</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <span class="id" title="var">A0</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evans"><span class="id" title="constructor">evans</span></a> <span class="id" title="var">A0</span> <span class="id" title="var">ev</span> <span class="id" title="var">ans</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> <span class="id" title="var">ev</span> <span class="id" title="var">ans</span>); <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hk'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">k1</span> <span class="id" title="var">ans</span> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <span class="id" title="var">k'</span> <span class="id" title="var">ans</span>); <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">REL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHHt0</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trace_prefix_vis_evempty" class="idref" href="#trace_prefix_vis_evempty"><span class="id" title="lemma">trace_prefix_vis_evempty</span></a>: <span class="id" title="keyword">∀</span> (<a id="E:256" class="idref" href="#E:256"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:257" class="idref" href="#R:257"><span class="id" title="binder">R</span></a> <a id="S:258" class="idref" href="#S:258"><span class="id" title="binder">S</span></a> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="r:259" class="idref" href="#r:259"><span class="id" title="binder">r</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:256"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:258"><span class="id" title="variable">S</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:256"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:257"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="A0:260" class="idref" href="#A0:260"><span class="id" title="binder">A0</span></a> : <span class="id" title="keyword">Type</span>) (<a id="Hempty:261" class="idref" href="#Hempty:261"><span class="id" title="binder">Hempty</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A0:260"><span class="id" title="variable">A0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Basics.Basics.html#void"><span class="id" title="abbreviation">void</span></a>) (<a id="ev:262" class="idref" href="#ev:262"><span class="id" title="binder">ev</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:256"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A0:260"><span class="id" title="variable">A0</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="k:263" class="idref" href="#k:263"><span class="id" title="binder">k</span></a> : <a class="idref" href="ITree.Basics.Basics.html#void"><span class="id" title="abbreviation">void</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#EvAns"><span class="id" title="inductive">EvAns</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:256"><span class="id" title="variable">E</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:257"><span class="id" title="variable">R</span></a>) (<a id="A:264" class="idref" href="#A:264"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="e0:265" class="idref" href="#e0:265"><span class="id" title="binder">e0</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:256"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A:264"><span class="id" title="variable">A</span></a>) (<a id="t0:266" class="idref" href="#t0:266"><span class="id" title="binder">t0</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:256"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:258"><span class="id" title="variable">S</span></a>) (<a id="k':267" class="idref" href="#k':267"><span class="id" title="binder">k'</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A:264"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:256"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:258"><span class="id" title="variable">S</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Eq.Eqit.html#eqitF"><span class="id" title="inductive">eqitF</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="definition">upaco2</span> (<a class="idref" href="ITree.Eq.Eqit.html#eqit_"><span class="id" title="definition">eqit_</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>) <span class="id" title="definition">bot2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t0:266"><span class="id" title="variable">t0</span></a>) (<a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#e0:265"><span class="id" title="variable">e0</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#k':267"><span class="id" title="variable">k'</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.ITrace.ITracePrefix.html#trace_prefixF"><span class="id" title="inductive">trace_prefixF</span></a> (<span class="id" title="definition">upaco2</span> <a class="idref" href="ITree.Extra.ITrace.ITracePrefix.html#trace_prefix_"><span class="id" title="definition">trace_prefix_</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#r:259"><span class="id" title="variable">r</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_"><span class="id" title="definition">peel_</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evempty"><span class="id" title="constructor">evempty</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A0:260"><span class="id" title="variable">A0</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#Hempty:261"><span class="id" title="variable">Hempty</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#ev:262"><span class="id" title="variable">ev</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#k:263"><span class="id" title="variable">k</span></a>) (<a class="idref" href="ITree.Core.ITreeDefinition.html#TauF"><span class="id" title="constructor">TauF</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t0:266"><span class="id" title="variable">t0</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evempty"><span class="id" title="constructor">evempty</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A0:260"><span class="id" title="variable">A0</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#Hempty:261"><span class="id" title="variable">Hempty</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#ev:262"><span class="id" title="variable">ev</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#k:263"><span class="id" title="variable">k</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">R</span> <span class="id" title="var">S</span> <span class="id" title="var">r</span> <span class="id" title="var">A0</span> <span class="id" title="var">Hempty</span> <span class="id" title="var">ev</span> <span class="id" title="var">k</span> <span class="id" title="var">A</span> <span class="id" title="var">e0</span> <span class="id" title="var">t0</span> <span class="id" title="var">k'</span> <span class="id" title="var">Ht0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Ht0</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHHt0</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trace_prefix_peel_ret_vis" class="idref" href="#trace_prefix_peel_ret_vis"><span class="id" title="lemma">trace_prefix_peel_ret_vis</span></a>:  <span class="id" title="keyword">∀</span> (<a id="E:268" class="idref" href="#E:268"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:269" class="idref" href="#R:269"><span class="id" title="binder">R</span></a> <a id="S:270" class="idref" href="#S:270"><span class="id" title="binder">S</span></a> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="r:271" class="idref" href="#r:271"><span class="id" title="binder">r</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:268"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:270"><span class="id" title="variable">S</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:268"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:269"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="A0:272" class="idref" href="#A0:272"><span class="id" title="binder">A0</span></a> : <span class="id" title="keyword">Type</span>) (<a id="ev:273" class="idref" href="#ev:273"><span class="id" title="binder">ev</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:268"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A0:272"><span class="id" title="variable">A0</span></a>) (<a id="ans:274" class="idref" href="#ans:274"><span class="id" title="binder">ans</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A0:272"><span class="id" title="variable">A0</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="k:275" class="idref" href="#k:275"><span class="id" title="binder">k</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#EvAns"><span class="id" title="inductive">EvAns</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:268"><span class="id" title="variable">E</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:269"><span class="id" title="variable">R</span></a>) (<a id="t0:276" class="idref" href="#t0:276"><span class="id" title="binder">t0</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:268"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:270"><span class="id" title="variable">S</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:277" class="idref" href="#s:277"><span class="id" title="binder">s</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:270"><span class="id" title="variable">S</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t0:276"><span class="id" title="variable">t0</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#s:277"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.ITrace.ITracePrefix.html#trace_prefixF"><span class="id" title="inductive">trace_prefixF</span></a> (<span class="id" title="definition">upaco2</span> <a class="idref" href="ITree.Extra.ITrace.ITracePrefix.html#trace_prefix_"><span class="id" title="definition">trace_prefix_</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#r:271"><span class="id" title="variable">r</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_"><span class="id" title="definition">peel_</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evans"><span class="id" title="constructor">evans</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A0:272"><span class="id" title="variable">A0</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#ev:273"><span class="id" title="variable">ev</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#ans:274"><span class="id" title="variable">ans</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#k:275"><span class="id" title="variable">k</span></a>) (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t0:276"><span class="id" title="variable">t0</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evans"><span class="id" title="constructor">evans</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A0:272"><span class="id" title="variable">A0</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#ev:273"><span class="id" title="variable">ev</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#ans:274"><span class="id" title="variable">ans</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#k:275"><span class="id" title="variable">k</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">R</span> <span class="id" title="var">S</span> <span class="id" title="var">r</span> <span class="id" title="var">A0</span> <span class="id" title="var">ev</span> <span class="id" title="var">ans</span> <span class="id" title="var">k</span> <span class="id" title="var">t0</span> <span class="id" title="var">s</span> <span class="id" title="var">Ht0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">Ht0</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht0</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Ht0</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span>. <span class="id" title="var">remember</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#go"><span class="id" title="constructor">go</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evans"><span class="id" title="constructor">evans</span></a> <span class="id" title="var">A0</span> <span class="id" title="var">ev</span> <span class="id" title="var">ans</span>) <span class="id" title="var">k</span> ) ) <span class="id" title="keyword">as</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">enough</span> (<a class="idref" href="ITree.Extra.ITrace.ITracePrefix.html#trace_prefixF"><span class="id" title="inductive">trace_prefixF</span></a> (<span class="id" title="definition">upaco2</span> <a class="idref" href="ITree.Extra.ITrace.ITracePrefix.html#trace_prefix_"><span class="id" title="definition">trace_prefix_</span></a> <span class="id" title="var">r</span>) (<a class="idref" href="ITree.Core.ITreeDefinition.html#RetF"><span class="id" title="constructor">RetF</span></a> <span class="id" title="var">s</span>) (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t</span>) ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHHt0</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trace_prefix_peel_ret_vis_empty" class="idref" href="#trace_prefix_peel_ret_vis_empty"><span class="id" title="lemma">trace_prefix_peel_ret_vis_empty</span></a>: <span class="id" title="keyword">∀</span> (<a id="E:278" class="idref" href="#E:278"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:279" class="idref" href="#R:279"><span class="id" title="binder">R</span></a> <a id="S:280" class="idref" href="#S:280"><span class="id" title="binder">S</span></a> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="r:281" class="idref" href="#r:281"><span class="id" title="binder">r</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:278"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:280"><span class="id" title="variable">S</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:278"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:279"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="A0:282" class="idref" href="#A0:282"><span class="id" title="binder">A0</span></a> : <span class="id" title="keyword">Type</span>) (<a id="Hempty:283" class="idref" href="#Hempty:283"><span class="id" title="binder">Hempty</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A0:282"><span class="id" title="variable">A0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Basics.Basics.html#void"><span class="id" title="abbreviation">void</span></a>) (<a id="ev:284" class="idref" href="#ev:284"><span class="id" title="binder">ev</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:278"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A0:282"><span class="id" title="variable">A0</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="k:285" class="idref" href="#k:285"><span class="id" title="binder">k</span></a> : <a class="idref" href="ITree.Basics.Basics.html#void"><span class="id" title="abbreviation">void</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#EvAns"><span class="id" title="inductive">EvAns</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:278"><span class="id" title="variable">E</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:279"><span class="id" title="variable">R</span></a>) (<a id="t0:286" class="idref" href="#t0:286"><span class="id" title="binder">t0</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:278"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:280"><span class="id" title="variable">S</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:287" class="idref" href="#s:287"><span class="id" title="binder">s</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:280"><span class="id" title="variable">S</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t0:286"><span class="id" title="variable">t0</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#s:287"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.ITrace.ITracePrefix.html#trace_prefixF"><span class="id" title="inductive">trace_prefixF</span></a> (<span class="id" title="definition">upaco2</span> <a class="idref" href="ITree.Extra.ITrace.ITracePrefix.html#trace_prefix_"><span class="id" title="definition">trace_prefix_</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#r:281"><span class="id" title="variable">r</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_"><span class="id" title="definition">peel_</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evempty"><span class="id" title="constructor">evempty</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A0:282"><span class="id" title="variable">A0</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#Hempty:283"><span class="id" title="variable">Hempty</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#ev:284"><span class="id" title="variable">ev</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#k:285"><span class="id" title="variable">k</span></a>) (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t0:286"><span class="id" title="variable">t0</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evempty"><span class="id" title="constructor">evempty</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A0:282"><span class="id" title="variable">A0</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#Hempty:283"><span class="id" title="variable">Hempty</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#ev:284"><span class="id" title="variable">ev</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#k:285"><span class="id" title="variable">k</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">R</span> <span class="id" title="var">S</span> <span class="id" title="var">r</span> <span class="id" title="var">A0</span> <span class="id" title="var">Hempty</span> <span class="id" title="var">ev</span> <span class="id" title="var">k</span> <span class="id" title="var">t0</span> <span class="id" title="var">s</span> <span class="id" title="var">Ht0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">Ht0</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht0</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Ht0</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span>. <span class="id" title="var">remember</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#go"><span class="id" title="constructor">go</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evempty"><span class="id" title="constructor">evempty</span></a> <span class="id" title="var">A0</span> <span class="id" title="var">Hempty</span> <span class="id" title="var">ev</span>) <span class="id" title="var">k</span> ) ) <span class="id" title="keyword">as</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">enough</span> (<a class="idref" href="ITree.Extra.ITrace.ITracePrefix.html#trace_prefixF"><span class="id" title="inductive">trace_prefixF</span></a> (<span class="id" title="definition">upaco2</span> <a class="idref" href="ITree.Extra.ITrace.ITracePrefix.html#trace_prefix_"><span class="id" title="definition">trace_prefix_</span></a> <span class="id" title="var">r</span>) (<a class="idref" href="ITree.Core.ITreeDefinition.html#RetF"><span class="id" title="constructor">RetF</span></a> <span class="id" title="var">s</span>) (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t</span>) ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHHt0</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trace_prefix_peel" class="idref" href="#trace_prefix_peel"><span class="id" title="lemma">trace_prefix_peel</span></a> : <span class="id" title="keyword">∀</span> (<a id="E:288" class="idref" href="#E:288"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="S:289" class="idref" href="#S:289"><span class="id" title="binder">S</span></a> <a id="R:290" class="idref" href="#R:290"><span class="id" title="binder">R</span></a> : <span class="id" title="keyword">Type</span>) (<a id="b:291" class="idref" href="#b:291"><span class="id" title="binder">b</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:288"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:290"><span class="id" title="variable">R</span></a>) (<a id="t:292" class="idref" href="#t:292"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:288"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:289"><span class="id" title="variable">S</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="f:293" class="idref" href="#f:293"><span class="id" title="binder">f</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:289"><span class="id" title="variable">S</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:288"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:290"><span class="id" title="variable">R</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b:291"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t:292"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#f:293"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.ITrace.ITracePrefix.html#trace_prefix"><span class="id" title="definition">trace_prefix</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel"><span class="id" title="definition">peel</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b:291"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t:292"><span class="id" title="variable">t</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b:291"><span class="id" title="variable">b</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">S</span> <span class="id" title="var">R</span>. <span class="id" title="var">pcofix</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">b</span> <span class="id" title="var">t</span> <span class="id" title="var">f</span> <span class="id" title="var">Href</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel"><span class="id" title="definition">peel</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">b</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">Heqb</span>; <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">Heqt</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqb</span>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#trace_prefix_tau_ret"><span class="id" title="lemma">trace_prefix_tau_ret</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqb</span>. <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqt</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqb</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqb</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqt</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_vis"><span class="id" title="lemma">bind_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pinversion</span> <span class="id" title="var">Href</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqb</span>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqb</span>. <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqb</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqt</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqb</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqt</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqt</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqb</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqb</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqb</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqb</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqb</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqb</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#trace_refine_vis_l"><span class="id" title="lemma">trace_refine_vis_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hbt</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hbt</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">A</span> [<span class="id" title="var">e0</span> [<span class="id" title="var">k0</span> <span class="id" title="var">Hvis</span>] ]  ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqt</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqt</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqt</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvis</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvis</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="B:298" class="idref" href="#B:298"><span class="id" title="binder">B</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="k':299" class="idref" href="#k':299"><span class="id" title="binder">k'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="e1:300" class="idref" href="#e1:300"><span class="id" title="binder">e1</span></a> : <span class="id" title="var">E</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#B:294"><span class="id" title="variable">B</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <span class="id" title="var">t0</span> <a class="idref" href="ITree.Basics.Monad.html#20d7a3de27e35f38017a31a5b4c235e8"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#e1:296"><span class="id" title="variable">e1</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#k':295"><span class="id" title="variable">k'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="s:301" class="idref" href="#s:301"><span class="id" title="binder">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <span class="id" title="var">t0</span> <a class="idref" href="ITree.Basics.Monad.html#20d7a3de27e35f38017a31a5b4c235e8"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#s:297"><span class="id" title="variable">s</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">Hvis</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvis</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Heqb</span> <span class="id" title="var">Heqt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hvis</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t0</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">Heqt0</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">r0</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqt0</span>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">X0</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">k2</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">e1</span>. <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqt0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqt0</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqt0</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t0</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">Heqt0</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">r0</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqt0</span>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">injection</span> <span class="id" title="var">x</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Ht1</span>. <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqt0</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqt0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">Heqt0</span>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHHvis</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht1</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [ [<span class="id" title="var">B</span> [<span class="id" title="var">k'</span> [<span class="id" title="var">e1</span> <span class="id" title="var">Ht0</span>] ] ] | [<span class="id" title="var">s</span> <span class="id" title="var">Ht0</span>] ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqt</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_vis"><span class="id" title="lemma">bind_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pinversion</span> <span class="id" title="var">Href</span>. <span class="id" title="tactic">subst</span>; <span class="id" title="var">ddestruction</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvis</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_vis"><span class="id" title="lemma">bind_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvis</span>. <span class="id" title="var">pinversion</span> <span class="id" title="var">Hvis</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>; <span class="id" title="var">ddestruction</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Heqt</span> <span class="id" title="var">Heqb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">Ht0</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht0</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">inv</span> <span class="id" title="var">H1</span>. <span class="id" title="var">ddestruction</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#trace_prefix_vis_evans"><span class="id" title="lemma">trace_prefix_vis_evans</span></a>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#trace_prefix_vis_evempty"><span class="id" title="lemma">trace_prefix_vis_evempty</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqt</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_l"><span class="id" title="lemma">bind_ret_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Hvis</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#trace_prefix_peel_ret_vis"><span class="id" title="lemma">trace_prefix_peel_ret_vis</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#trace_prefix_peel_ret_vis_empty"><span class="id" title="lemma">trace_prefix_peel_ret_vis_empty</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>; <span class="id" title="var">cbn</span>; [ | <span class="id" title="tactic">constructor</span> ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqt</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqt</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqt</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_vis"><span class="id" title="lemma">bind_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>. <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqb</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqb</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Href</span>. <span class="id" title="var">pinversion</span> <span class="id" title="var">Href</span>. <span class="id" title="tactic">subst</span>; <span class="id" title="var">ddestruction</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="var">ddestruction</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="tactic">at</span> 1. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_vis"><span class="id" title="definition">peel_vis</span></a>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">A</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#Peel.classicT"><span class="id" title="variable">classicT</span></a> (<span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">A</span>) ); <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_rect_r"><span class="id" title="definition">eq_rect_r</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_rect"><span class="id" title="definition">eq_rect</span></a>. <span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a> <span class="id" title="var">e</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">He</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">He</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ddestruction</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#RAnsRef"><span class="id" title="inductive">RAnsRef</span></a> <span class="id" title="var">E</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <span class="id" title="var">A</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evans"><span class="id" title="constructor">evans</span></a> <span class="id" title="var">A</span> <span class="id" title="var">ev</span> <span class="id" title="var">ans</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> <span class="id" title="var">ev</span> <span class="id" title="var">ans</span> ); <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H6</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="peel_bind" class="idref" href="#peel_bind"><span class="id" title="lemma">peel_bind</span></a> : <span class="id" title="keyword">∀</span> (<a id="E:302" class="idref" href="#E:302"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="S:303" class="idref" href="#S:303"><span class="id" title="binder">S</span></a> <a id="R:304" class="idref" href="#R:304"><span class="id" title="binder">R</span></a> : <span class="id" title="keyword">Type</span>) (<a id="b:305" class="idref" href="#b:305"><span class="id" title="binder">b</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:302"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:304"><span class="id" title="variable">R</span></a>) (<a id="t:306" class="idref" href="#t:306"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:302"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:303"><span class="id" title="variable">S</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="f:307" class="idref" href="#f:307"><span class="id" title="binder">f</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:303"><span class="id" title="variable">S</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:302"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:304"><span class="id" title="variable">R</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b:305"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t:306"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#f:307"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="g:308" class="idref" href="#g:308"><span class="id" title="binder">g</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel"><span class="id" title="definition">peel</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b:305"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t:306"><span class="id" title="variable">t</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#g:308"><span class="id" title="variable">g</span></a> <a class="idref" href="ITree.Basics.Monad.html#20d7a3de27e35f38017a31a5b4c235e8"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b:305"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITracePrefix.html#trace_prefix_bind"><span class="id" title="lemma">trace_prefix_bind</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#trace_prefix_peel"><span class="id" title="lemma">trace_prefix_peel</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="peel_lemma" class="idref" href="#peel_lemma"><span class="id" title="lemma">peel_lemma</span></a> : <span class="id" title="keyword">∀</span> <a id="E:309" class="idref" href="#E:309"><span class="id" title="binder">E</span></a> <a id="R:310" class="idref" href="#R:310"><span class="id" title="binder">R</span></a> <a id="S:311" class="idref" href="#S:311"><span class="id" title="binder">S</span></a> (<a id="b:312" class="idref" href="#b:312"><span class="id" title="binder">b</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:309"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:310"><span class="id" title="variable">R</span></a>) (<a id="t:313" class="idref" href="#t:313"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:309"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:311"><span class="id" title="variable">S</span></a>) (<a id="f:314" class="idref" href="#f:314"><span class="id" title="binder">f</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:311"><span class="id" title="variable">S</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:309"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:310"><span class="id" title="variable">R</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b:312"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t:313"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#f:314"><span class="id" title="variable">f</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.ITrace.ITracePrefix.html#trace_prefix"><span class="id" title="definition">trace_prefix</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel"><span class="id" title="definition">peel</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b:312"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t:313"><span class="id" title="variable">t</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b:312"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel"><span class="id" title="definition">peel</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b:312"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t:313"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t:313"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_refine_t"><span class="id" title="lemma">peel_refine_t</span></a>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#trace_prefix_peel"><span class="id" title="lemma">trace_prefix_peel</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#Peel"><span class="id" title="section">Peel</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="bind_peel_ret_tau_aux" class="idref" href="#bind_peel_ret_tau_aux"><span class="id" title="lemma">bind_peel_ret_tau_aux</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="E:315" class="idref" href="#E:315"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="S:316" class="idref" href="#S:316"><span class="id" title="binder">S</span></a> <a id="R:317" class="idref" href="#R:317"><span class="id" title="binder">R</span></a> : <span class="id" title="keyword">Type</span>) (<a id="f:318" class="idref" href="#f:318"><span class="id" title="binder">f</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:317"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:315"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:316"><span class="id" title="variable">S</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="r0:319" class="idref" href="#r0:319"><span class="id" title="binder">r0</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:316"><span class="id" title="variable">S</span></a>) (<a id="t0:320" class="idref" href="#t0:320"><span class="id" title="binder">t0</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:315"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:317"><span class="id" title="variable">R</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#r0:319"><span class="id" title="variable">r0</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t0:320"><span class="id" title="variable">t0</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#f:318"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="r:321" class="idref" href="#r:321"><span class="id" title="binder">r</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:317"><span class="id" title="variable">R</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t0:320"><span class="id" title="variable">t0</span></a> <a class="idref" href="ITree.Basics.Monad.html#20d7a3de27e35f38017a31a5b4c235e8"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#r:321"><span class="id" title="variable">r</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">S</span> <span class="id" title="var">R</span> <span class="id" title="var">f</span> <span class="id" title="var">r0</span> <span class="id" title="var">t0</span> <span class="id" title="var">Hrutt</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">Hrutt</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrutt</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hrutt</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span> <span class="id" title="tactic">at</span> 1. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t0</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">Ht0</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">r</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht0</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="var">t0</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">Ht0</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">∃</span> <span class="id" title="var">r</span>. <span class="id" title="var">pfold</span>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ht0</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht0</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#simpobs"><span class="id" title="lemma">simpobs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht0</span>. <span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">Ht0</span>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">injection</span> <span class="id" title="var">x</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Ht2</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHHrutt</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="decompose_trace_refine_bind" class="idref" href="#decompose_trace_refine_bind"><span class="id" title="lemma">decompose_trace_refine_bind</span></a> : <span class="id" title="keyword">∀</span> (<a id="E:322" class="idref" href="#E:322"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R:323" class="idref" href="#R:323"><span class="id" title="binder">R</span></a> <a id="S:324" class="idref" href="#S:324"><span class="id" title="binder">S</span></a> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="b:325" class="idref" href="#b:325"><span class="id" title="binder">b</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:322"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:324"><span class="id" title="variable">S</span></a>) (<a id="t:326" class="idref" href="#t:326"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:322"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:323"><span class="id" title="variable">R</span></a>) (<a id="f:327" class="idref" href="#f:327"><span class="id" title="binder">f</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:323"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:322"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#S:324"><span class="id" title="variable">S</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b:325"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t:326"><span class="id" title="variable">t</span></a> <span class="id" title="notation">&gt;&gt;=</span> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#f:327"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="b':328" class="idref" href="#b':328"><span class="id" title="binder">b'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="g':329" class="idref" href="#g':329"><span class="id" title="binder">g'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b':328"><span class="id" title="variable">b'</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#g':329"><span class="id" title="variable">g'</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b:325"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b':328"><span class="id" title="variable">b'</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#t:326"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="ITree.Axioms.html#classicT_inhabited"><span class="id" title="lemma">classicT_inhabited</span></a> <span class="id" title="keyword">as</span> [<span class="id" title="var">classicT</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">∃</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel"><span class="id" title="definition">peel</span></a> <span class="id" title="var">classicT</span> <span class="id" title="var">b</span> <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_bind"><span class="id" title="lemma">peel_bind</span></a> <span class="id" title="var">classicT</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Heutt</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Heutt</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">g</span> <span class="id" title="var">Heutt</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">g</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">eapply</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#peel_refine_t"><span class="id" title="lemma">peel_refine_t</span></a> <span class="id" title="var">classicT</span>); <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="bind_trigger_refine" class="idref" href="#bind_trigger_refine"><span class="id" title="lemma">bind_trigger_refine</span></a> : <span class="id" title="keyword">∀</span> (<a id="E:330" class="idref" href="#E:330"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="A:331" class="idref" href="#A:331"><span class="id" title="binder">A</span></a> <a id="R:332" class="idref" href="#R:332"><span class="id" title="binder">R</span></a> : <span class="id" title="keyword">Type</span>) (<a id="b:333" class="idref" href="#b:333"><span class="id" title="binder">b</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#EvAns"><span class="id" title="inductive">EvAns</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:330"><span class="id" title="variable">E</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:332"><span class="id" title="variable">R</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="e:334" class="idref" href="#e:334"><span class="id" title="binder">e</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:330"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A:331"><span class="id" title="variable">A</span></a>) (<a id="k:335" class="idref" href="#k:335"><span class="id" title="binder">k</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A:331"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:330"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:332"><span class="id" title="variable">R</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="a:336" class="idref" href="#a:336"><span class="id" title="binder">a</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A:331"><span class="id" title="variable">A</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b:333"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.trigger"><span class="id" title="definition">ITree.trigger</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#e:334"><span class="id" title="variable">e</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#k:335"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="a:337" class="idref" href="#a:337"><span class="id" title="binder">a</span></a> : <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A:331"><span class="id" title="variable">A</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="k':338" class="idref" href="#k':338"><span class="id" title="binder">k'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#itrace"><span class="id" title="definition">itrace</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#E:330"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#R:332"><span class="id" title="variable">R</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#b:333"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evans"><span class="id" title="constructor">evans</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#A:331"><span class="id" title="variable">A</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#e:334"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#a:337"><span class="id" title="variable">a</span></a>) <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#k':338"><span class="id" title="variable">k'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#k':338"><span class="id" title="variable">k'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#807cf07fc9b6e174a5f6d1ef141e1432"><span class="id" title="notation">⊑</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#k:335"><span class="id" title="variable">k</span></a> <a class="idref" href="ITree.Extra.ITrace.ITraceBind.html#a:337"><span class="id" title="variable">a</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#bind_trigger"><span class="id" title="lemma">bind_trigger</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Extra.ITrace.ITraceFacts.html#trace_refine_vis"><span class="id" title="lemma">trace_refine_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hvis</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hvis</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">X</span> [<span class="id" title="var">e'</span> [<span class="id" title="var">k'</span> <span class="id" title="var">Hbvis</span>] ] ]. <span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">Hbvis</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hbvis</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">punfold</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>. <span class="id" title="var">ddestruction</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H3</span>; <span class="id" title="var">ddestruction</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">∃</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">k'</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>. <span class="id" title="var">pclearbot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#RAnsRef"><span class="id" title="inductive">RAnsRef</span></a> <span class="id" title="var">E</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <span class="id" title="var">A</span> (<a class="idref" href="ITree.Extra.ITrace.ITraceDefinition.html#evans"><span class="id" title="constructor">evans</span></a> <span class="id" title="var">A</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> <span class="id" title="var">e</span> <span class="id" title="var">a</span> ); <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H8</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">pclearbot</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">a</span> <span class="id" title="var">_</span>]. <span class="id" title="var">contradiction</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
