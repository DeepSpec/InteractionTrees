<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="https://github.com/DeepSpec/InteractionTrees">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">ITree.Props.Finite</h1>

<div class="code">
</div>

<div class="doc">
<a id="lab117"></a><h1 class="section">Finite Interaction Tree</h1>

</div>
<div class="code">

<br/>

<br/>
</div>

<div class="doc">
<a id="lab118"></a><h2 class="section">Finite computations as Interaction Trees</h2>


<div class="paragraph"> </div>

  We provide two predicates capturing finiteness of an <span class="inlinecode"><a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a></span>:
<ul class="doclist">
<li> <span class="inlinecode"><a class="idref" href="ITree.Props.Finite.html#all_finite"><span class="id" title="inductive">all_finite</span></a></span> <span class="inlinecode"><a class="idref" href="ITree.Extra.IForest.html#BIND_BIND_COUNTEREXAMPLE.t"><span class="id" title="definition">t</span></a></span> expresses that <span class="inlinecode"><a class="idref" href="ITree.Extra.IForest.html#BIND_BIND_COUNTEREXAMPLE.t"><span class="id" title="definition">t</span></a></span> is finite along all branches

</li>
<li> <span class="inlinecode"><a class="idref" href="ITree.Props.Finite.html#any_finite"><span class="id" title="inductive">any_finite</span></a></span> <span class="inlinecode"><a class="idref" href="ITree.Extra.IForest.html#BIND_BIND_COUNTEREXAMPLE.t"><span class="id" title="definition">t</span></a></span> expresses that <span class="inlinecode"><a class="idref" href="ITree.Extra.IForest.html#BIND_BIND_COUNTEREXAMPLE.t"><span class="id" title="definition">t</span></a></span> admits a finite branch

</li>
</ul>

<div class="paragraph"> </div>

  In each case, we prove:
<ul class="doclist">
<li> Smart constructors and inversion lemmas

</li>
<li> Closure under <span class="inlinecode"><a class="idref" href="ITree.Eq.Eqit.html#eutt"><span class="id" title="definition">eutt</span></a></span> <span class="inlinecode"><span class="id" title="var">R</span></span> (in the case of <span class="inlinecode"><a class="idref" href="ITree.Props.Leaf.html#Leaf"><span class="id" title="inductive">Leaf</span></a></span>, we get another value related by R) and Proper instances for <span class="inlinecode"><a class="idref" href="ITree.Eq.Eqit.html#eutt"><span class="id" title="definition">eutt</span></a></span> <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a></span>

</li>
<li> Forward and backward proof rules for <span class="inlinecode"><a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">bind</span></a></span>s

</li>
</ul>
  We additionally provide:
<ul class="doclist">
<li> Particular cases of non-interactive computations and <span class="inlinecode"><a class="idref" href="ITree.Extra.Dijkstra.PureITreeBasics.html#spin"><span class="id" title="abbreviation">spin</span></a></span>

</li>
<li> Counterexamples to properties that could be expected at first glance

</li>
</ul>

<div class="paragraph"> </div>

 Definitions 
<div class="paragraph"> </div>

 all_finite t
  The tree admits exclusively finite branches 
</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <a id="all_finite" class="idref" href="#all_finite"><span class="id" title="inductive">all_finite</span></a> {<a id="E:1" class="idref" href="#E:1"><span class="id" title="binder">E</span></a>} {<a id="A:2" class="idref" href="#A:2"><span class="id" title="binder">A</span></a>: <span class="id" title="keyword">Type</span>} : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <span class="id" title="var">E</span> <span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;| <a id="all_finiteRet" class="idref" href="#all_finiteRet"><span class="id" title="constructor">all_finiteRet</span></a>: <span class="id" title="keyword">∀</span> <a id="a:5" class="idref" href="#a:5"><span class="id" title="binder">a</span></a> <a id="t:6" class="idref" href="#t:6"><span class="id" title="binder">t</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <a class="idref" href="ITree.Props.Finite.html#t:6"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#RetF"><span class="id" title="constructor">RetF</span></a> <a class="idref" href="ITree.Props.Finite.html#a:5"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Props.Finite.html#all_finite:3"><span class="id" title="inductive">all_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#t:6"><span class="id" title="variable">t</span></a><br/>
&nbsp;| <a id="all_finiteTau" class="idref" href="#all_finiteTau"><span class="id" title="constructor">all_finiteTau</span></a>: <span class="id" title="keyword">∀</span> <a id="t:7" class="idref" href="#t:7"><span class="id" title="binder">t</span></a> <a id="u:8" class="idref" href="#u:8"><span class="id" title="binder">u</span></a>,<br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <a class="idref" href="ITree.Props.Finite.html#t:7"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#TauF"><span class="id" title="constructor">TauF</span></a> <a class="idref" href="ITree.Props.Finite.html#u:8"><span class="id" title="variable">u</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Props.Finite.html#all_finite:3"><span class="id" title="inductive">all_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#u:8"><span class="id" title="variable">u</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Props.Finite.html#all_finite:3"><span class="id" title="inductive">all_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#t:7"><span class="id" title="variable">t</span></a><br/>
&nbsp;| <a id="all_finiteVis" class="idref" href="#all_finiteVis"><span class="id" title="constructor">all_finiteVis</span></a>: <span class="id" title="keyword">∀</span> {<a id="X:9" class="idref" href="#X:9"><span class="id" title="binder">X</span></a>} (<a id="e:10" class="idref" href="#e:10"><span class="id" title="binder">e</span></a>: <a class="idref" href="ITree.Props.Finite.html#E:1"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#X:9"><span class="id" title="variable">X</span></a>) <a id="t:11" class="idref" href="#t:11"><span class="id" title="binder">t</span></a> <a id="k:12" class="idref" href="#k:12"><span class="id" title="binder">k</span></a>,<br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <a class="idref" href="ITree.Props.Finite.html#t:11"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> <a class="idref" href="ITree.Props.Finite.html#e:10"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.Props.Finite.html#k:12"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="x:13" class="idref" href="#x:13"><span class="id" title="binder">x</span></a>, <a class="idref" href="ITree.Props.Finite.html#all_finite:3"><span class="id" title="inductive">all_finite</span></a> (<a class="idref" href="ITree.Props.Finite.html#k:12"><span class="id" title="variable">k</span></a> <a class="idref" href="ITree.Props.Finite.html#x:13"><span class="id" title="variable">x</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Props.Finite.html#all_finite:3"><span class="id" title="inductive">all_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#t:11"><span class="id" title="variable">t</span></a><br/>
.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Constructors</span> <a class="idref" href="ITree.Props.Finite.html#all_finite"><span class="id" title="inductive">all_finite</span></a> : <span class="id" title="var">itree</span>.<br/>

<br/>
</div>

<div class="doc">
any_finite t
  The tree admits at least one finite branch 
</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <a id="any_finite" class="idref" href="#any_finite"><span class="id" title="inductive">any_finite</span></a> {<a id="E:14" class="idref" href="#E:14"><span class="id" title="binder">E</span></a>} {<a id="A:15" class="idref" href="#A:15"><span class="id" title="binder">A</span></a>: <span class="id" title="keyword">Type</span>} : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <span class="id" title="var">E</span> <span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;| <a id="any_finiteRet" class="idref" href="#any_finiteRet"><span class="id" title="constructor">any_finiteRet</span></a>: <span class="id" title="keyword">∀</span> <a id="a:18" class="idref" href="#a:18"><span class="id" title="binder">a</span></a> <a id="t:19" class="idref" href="#t:19"><span class="id" title="binder">t</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <a class="idref" href="ITree.Props.Finite.html#t:19"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#RetF"><span class="id" title="constructor">RetF</span></a> <a class="idref" href="ITree.Props.Finite.html#a:18"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Props.Finite.html#any_finite:16"><span class="id" title="inductive">any_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#t:19"><span class="id" title="variable">t</span></a><br/>
&nbsp;| <a id="any_finiteTau" class="idref" href="#any_finiteTau"><span class="id" title="constructor">any_finiteTau</span></a>: <span class="id" title="keyword">∀</span> <a id="t:20" class="idref" href="#t:20"><span class="id" title="binder">t</span></a> <a id="u:21" class="idref" href="#u:21"><span class="id" title="binder">u</span></a>,<br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <a class="idref" href="ITree.Props.Finite.html#t:20"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#TauF"><span class="id" title="constructor">TauF</span></a> <a class="idref" href="ITree.Props.Finite.html#u:21"><span class="id" title="variable">u</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Props.Finite.html#any_finite:16"><span class="id" title="inductive">any_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#u:21"><span class="id" title="variable">u</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Props.Finite.html#any_finite:16"><span class="id" title="inductive">any_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#t:20"><span class="id" title="variable">t</span></a><br/>
&nbsp;| <a id="any_finiteVis" class="idref" href="#any_finiteVis"><span class="id" title="constructor">any_finiteVis</span></a>: <span class="id" title="keyword">∀</span> {<a id="X:22" class="idref" href="#X:22"><span class="id" title="binder">X</span></a>} (<a id="e:23" class="idref" href="#e:23"><span class="id" title="binder">e</span></a>: <a class="idref" href="ITree.Props.Finite.html#E:14"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#X:22"><span class="id" title="variable">X</span></a>) <a id="t:24" class="idref" href="#t:24"><span class="id" title="binder">t</span></a> <a id="k:25" class="idref" href="#k:25"><span class="id" title="binder">k</span></a> <a id="x:26" class="idref" href="#x:26"><span class="id" title="binder">x</span></a>,<br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <a class="idref" href="ITree.Props.Finite.html#t:24"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> <a class="idref" href="ITree.Props.Finite.html#e:23"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.Props.Finite.html#k:25"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Props.Finite.html#any_finite:16"><span class="id" title="inductive">any_finite</span></a> (<a class="idref" href="ITree.Props.Finite.html#k:25"><span class="id" title="variable">k</span></a> <a class="idref" href="ITree.Props.Finite.html#x:26"><span class="id" title="variable">x</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Props.Finite.html#any_finite:16"><span class="id" title="inductive">any_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#t:24"><span class="id" title="variable">t</span></a><br/>
.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Constructors</span> <a class="idref" href="ITree.Props.Finite.html#any_finite"><span class="id" title="inductive">any_finite</span></a> : <span class="id" title="var">itree</span>.<br/>

<br/>
</div>

<div class="doc">
Smart constructors 
</div>
<div class="code">

<br/>
<span class="comment">(*&nbsp;all_finite&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="all_finite_Ret" class="idref" href="#all_finite_Ret"><span class="id" title="lemma">all_finite_Ret</span></a> : <span class="id" title="keyword">∀</span> <a id="E:27" class="idref" href="#E:27"><span class="id" title="binder">E</span></a> <a id="R:28" class="idref" href="#R:28"><span class="id" title="binder">R</span></a> <a id="a:29" class="idref" href="#a:29"><span class="id" title="binder">a</span></a>,<br/>
&nbsp;&nbsp;@<a class="idref" href="ITree.Props.Finite.html#all_finite"><span class="id" title="inductive">all_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#E:27"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#R:28"><span class="id" title="variable">R</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.Props.Finite.html#a:29"><span class="id" title="variable">a</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">econstructor</span> 1; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Resolve</span> <span class="id" title="var">all_finite_Ret</span> : <span class="id" title="var">itree</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="all_finite_Tau" class="idref" href="#all_finite_Tau"><span class="id" title="lemma">all_finite_Tau</span></a> : <span class="id" title="keyword">∀</span> <a id="E:30" class="idref" href="#E:30"><span class="id" title="binder">E</span></a> <a id="R:31" class="idref" href="#R:31"><span class="id" title="binder">R</span></a> <a id="t:32" class="idref" href="#t:32"><span class="id" title="binder">t</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Props.Finite.html#all_finite"><span class="id" title="inductive">all_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#t:32"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;@<a class="idref" href="ITree.Props.Finite.html#all_finite"><span class="id" title="inductive">all_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#E:30"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#R:31"><span class="id" title="variable">R</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Tau"><span class="id" title="abbreviation">Tau</span></a> <a class="idref" href="ITree.Props.Finite.html#t:32"><span class="id" title="variable">t</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">econstructor</span> 2; [<span class="id" title="tactic">reflexivity</span> | <span class="id" title="tactic">eauto</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Resolve</span> <span class="id" title="var">all_finite_Tau</span> : <span class="id" title="var">itree</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="all_finite_Vis" class="idref" href="#all_finite_Vis"><span class="id" title="lemma">all_finite_Vis</span></a> : <span class="id" title="keyword">∀</span> <a id="E:33" class="idref" href="#E:33"><span class="id" title="binder">E</span></a> <a id="X:34" class="idref" href="#X:34"><span class="id" title="binder">X</span></a> <a id="R:35" class="idref" href="#R:35"><span class="id" title="binder">R</span></a> (<a id="e:36" class="idref" href="#e:36"><span class="id" title="binder">e</span></a> : <a class="idref" href="ITree.Props.Finite.html#E:33"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#X:34"><span class="id" title="variable">X</span></a>) <a id="k:37" class="idref" href="#k:37"><span class="id" title="binder">k</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="x:38" class="idref" href="#x:38"><span class="id" title="binder">x</span></a>, <a class="idref" href="ITree.Props.Finite.html#all_finite"><span class="id" title="inductive">all_finite</span></a> (<a class="idref" href="ITree.Props.Finite.html#k:37"><span class="id" title="variable">k</span></a> <a class="idref" href="ITree.Props.Finite.html#x:38"><span class="id" title="variable">x</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;@<a class="idref" href="ITree.Props.Finite.html#all_finite"><span class="id" title="inductive">all_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#E:33"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#R:35"><span class="id" title="variable">R</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <a class="idref" href="ITree.Props.Finite.html#e:36"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.Props.Finite.html#k:37"><span class="id" title="variable">k</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">econstructor</span> 3; [<span class="id" title="tactic">reflexivity</span> | <span class="id" title="tactic">eauto</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Resolve</span> <span class="id" title="var">all_finite_Vis</span> : <span class="id" title="var">itree</span>.<br/>

<br/>
<span class="comment">(*&nbsp;any_finite&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="any_finite_Ret" class="idref" href="#any_finite_Ret"><span class="id" title="lemma">any_finite_Ret</span></a> : <span class="id" title="keyword">∀</span> <a id="E:39" class="idref" href="#E:39"><span class="id" title="binder">E</span></a> <a id="R:40" class="idref" href="#R:40"><span class="id" title="binder">R</span></a> <a id="a:41" class="idref" href="#a:41"><span class="id" title="binder">a</span></a>,<br/>
&nbsp;&nbsp;@<a class="idref" href="ITree.Props.Finite.html#any_finite"><span class="id" title="inductive">any_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#E:39"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#R:40"><span class="id" title="variable">R</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="ITree.Props.Finite.html#a:41"><span class="id" title="variable">a</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">econstructor</span> 1; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Resolve</span> <span class="id" title="var">any_finite_Ret</span> : <span class="id" title="var">itree</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="any_finite_Tau" class="idref" href="#any_finite_Tau"><span class="id" title="lemma">any_finite_Tau</span></a> : <span class="id" title="keyword">∀</span> <a id="E:42" class="idref" href="#E:42"><span class="id" title="binder">E</span></a> <a id="R:43" class="idref" href="#R:43"><span class="id" title="binder">R</span></a> <a id="t:44" class="idref" href="#t:44"><span class="id" title="binder">t</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Props.Finite.html#any_finite"><span class="id" title="inductive">any_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#t:44"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;@<a class="idref" href="ITree.Props.Finite.html#any_finite"><span class="id" title="inductive">any_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#E:42"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#R:43"><span class="id" title="variable">R</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Tau"><span class="id" title="abbreviation">Tau</span></a> <a class="idref" href="ITree.Props.Finite.html#t:44"><span class="id" title="variable">t</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">econstructor</span> 2; [<span class="id" title="tactic">reflexivity</span> | <span class="id" title="tactic">eauto</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Resolve</span> <span class="id" title="var">any_finite_Tau</span> : <span class="id" title="var">itree</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="any_finite_Vis" class="idref" href="#any_finite_Vis"><span class="id" title="lemma">any_finite_Vis</span></a> : <span class="id" title="keyword">∀</span> <a id="E:45" class="idref" href="#E:45"><span class="id" title="binder">E</span></a> <a id="X:46" class="idref" href="#X:46"><span class="id" title="binder">X</span></a> <a id="R:47" class="idref" href="#R:47"><span class="id" title="binder">R</span></a> (<a id="e:48" class="idref" href="#e:48"><span class="id" title="binder">e</span></a> : <a class="idref" href="ITree.Props.Finite.html#E:45"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#X:46"><span class="id" title="variable">X</span></a>) <a id="k:49" class="idref" href="#k:49"><span class="id" title="binder">k</span></a> <a id="x:50" class="idref" href="#x:50"><span class="id" title="binder">x</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Props.Finite.html#any_finite"><span class="id" title="inductive">any_finite</span></a> (<a class="idref" href="ITree.Props.Finite.html#k:49"><span class="id" title="variable">k</span></a> <a class="idref" href="ITree.Props.Finite.html#x:50"><span class="id" title="variable">x</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;@<a class="idref" href="ITree.Props.Finite.html#any_finite"><span class="id" title="inductive">any_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#E:45"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#R:47"><span class="id" title="variable">R</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <a class="idref" href="ITree.Props.Finite.html#e:48"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.Props.Finite.html#k:49"><span class="id" title="variable">k</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">econstructor</span> 3; [<span class="id" title="tactic">reflexivity</span> | <span class="id" title="tactic">eauto</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Resolve</span> <span class="id" title="var">any_finite_Vis</span> : <span class="id" title="var">itree</span>.<br/>

<br/>
</div>

<div class="doc">
Inversion lemmas 
</div>
<div class="code">

<br/>
<span class="comment">(*&nbsp;all_finite&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="all_finite_Tau_inv" class="idref" href="#all_finite_Tau_inv"><span class="id" title="lemma">all_finite_Tau_inv</span></a> : <span class="id" title="keyword">∀</span> <a id="E:51" class="idref" href="#E:51"><span class="id" title="binder">E</span></a> <a id="R:52" class="idref" href="#R:52"><span class="id" title="binder">R</span></a> <a id="t:53" class="idref" href="#t:53"><span class="id" title="binder">t</span></a>,<br/>
&nbsp;&nbsp;@<a class="idref" href="ITree.Props.Finite.html#all_finite"><span class="id" title="inductive">all_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#E:51"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#R:52"><span class="id" title="variable">R</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Tau"><span class="id" title="abbreviation">Tau</span></a> <a class="idref" href="ITree.Props.Finite.html#t:53"><span class="id" title="variable">t</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Props.Finite.html#all_finite"><span class="id" title="inductive">all_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#t:53"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> × <span class="id" title="var">FIN</span>; <span class="id" title="var">inv</span> <span class="id" title="var">FIN</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="all_finite_Vis_inv" class="idref" href="#all_finite_Vis_inv"><span class="id" title="lemma">all_finite_Vis_inv</span></a> : <span class="id" title="keyword">∀</span> <a id="E:54" class="idref" href="#E:54"><span class="id" title="binder">E</span></a> <a id="X:55" class="idref" href="#X:55"><span class="id" title="binder">X</span></a> <a id="R:56" class="idref" href="#R:56"><span class="id" title="binder">R</span></a> (<a id="e:57" class="idref" href="#e:57"><span class="id" title="binder">e</span></a> : <a class="idref" href="ITree.Props.Finite.html#E:54"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#X:55"><span class="id" title="variable">X</span></a>) <a id="k:58" class="idref" href="#k:58"><span class="id" title="binder">k</span></a>,<br/>
&nbsp;&nbsp;@<a class="idref" href="ITree.Props.Finite.html#all_finite"><span class="id" title="inductive">all_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#E:54"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#R:56"><span class="id" title="variable">R</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <a class="idref" href="ITree.Props.Finite.html#e:57"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.Props.Finite.html#k:58"><span class="id" title="variable">k</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="x:59" class="idref" href="#x:59"><span class="id" title="binder">x</span></a>, <a class="idref" href="ITree.Props.Finite.html#all_finite"><span class="id" title="inductive">all_finite</span></a> (<a class="idref" href="ITree.Props.Finite.html#k:58"><span class="id" title="variable">k</span></a> <a class="idref" href="ITree.Props.Finite.html#x:59"><span class="id" title="variable">x</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> × <span class="id" title="var">FIN</span> <span class="id" title="var">x</span>; <span class="id" title="var">inv</span> <span class="id" title="var">FIN</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="keyword">match</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">u</span> <span class="id" title="keyword">return</span> <span class="id" title="keyword">match</span> <a class="idref" href="ITree.Props.Finite.html#u:61"><span class="id" title="variable">u</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> <span class="id" title="var">e0</span> <span class="id" title="var">k0</span> ⇒ <span class="id" title="var">_</span> | <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a> <span class="id" title="keyword">end</span> <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a> ⇒ <span class="id" title="var">_</span> <span class="id" title="keyword">end</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;any_finite&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="any_finite_Tau_inv" class="idref" href="#any_finite_Tau_inv"><span class="id" title="lemma">any_finite_Tau_inv</span></a> : <span class="id" title="keyword">∀</span> <a id="E:66" class="idref" href="#E:66"><span class="id" title="binder">E</span></a> <a id="R:67" class="idref" href="#R:67"><span class="id" title="binder">R</span></a> <a id="t:68" class="idref" href="#t:68"><span class="id" title="binder">t</span></a>,<br/>
&nbsp;&nbsp;@<a class="idref" href="ITree.Props.Finite.html#any_finite"><span class="id" title="inductive">any_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#E:66"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#R:67"><span class="id" title="variable">R</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Tau"><span class="id" title="abbreviation">Tau</span></a> <a class="idref" href="ITree.Props.Finite.html#t:68"><span class="id" title="variable">t</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Props.Finite.html#any_finite"><span class="id" title="inductive">any_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#t:68"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> × <span class="id" title="var">FIN</span>; <span class="id" title="var">inv</span> <span class="id" title="var">FIN</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="any_finite_Vis_inv" class="idref" href="#any_finite_Vis_inv"><span class="id" title="lemma">any_finite_Vis_inv</span></a> : <span class="id" title="keyword">∀</span> <a id="E:69" class="idref" href="#E:69"><span class="id" title="binder">E</span></a> <a id="X:70" class="idref" href="#X:70"><span class="id" title="binder">X</span></a> <a id="R:71" class="idref" href="#R:71"><span class="id" title="binder">R</span></a> (<a id="e:72" class="idref" href="#e:72"><span class="id" title="binder">e</span></a> : <a class="idref" href="ITree.Props.Finite.html#E:69"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#X:70"><span class="id" title="variable">X</span></a>) <a id="k:73" class="idref" href="#k:73"><span class="id" title="binder">k</span></a>,<br/>
&nbsp;&nbsp;@<a class="idref" href="ITree.Props.Finite.html#any_finite"><span class="id" title="inductive">any_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#E:69"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#R:71"><span class="id" title="variable">R</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Vis"><span class="id" title="abbreviation">Vis</span></a> <a class="idref" href="ITree.Props.Finite.html#e:72"><span class="id" title="variable">e</span></a> <a class="idref" href="ITree.Props.Finite.html#k:73"><span class="id" title="variable">k</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="x:74" class="idref" href="#x:74"><span class="id" title="binder">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="ITree.Props.Finite.html#any_finite"><span class="id" title="inductive">any_finite</span></a> (<a class="idref" href="ITree.Props.Finite.html#k:73"><span class="id" title="variable">k</span></a> <a class="idref" href="ITree.Props.Finite.html#x:74"><span class="id" title="variable">x</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> × <span class="id" title="var">FIN</span>; <span class="id" title="var">inv</span> <span class="id" title="var">FIN</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">x</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="keyword">match</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">u</span> <span class="id" title="keyword">return</span> <span class="id" title="keyword">match</span> <a class="idref" href="ITree.Props.Finite.html#u:76"><span class="id" title="variable">u</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> <span class="id" title="var">e0</span> <span class="id" title="var">k0</span> ⇒ <span class="id" title="var">_</span> | <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a> <span class="id" title="keyword">end</span> <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a> ⇒ <span class="id" title="var">_</span> <span class="id" title="keyword">end</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Closure under <span class="inlinecode"><a class="idref" href="ITree.Eq.Eqit.html#eutt"><span class="id" title="definition">eutt</span></a></span>

<div class="paragraph"> </div>

  General asymetric lemmas for <span class="inlinecode"><a class="idref" href="ITree.Eq.Eqit.html#eutt"><span class="id" title="definition">eutt</span></a></span> <span class="inlinecode"><span class="id" title="var">R</span></span>, and <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a></span>
  instances for <span class="inlinecode"><a class="idref" href="ITree.Eq.Eqit.html#eutt"><span class="id" title="definition">eutt</span></a></span> <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a></span>. 
</div>
<div class="code">

<br/>
<span class="comment">(*&nbsp;all_finite&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="all_finite_eutt_l" class="idref" href="#all_finite_eutt_l"><span class="id" title="lemma">all_finite_eutt_l</span></a> {<a id="E:81" class="idref" href="#E:81"><span class="id" title="binder">E</span></a> <a id="A:82" class="idref" href="#A:82"><span class="id" title="binder">A</span></a> <a id="B:83" class="idref" href="#B:83"><span class="id" title="binder">B</span></a> <a id="R:84" class="idref" href="#R:84"><span class="id" title="binder">R</span></a>}:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="t:85" class="idref" href="#t:85"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Props.Finite.html#E:81"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#A:82"><span class="id" title="variable">A</span></a>) (<a id="u:86" class="idref" href="#u:86"><span class="id" title="binder">u</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Props.Finite.html#E:81"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#B:83"><span class="id" title="variable">B</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Eq.Eqit.html#eutt"><span class="id" title="definition">eutt</span></a> <a class="idref" href="ITree.Props.Finite.html#R:84"><span class="id" title="variable">R</span></a> <a class="idref" href="ITree.Props.Finite.html#t:85"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Props.Finite.html#u:86"><span class="id" title="variable">u</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Props.Finite.html#all_finite"><span class="id" title="inductive">all_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#t:85"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Props.Finite.html#all_finite"><span class="id" title="inductive">all_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#u:86"><span class="id" title="variable">u</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> × <span class="id" title="var">EQ</span> <span class="id" title="var">FIN</span>;<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">u</span> <span class="id" title="var">EQ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">FIN</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">u2</span> <span class="id" title="var">EQ</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">punfold</span> <span class="id" title="var">EQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#RetF"><span class="id" title="constructor">RetF</span></a> <span class="id" title="var">a</span>); <span class="id" title="var">genobs</span> <span class="id" title="var">u2</span> <span class="id" title="var">ou</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">hinduction</span> <span class="id" title="var">EQ</span> <span class="id" title="keyword">before</span> <span class="id" title="var">R</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">punfold</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#TauF"><span class="id" title="constructor">TauF</span></a> <span class="id" title="var">u</span>); <span class="id" title="var">genobs</span> <span class="id" title="var">u2</span> <span class="id" title="var">ou2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">hinduction</span> <span class="id" title="var">EQ</span> <span class="id" title="keyword">before</span> <span class="id" title="var">R</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>; <span class="id" title="var">pclearbot</span>; <span class="id" title="var">inv</span> <span class="id" title="var">Heqi</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">punfold</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> <span class="id" title="var">e</span> <span class="id" title="var">k</span>); <span class="id" title="var">genobs</span> <span class="id" title="var">u2</span> <span class="id" title="var">ou2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">hinduction</span> <span class="id" title="var">EQ</span> <span class="id" title="keyword">before</span> <span class="id" title="var">R</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>; <span class="id" title="var">pclearbot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">revert</span> <span class="id" title="var">H0</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="keyword">match</span> <span class="id" title="var">Heqi</span> <span class="id" title="tactic">in</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">u</span> <span class="id" title="keyword">return</span> <span class="id" title="keyword">match</span> <a class="idref" href="ITree.Props.Finite.html#u:88"><span class="id" title="variable">u</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> <span class="id" title="var">e0</span> <span class="id" title="var">k0</span> ⇒ <span class="id" title="var">_</span> | <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a> <span class="id" title="keyword">end</span> <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a> ⇒ <span class="id" title="var">_</span> <span class="id" title="keyword">end</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">inv</span> <span class="id" title="var">Heqi</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="all_finite_eutt_r" class="idref" href="#all_finite_eutt_r"><span class="id" title="lemma">all_finite_eutt_r</span></a> {<a id="E:93" class="idref" href="#E:93"><span class="id" title="binder">E</span></a> <a id="A:94" class="idref" href="#A:94"><span class="id" title="binder">A</span></a> <a id="B:95" class="idref" href="#B:95"><span class="id" title="binder">B</span></a> <a id="R:96" class="idref" href="#R:96"><span class="id" title="binder">R</span></a>}:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="t:97" class="idref" href="#t:97"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Props.Finite.html#E:93"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#A:94"><span class="id" title="variable">A</span></a>) (<a id="u:98" class="idref" href="#u:98"><span class="id" title="binder">u</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Props.Finite.html#E:93"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#B:95"><span class="id" title="variable">B</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Eq.Eqit.html#eutt"><span class="id" title="definition">eutt</span></a> <a class="idref" href="ITree.Props.Finite.html#R:96"><span class="id" title="variable">R</span></a> <a class="idref" href="ITree.Props.Finite.html#t:97"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Props.Finite.html#u:98"><span class="id" title="variable">u</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Props.Finite.html#all_finite"><span class="id" title="inductive">all_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#u:98"><span class="id" title="variable">u</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Props.Finite.html#all_finite"><span class="id" title="inductive">all_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#t:97"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> × <span class="id" title="var">EQ</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#eqit_flip"><span class="id" title="lemma">eqit_flip</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ</span>. <span class="id" title="var">revert</span> <span class="id" title="var">EQ</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Props.Finite.html#all_finite_eutt_l"><span class="id" title="lemma">all_finite_eutt_l</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="all_finite_eutt" class="idref" href="#all_finite_eutt"><span class="id" title="instance">all_finite_eutt</span></a> {<a id="E:99" class="idref" href="#E:99"><span class="id" title="binder">E</span></a> <a id="A:100" class="idref" href="#A:100"><span class="id" title="binder">A</span></a> <a id="R:101" class="idref" href="#R:101"><span class="id" title="binder">R</span></a>}:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="ITree.Eq.Eqit.html#eutt"><span class="id" title="definition">eutt</span></a> <a class="idref" href="ITree.Props.Finite.html#R:101"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#iff"><span class="id" title="definition">iff</span></a>) (@<a class="idref" href="ITree.Props.Finite.html#all_finite"><span class="id" title="inductive">all_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#E:99"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#A:100"><span class="id" title="variable">A</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Props.Finite.html#all_finite_eutt_l"><span class="id" title="lemma">all_finite_eutt_l</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Props.Finite.html#all_finite_eutt_r"><span class="id" title="lemma">all_finite_eutt_r</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;any_finite&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="any_finite_eutt_l" class="idref" href="#any_finite_eutt_l"><span class="id" title="lemma">any_finite_eutt_l</span></a> {<a id="E:102" class="idref" href="#E:102"><span class="id" title="binder">E</span></a> <a id="A:103" class="idref" href="#A:103"><span class="id" title="binder">A</span></a> <a id="B:104" class="idref" href="#B:104"><span class="id" title="binder">B</span></a> <a id="R:105" class="idref" href="#R:105"><span class="id" title="binder">R</span></a>}:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="t:106" class="idref" href="#t:106"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Props.Finite.html#E:102"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#A:103"><span class="id" title="variable">A</span></a>) (<a id="u:107" class="idref" href="#u:107"><span class="id" title="binder">u</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Props.Finite.html#E:102"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#B:104"><span class="id" title="variable">B</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Eq.Eqit.html#eutt"><span class="id" title="definition">eutt</span></a> <a class="idref" href="ITree.Props.Finite.html#R:105"><span class="id" title="variable">R</span></a> <a class="idref" href="ITree.Props.Finite.html#t:106"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Props.Finite.html#u:107"><span class="id" title="variable">u</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Props.Finite.html#any_finite"><span class="id" title="inductive">any_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#t:106"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Props.Finite.html#any_finite"><span class="id" title="inductive">any_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#u:107"><span class="id" title="variable">u</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> × <span class="id" title="var">EQ</span> <span class="id" title="var">FIN</span>;<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">u</span> <span class="id" title="var">EQ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">FIN</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">u2</span> <span class="id" title="var">EQ</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">punfold</span> <span class="id" title="var">EQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#RetF"><span class="id" title="constructor">RetF</span></a> <span class="id" title="var">a</span>); <span class="id" title="var">genobs</span> <span class="id" title="var">u2</span> <span class="id" title="var">ou</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">hinduction</span> <span class="id" title="var">EQ</span> <span class="id" title="keyword">before</span> <span class="id" title="var">R</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">punfold</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#TauF"><span class="id" title="constructor">TauF</span></a> <span class="id" title="var">u</span>); <span class="id" title="var">genobs</span> <span class="id" title="var">u2</span> <span class="id" title="var">ou2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">hinduction</span> <span class="id" title="var">EQ</span> <span class="id" title="keyword">before</span> <span class="id" title="var">R</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>; <span class="id" title="var">pclearbot</span>; <span class="id" title="var">inv</span> <span class="id" title="var">Heqi</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">punfold</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> <span class="id" title="var">e</span> <span class="id" title="var">k</span>); <span class="id" title="var">genobs</span> <span class="id" title="var">u2</span> <span class="id" title="var">ou2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">hinduction</span> <span class="id" title="var">EQ</span> <span class="id" title="keyword">before</span> <span class="id" title="var">R</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>; <span class="id" title="var">pclearbot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">revert</span> <span class="id" title="var">x</span> <span class="id" title="var">FIN</span> <span class="id" title="var">IHFIN</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="keyword">match</span> <span class="id" title="var">Heqi</span> <span class="id" title="tactic">in</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">u</span> <span class="id" title="keyword">return</span> <span class="id" title="keyword">match</span> <a class="idref" href="ITree.Props.Finite.html#u:109"><span class="id" title="variable">u</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> <span class="id" title="var">e0</span> <span class="id" title="var">k0</span> ⇒ <span class="id" title="var">_</span> | <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a> <span class="id" title="keyword">end</span> <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a> ⇒ <span class="id" title="var">_</span> <span class="id" title="keyword">end</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">inv</span> <span class="id" title="var">Heqi</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="any_finite_eutt_r" class="idref" href="#any_finite_eutt_r"><span class="id" title="lemma">any_finite_eutt_r</span></a> {<a id="E:114" class="idref" href="#E:114"><span class="id" title="binder">E</span></a> <a id="A:115" class="idref" href="#A:115"><span class="id" title="binder">A</span></a> <a id="B:116" class="idref" href="#B:116"><span class="id" title="binder">B</span></a> <a id="R:117" class="idref" href="#R:117"><span class="id" title="binder">R</span></a>}:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="t:118" class="idref" href="#t:118"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Props.Finite.html#E:114"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#A:115"><span class="id" title="variable">A</span></a>) (<a id="u:119" class="idref" href="#u:119"><span class="id" title="binder">u</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Props.Finite.html#E:114"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#B:116"><span class="id" title="variable">B</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Eq.Eqit.html#eutt"><span class="id" title="definition">eutt</span></a> <a class="idref" href="ITree.Props.Finite.html#R:117"><span class="id" title="variable">R</span></a> <a class="idref" href="ITree.Props.Finite.html#t:118"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Props.Finite.html#u:119"><span class="id" title="variable">u</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Props.Finite.html#any_finite"><span class="id" title="inductive">any_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#u:119"><span class="id" title="variable">u</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Props.Finite.html#any_finite"><span class="id" title="inductive">any_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#t:118"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> × <span class="id" title="var">EQ</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#eqit_flip"><span class="id" title="lemma">eqit_flip</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ</span>. <span class="id" title="var">revert</span> <span class="id" title="var">EQ</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Props.Finite.html#any_finite_eutt_l"><span class="id" title="lemma">any_finite_eutt_l</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="any_finite_eutt" class="idref" href="#any_finite_eutt"><span class="id" title="instance">any_finite_eutt</span></a> {<a id="E:120" class="idref" href="#E:120"><span class="id" title="binder">E</span></a> <a id="A:121" class="idref" href="#A:121"><span class="id" title="binder">A</span></a> <a id="R:122" class="idref" href="#R:122"><span class="id" title="binder">R</span></a>}:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="ITree.Eq.Eqit.html#eutt"><span class="id" title="definition">eutt</span></a> <a class="idref" href="ITree.Props.Finite.html#R:122"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#iff"><span class="id" title="definition">iff</span></a>) (@<a class="idref" href="ITree.Props.Finite.html#any_finite"><span class="id" title="inductive">any_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#E:120"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#A:121"><span class="id" title="variable">A</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Props.Finite.html#any_finite_eutt_l"><span class="id" title="lemma">any_finite_eutt_l</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Props.Finite.html#any_finite_eutt_r"><span class="id" title="lemma">any_finite_eutt_r</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Compatibility with <span class="inlinecode"><a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">bind</span></a></span>, forward and backward 
</div>
<div class="code">

<br/>
<span class="comment">(*&nbsp;all_finite&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Only&nbsp;the&nbsp;reachable&nbsp;branches,&nbsp;as&nbsp;captured&nbsp;by&nbsp;the<br/>
&nbsp;&nbsp;&nbsp;&nbsp;leaves&nbsp;in&nbsp;the&nbsp;image&nbsp;of&nbsp;the&nbsp;prefix,&nbsp;need&nbsp;to&nbsp;be<br/>
&nbsp;&nbsp;&nbsp;finite&nbsp;in&nbsp;the&nbsp;continuation&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="all_finite_bind" class="idref" href="#all_finite_bind"><span class="id" title="lemma">all_finite_bind</span></a> : <span class="id" title="keyword">∀</span> {<a id="E:123" class="idref" href="#E:123"><span class="id" title="binder">E</span></a> <a id="R:124" class="idref" href="#R:124"><span class="id" title="binder">R</span></a> <a id="S:125" class="idref" href="#S:125"><span class="id" title="binder">S</span></a>}<br/>
&nbsp;&nbsp;(<a id="t:126" class="idref" href="#t:126"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Props.Finite.html#E:123"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#R:124"><span class="id" title="variable">R</span></a>) (<a id="k:127" class="idref" href="#k:127"><span class="id" title="binder">k</span></a> : <a class="idref" href="ITree.Props.Finite.html#R:124"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Props.Finite.html#E:123"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#S:125"><span class="id" title="variable">S</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Props.Finite.html#all_finite"><span class="id" title="inductive">all_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#t:126"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="x:128" class="idref" href="#x:128"><span class="id" title="binder">x</span></a>, <a class="idref" href="ITree.Props.Finite.html#x:128"><span class="id" title="variable">x</span></a> <a class="idref" href="ITree.Props.Leaf.html#88e5122019f9ab7438ce1069fb6fcc97"><span class="id" title="notation">∈</span></a> <a class="idref" href="ITree.Props.Finite.html#t:126"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Props.Finite.html#all_finite"><span class="id" title="inductive">all_finite</span></a> (<a class="idref" href="ITree.Props.Finite.html#k:127"><span class="id" title="variable">k</span></a> <a class="idref" href="ITree.Props.Finite.html#x:128"><span class="id" title="variable">x</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Props.Finite.html#all_finite"><span class="id" title="inductive">all_finite</span></a> (<a class="idref" href="ITree.Props.Finite.html#t:126"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#3530f89eeba6738f103e1c4744407abc"><span class="id" title="notation">&gt;&gt;=</span></a> <a class="idref" href="ITree.Props.Finite.html#k:127"><span class="id" title="variable">k</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> × <span class="id" title="var">FIN</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">FIN</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">FINs</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#unfold_bind"><span class="id" title="lemma">unfold_bind</span></a>, <span class="id" title="var">H</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="all_finite_bind_weak" class="idref" href="#all_finite_bind_weak"><span class="id" title="lemma">all_finite_bind_weak</span></a> : <span class="id" title="keyword">∀</span> {<a id="E:129" class="idref" href="#E:129"><span class="id" title="binder">E</span></a> <a id="R:130" class="idref" href="#R:130"><span class="id" title="binder">R</span></a> <a id="S:131" class="idref" href="#S:131"><span class="id" title="binder">S</span></a>}<br/>
&nbsp;&nbsp;(<a id="t:132" class="idref" href="#t:132"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Props.Finite.html#E:129"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#R:130"><span class="id" title="variable">R</span></a>) (<a id="k:133" class="idref" href="#k:133"><span class="id" title="binder">k</span></a> : <a class="idref" href="ITree.Props.Finite.html#R:130"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Props.Finite.html#E:129"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#S:131"><span class="id" title="variable">S</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Props.Finite.html#all_finite"><span class="id" title="inductive">all_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#t:132"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="x:134" class="idref" href="#x:134"><span class="id" title="binder">x</span></a>, <a class="idref" href="ITree.Props.Finite.html#all_finite"><span class="id" title="inductive">all_finite</span></a> (<a class="idref" href="ITree.Props.Finite.html#k:133"><span class="id" title="variable">k</span></a> <a class="idref" href="ITree.Props.Finite.html#x:134"><span class="id" title="variable">x</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Props.Finite.html#all_finite"><span class="id" title="inductive">all_finite</span></a> (<a class="idref" href="ITree.Props.Finite.html#t:132"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#3530f89eeba6738f103e1c4744407abc"><span class="id" title="notation">&gt;&gt;=</span></a> <a class="idref" href="ITree.Props.Finite.html#k:133"><span class="id" title="variable">k</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Props.Finite.html#all_finite_bind"><span class="id" title="lemma">all_finite_bind</span></a>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;We&nbsp;only&nbsp;get&nbsp;finiteness&nbsp;of&nbsp;the&nbsp;reachable&nbsp;branches&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="all_finite_bind_inv" class="idref" href="#all_finite_bind_inv"><span class="id" title="lemma">all_finite_bind_inv</span></a> : <span class="id" title="keyword">∀</span> {<a id="E:135" class="idref" href="#E:135"><span class="id" title="binder">E</span></a> <a id="R:136" class="idref" href="#R:136"><span class="id" title="binder">R</span></a> <a id="S:137" class="idref" href="#S:137"><span class="id" title="binder">S</span></a>}<br/>
&nbsp;&nbsp;(<a id="t:138" class="idref" href="#t:138"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Props.Finite.html#E:135"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#R:136"><span class="id" title="variable">R</span></a>) (<a id="k:139" class="idref" href="#k:139"><span class="id" title="binder">k</span></a> : <a class="idref" href="ITree.Props.Finite.html#R:136"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Props.Finite.html#E:135"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#S:137"><span class="id" title="variable">S</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Props.Finite.html#all_finite"><span class="id" title="inductive">all_finite</span></a> (<a class="idref" href="ITree.Props.Finite.html#t:138"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#3530f89eeba6738f103e1c4744407abc"><span class="id" title="notation">&gt;&gt;=</span></a> <a class="idref" href="ITree.Props.Finite.html#k:139"><span class="id" title="variable">k</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Props.Finite.html#all_finite"><span class="id" title="inductive">all_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#t:138"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <span class="id" title="keyword">∀</span> <a id="x:140" class="idref" href="#x:140"><span class="id" title="binder">x</span></a>, <a class="idref" href="ITree.Props.Finite.html#x:140"><span class="id" title="variable">x</span></a> <a class="idref" href="ITree.Props.Leaf.html#88e5122019f9ab7438ce1069fb6fcc97"><span class="id" title="notation">∈</span></a> <a class="idref" href="ITree.Props.Finite.html#t:138"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Props.Finite.html#all_finite"><span class="id" title="inductive">all_finite</span></a> (<a class="idref" href="ITree.Props.Finite.html#k:139"><span class="id" title="variable">k</span></a> <a class="idref" href="ITree.Props.Finite.html#x:140"><span class="id" title="variable">x</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">R</span> <span class="id" title="var">S</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<span class="id" title="keyword">∀</span> (<a id="u:145" class="idref" href="#u:145"><span class="id" title="binder">u</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <span class="id" title="var">E</span> <span class="id" title="var">S</span>), <a class="idref" href="ITree.Props.Finite.html#all_finite"><span class="id" title="inductive">all_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#u:141"><span class="id" title="variable">u</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="t:146" class="idref" href="#t:146"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <span class="id" title="var">E</span> <span class="id" title="var">R</span>) <a id="k:147" class="idref" href="#k:147"><span class="id" title="binder">k</span></a>, <a class="idref" href="ITree.Props.Finite.html#u:141"><span class="id" title="variable">u</span></a> <a class="idref" href="ITree.Eq.Eqit.html#f51f52fd3bd17df0d58f37498312e9a2"><span class="id" title="notation">≈</span></a> <a class="idref" href="ITree.Props.Finite.html#t:142"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#3530f89eeba6738f103e1c4744407abc"><span class="id" title="notation">&gt;&gt;=</span></a> <a class="idref" href="ITree.Props.Finite.html#k:143"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Props.Finite.html#all_finite"><span class="id" title="inductive">all_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#t:142"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <span class="id" title="keyword">∀</span> <a id="x:148" class="idref" href="#x:148"><span class="id" title="binder">x</span></a>, <a class="idref" href="ITree.Props.Finite.html#x:144"><span class="id" title="variable">x</span></a> <a class="idref" href="ITree.Props.Leaf.html#88e5122019f9ab7438ce1069fb6fcc97"><span class="id" title="notation">∈</span></a> <a class="idref" href="ITree.Props.Finite.html#t:142"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Props.Finite.html#all_finite"><span class="id" title="inductive">all_finite</span></a> (<a class="idref" href="ITree.Props.Finite.html#k:143"><span class="id" title="variable">k</span></a> <a class="idref" href="ITree.Props.Finite.html#x:144"><span class="id" title="variable">x</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">LEM</span> × <span class="id" title="var">FIN</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="var">LEM</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1; <span class="id" title="tactic">intros</span> × <span class="id" title="var">EQ</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> (<a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a> <span class="id" title="var">t</span>), <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#eqit_inv_bind_ret"><span class="id" title="lemma">eqit_inv_bind_ret</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ</span> <span class="id" title="keyword">as</span> (? &amp; <span class="id" title="var">EQt</span> &amp; <span class="id" title="var">EQk</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">EQt</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">z</span> <span class="id" title="var">IN</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">EQt</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IN</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Props.Leaf.html#Leaf_Ret_inv"><span class="id" title="lemma">Leaf_Ret_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">IN</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">EQk</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> (<a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a> <span class="id" title="var">t</span>), <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> (<a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a> <span class="id" title="var">t</span>), <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Eq.Eqit.html#eutt_inv_bind_vis"><span class="id" title="lemma">eutt_inv_bind_vis</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">EQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">EQ</span> <span class="id" title="keyword">as</span> [(<span class="id" title="var">kca</span> &amp; <span class="id" title="var">EQ</span> &amp; <span class="id" title="var">EQk</span>) | (?<span class="id" title="var">a</span> &amp; <span class="id" title="var">EQ</span> &amp; <span class="id" title="var">EQk</span>)].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">EQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Props.Finite.html#all_finite_Vis"><span class="id" title="lemma">all_finite_Vis</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ?; <span class="id" title="tactic">eapply</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">IN</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">EQ</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IN</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Props.Leaf.html#Leaf_Vis_inv"><span class="id" title="lemma">Leaf_Vis_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">IN</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">y</span> &amp; <span class="id" title="var">IN</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">edestruct</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">_</span> &amp; <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">EQk</span>; <span class="id" title="tactic">exact</span> (<span class="id" title="var">EQk</span> <span class="id" title="var">y</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>, <span class="id" title="var">IN</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">y</span> <span class="id" title="var">IN</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">EQ</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IN</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Props.Leaf.html#Leaf_Ret_inv"><span class="id" title="lemma">Leaf_Ret_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">IN</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">EQk</span>. <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="all_finite_bind_inv_left" class="idref" href="#all_finite_bind_inv_left"><span class="id" title="lemma">all_finite_bind_inv_left</span></a> : <span class="id" title="keyword">∀</span> {<a id="E:149" class="idref" href="#E:149"><span class="id" title="binder">E</span></a> <a id="R:150" class="idref" href="#R:150"><span class="id" title="binder">R</span></a> <a id="S:151" class="idref" href="#S:151"><span class="id" title="binder">S</span></a>}<br/>
&nbsp;&nbsp;(<a id="t:152" class="idref" href="#t:152"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Props.Finite.html#E:149"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#R:150"><span class="id" title="variable">R</span></a>) (<a id="k:153" class="idref" href="#k:153"><span class="id" title="binder">k</span></a> : <a class="idref" href="ITree.Props.Finite.html#R:150"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Props.Finite.html#E:149"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#S:151"><span class="id" title="variable">S</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Props.Finite.html#all_finite"><span class="id" title="inductive">all_finite</span></a> (<a class="idref" href="ITree.Props.Finite.html#t:152"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#3530f89eeba6738f103e1c4744407abc"><span class="id" title="notation">&gt;&gt;=</span></a> <a class="idref" href="ITree.Props.Finite.html#k:153"><span class="id" title="variable">k</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Props.Finite.html#all_finite"><span class="id" title="inductive">all_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#t:152"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Props.Finite.html#all_finite_bind_inv"><span class="id" title="lemma">all_finite_bind_inv</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;any_finite&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;For&nbsp;a&nbsp;<span class="inlinecode"><span class="id" title="var">bind</span></span>&nbsp;to&nbsp;have&nbsp;a&nbsp;finite&nbsp;branch,&nbsp;we&nbsp;need&nbsp;to<br/>
&nbsp;&nbsp;&nbsp;exhibit&nbsp;a&nbsp;finite&nbsp;branch&nbsp;in&nbsp;<span class="inlinecode"><span class="id" title="var">t</span></span>&nbsp;that&nbsp;_continues_<br/>
&nbsp;&nbsp;&nbsp;into&nbsp;a&nbsp;finite&nbsp;branch&nbsp;in&nbsp;<span class="inlinecode"><span class="id" title="var">k</span></span>.&nbsp;We&nbsp;capture&nbsp;this<br/>
&nbsp;&nbsp;&nbsp;continuity&nbsp;using&nbsp;<span class="inlinecode"><span class="id" title="var">Leaf</span></span>.<br/>
*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="any_finite_bind" class="idref" href="#any_finite_bind"><span class="id" title="lemma">any_finite_bind</span></a> : <span class="id" title="keyword">∀</span> {<a id="E:154" class="idref" href="#E:154"><span class="id" title="binder">E</span></a> <a id="R:155" class="idref" href="#R:155"><span class="id" title="binder">R</span></a> <a id="S:156" class="idref" href="#S:156"><span class="id" title="binder">S</span></a>}<br/>
&nbsp;&nbsp;(<a id="t:157" class="idref" href="#t:157"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Props.Finite.html#E:154"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#R:155"><span class="id" title="variable">R</span></a>) (<a id="k:158" class="idref" href="#k:158"><span class="id" title="binder">k</span></a> : <a class="idref" href="ITree.Props.Finite.html#R:155"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Props.Finite.html#E:154"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#S:156"><span class="id" title="variable">S</span></a>) <a id="x:159" class="idref" href="#x:159"><span class="id" title="binder">x</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Props.Finite.html#x:159"><span class="id" title="variable">x</span></a> <a class="idref" href="ITree.Props.Leaf.html#88e5122019f9ab7438ce1069fb6fcc97"><span class="id" title="notation">∈</span></a> <a class="idref" href="ITree.Props.Finite.html#t:157"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Props.Finite.html#any_finite"><span class="id" title="inductive">any_finite</span></a> (<a class="idref" href="ITree.Props.Finite.html#k:158"><span class="id" title="variable">k</span></a> <a class="idref" href="ITree.Props.Finite.html#x:159"><span class="id" title="variable">x</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Props.Finite.html#any_finite"><span class="id" title="inductive">any_finite</span></a> (<a class="idref" href="ITree.Props.Finite.html#t:157"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#3530f89eeba6738f103e1c4744407abc"><span class="id" title="notation">&gt;&gt;=</span></a> <a class="idref" href="ITree.Props.Finite.html#k:158"><span class="id" title="variable">k</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> × <span class="id" title="var">IN</span> <span class="id" title="var">FIN</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">IN</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> (<a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a> <span class="id" title="var">t</span>), <span class="id" title="var">H</span>, <a class="idref" href="ITree.Eq.Eqit.html#bind_ret_l"><span class="id" title="lemma">bind_ret_l</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#unfold_bind"><span class="id" title="lemma">unfold_bind</span></a>, <span class="id" title="var">H</span>, <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#unfold_bind"><span class="id" title="lemma">unfold_bind</span></a>, <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Props.Finite.html#any_finite_Vis"><span class="id" title="lemma">any_finite_Vis</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;We&nbsp;get&nbsp;the&nbsp;additional&nbsp;guarantee&nbsp;that&nbsp;the<br/>
&nbsp;&nbsp;&nbsp;finite&nbsp;branch&nbsp;in&nbsp;the&nbsp;continuation&nbsp;comes<br/>
&nbsp;&nbsp;&nbsp;from&nbsp;a&nbsp;point&nbsp;in&nbsp;the&nbsp;image&nbsp;of&nbsp;the&nbsp;prefix.&nbsp;&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="any_finite_bind_inv" class="idref" href="#any_finite_bind_inv"><span class="id" title="lemma">any_finite_bind_inv</span></a> : <span class="id" title="keyword">∀</span> {<a id="E:160" class="idref" href="#E:160"><span class="id" title="binder">E</span></a> <a id="R:161" class="idref" href="#R:161"><span class="id" title="binder">R</span></a> <a id="S:162" class="idref" href="#S:162"><span class="id" title="binder">S</span></a>}<br/>
&nbsp;&nbsp;(<a id="t:163" class="idref" href="#t:163"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Props.Finite.html#E:160"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#R:161"><span class="id" title="variable">R</span></a>) (<a id="k:164" class="idref" href="#k:164"><span class="id" title="binder">k</span></a> : <a class="idref" href="ITree.Props.Finite.html#R:161"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Props.Finite.html#E:160"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#S:162"><span class="id" title="variable">S</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Props.Finite.html#any_finite"><span class="id" title="inductive">any_finite</span></a> (<a class="idref" href="ITree.Props.Finite.html#t:163"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#3530f89eeba6738f103e1c4744407abc"><span class="id" title="notation">&gt;&gt;=</span></a> <a class="idref" href="ITree.Props.Finite.html#k:164"><span class="id" title="variable">k</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Props.Finite.html#any_finite"><span class="id" title="inductive">any_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#t:163"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="x:165" class="idref" href="#x:165"><span class="id" title="binder">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="ITree.Props.Finite.html#x:165"><span class="id" title="variable">x</span></a> <a class="idref" href="ITree.Props.Leaf.html#88e5122019f9ab7438ce1069fb6fcc97"><span class="id" title="notation">∈</span></a> <a class="idref" href="ITree.Props.Finite.html#t:163"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="ITree.Props.Finite.html#any_finite"><span class="id" title="inductive">any_finite</span></a> (<a class="idref" href="ITree.Props.Finite.html#k:164"><span class="id" title="variable">k</span></a> <a class="idref" href="ITree.Props.Finite.html#x:165"><span class="id" title="variable">x</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> × <span class="id" title="var">FIN</span>;<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">ITree.bind</span></a> <span class="id" title="var">t</span> <span class="id" title="var">k</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">u</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">t</span> <span class="id" title="var">k</span> <span class="id" title="var">Hequ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">FIN</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">t'</span> <span class="id" title="var">k'</span> -&gt;; <span class="id" title="tactic">rename</span> <span class="id" title="var">t'</span> <span class="id" title="var">into</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">desobs</span> <span class="id" title="var">t</span> <span class="id" title="var">EQ</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">desobs</span> <span class="id" title="var">t</span> <span class="id" title="var">EQ</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">edestruct</span> <span class="id" title="var">IHFIN</span> <span class="id" title="keyword">as</span> (? &amp; ? &amp; ? &amp; ?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">desobs</span> <span class="id" title="var">t</span> <span class="id" title="var">EQ</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">x</span> <span class="id" title="var">FIN</span> <span class="id" title="var">IHFIN</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="keyword">match</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">u</span> <span class="id" title="keyword">return</span> <span class="id" title="keyword">match</span> <a class="idref" href="ITree.Props.Finite.html#u:167"><span class="id" title="variable">u</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#VisF"><span class="id" title="constructor">VisF</span></a> <span class="id" title="var">e0</span> <span class="id" title="var">k0</span> ⇒ <span class="id" title="var">_</span> | <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a> <span class="id" title="keyword">end</span> <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a> ⇒ <span class="id" title="var">_</span> <span class="id" title="keyword">end</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">edestruct</span> <span class="id" title="var">IHFIN</span> <span class="id" title="keyword">as</span> (? &amp; ? &amp; ? &amp; ?); [ <span class="id" title="tactic">reflexivity</span> | ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="any_finite_bind_inv_weak" class="idref" href="#any_finite_bind_inv_weak"><span class="id" title="lemma">any_finite_bind_inv_weak</span></a> : <span class="id" title="keyword">∀</span> {<a id="E:172" class="idref" href="#E:172"><span class="id" title="binder">E</span></a> <a id="R:173" class="idref" href="#R:173"><span class="id" title="binder">R</span></a> <a id="S:174" class="idref" href="#S:174"><span class="id" title="binder">S</span></a>}<br/>
&nbsp;&nbsp;(<a id="t:175" class="idref" href="#t:175"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Props.Finite.html#E:172"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#R:173"><span class="id" title="variable">R</span></a>) (<a id="k:176" class="idref" href="#k:176"><span class="id" title="binder">k</span></a> : <a class="idref" href="ITree.Props.Finite.html#R:173"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Props.Finite.html#E:172"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#S:174"><span class="id" title="variable">S</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Props.Finite.html#any_finite"><span class="id" title="inductive">any_finite</span></a> (<a class="idref" href="ITree.Props.Finite.html#t:175"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#3530f89eeba6738f103e1c4744407abc"><span class="id" title="notation">&gt;&gt;=</span></a> <a class="idref" href="ITree.Props.Finite.html#k:176"><span class="id" title="variable">k</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ITree.Props.Finite.html#any_finite"><span class="id" title="inductive">any_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#t:175"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="x:177" class="idref" href="#x:177"><span class="id" title="binder">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="ITree.Props.Finite.html#any_finite"><span class="id" title="inductive">any_finite</span></a> (<a class="idref" href="ITree.Props.Finite.html#k:176"><span class="id" title="variable">k</span></a> <a class="idref" href="ITree.Props.Finite.html#x:177"><span class="id" title="variable">x</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> × <span class="id" title="var">FIN</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Props.Finite.html#any_finite_bind_inv"><span class="id" title="lemma">any_finite_bind_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">FIN</span> <span class="id" title="keyword">as</span> (?&amp;?&amp;?&amp;?).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="any_finite_bind_inv_left" class="idref" href="#any_finite_bind_inv_left"><span class="id" title="lemma">any_finite_bind_inv_left</span></a> : <span class="id" title="keyword">∀</span> {<a id="E:178" class="idref" href="#E:178"><span class="id" title="binder">E</span></a> <a id="R:179" class="idref" href="#R:179"><span class="id" title="binder">R</span></a> <a id="S:180" class="idref" href="#S:180"><span class="id" title="binder">S</span></a>}<br/>
&nbsp;&nbsp;(<a id="t:181" class="idref" href="#t:181"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Props.Finite.html#E:178"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#R:179"><span class="id" title="variable">R</span></a>) (<a id="k:182" class="idref" href="#k:182"><span class="id" title="binder">k</span></a> : <a class="idref" href="ITree.Props.Finite.html#R:179"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Props.Finite.html#E:178"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#S:180"><span class="id" title="variable">S</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Props.Finite.html#any_finite"><span class="id" title="inductive">any_finite</span></a> (<a class="idref" href="ITree.Props.Finite.html#t:181"><span class="id" title="variable">t</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#3530f89eeba6738f103e1c4744407abc"><span class="id" title="notation">&gt;&gt;=</span></a> <a class="idref" href="ITree.Props.Finite.html#k:182"><span class="id" title="variable">k</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Props.Finite.html#any_finite"><span class="id" title="inductive">any_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#t:181"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Props.Finite.html#any_finite_bind_inv"><span class="id" title="lemma">any_finite_bind_inv</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab119"></a><h1 class="section"><span class="inlinecode"><a class="idref" href="ITree.Props.Finite.html#any_finite"><span class="id" title="inductive">any_finite</span></a></span> is non-empty <span class="inlinecode"><a class="idref" href="ITree.Props.Leaf.html#Leaf"><span class="id" title="inductive">Leaf</span></a></span></h1>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="Leaf_finite" class="idref" href="#Leaf_finite"><span class="id" title="lemma">Leaf_finite</span></a> : <span class="id" title="keyword">∀</span> <a id="E:183" class="idref" href="#E:183"><span class="id" title="binder">E</span></a> <a id="R:184" class="idref" href="#R:184"><span class="id" title="binder">R</span></a> (<a id="t:185" class="idref" href="#t:185"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Props.Finite.html#E:183"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#R:184"><span class="id" title="variable">R</span></a>) <a id="x:186" class="idref" href="#x:186"><span class="id" title="binder">x</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Props.Finite.html#x:186"><span class="id" title="variable">x</span></a> <a class="idref" href="ITree.Props.Leaf.html#88e5122019f9ab7438ce1069fb6fcc97"><span class="id" title="notation">∈</span></a> <a class="idref" href="ITree.Props.Finite.html#t:185"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Props.Finite.html#any_finite"><span class="id" title="inductive">any_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#t:185"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> × <span class="id" title="var">FIN</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">FIN</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a>, <span class="id" title="var">H</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_Leaf" class="idref" href="#finite_Leaf"><span class="id" title="lemma">finite_Leaf</span></a> : <span class="id" title="keyword">∀</span> <a id="E:187" class="idref" href="#E:187"><span class="id" title="binder">E</span></a> <a id="R:188" class="idref" href="#R:188"><span class="id" title="binder">R</span></a> (<a id="t:189" class="idref" href="#t:189"><span class="id" title="binder">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Props.Finite.html#E:187"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#R:188"><span class="id" title="variable">R</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Props.Finite.html#any_finite"><span class="id" title="inductive">any_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#t:189"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="x:190" class="idref" href="#x:190"><span class="id" title="binder">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="ITree.Props.Finite.html#x:190"><span class="id" title="variable">x</span></a> <a class="idref" href="ITree.Props.Leaf.html#88e5122019f9ab7438ce1069fb6fcc97"><span class="id" title="notation">∈</span></a> <a class="idref" href="ITree.Props.Finite.html#t:189"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> × <span class="id" title="var">FIN</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">FIN</span>.<br/>
&nbsp;&nbsp;1: <span class="id" title="tactic">∃</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a>, <span class="id" title="var">H</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">destruct</span> <span class="id" title="var">IHFIN</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Degenerate case of non-interactive computations
  In the absence of interaction (<span class="inlinecode"><span class="id" title="var">E</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><a class="idref" href="ITree.Indexed.Sum.html#void1"><span class="id" title="inductive">void1</span></a></span>), <span class="inlinecode"><a class="idref" href="ITree.Props.Finite.html#all_finite"><span class="id" title="inductive">all_finite</span></a></span> and <span class="inlinecode"><a class="idref" href="ITree.Props.Finite.html#any_finite"><span class="id" title="inductive">any_finite</span></a></span> collapse:
  we indeed both know that the computation is deterministic,
  and that it cannot fail, excluding hence any subtletly.
  The image is either empty, or a singleton.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_non_interactive" class="idref" href="#finite_non_interactive"><span class="id" title="lemma">finite_non_interactive</span></a> : <span class="id" title="keyword">∀</span> <a id="X:191" class="idref" href="#X:191"><span class="id" title="binder">X</span></a> (<a id="t:192" class="idref" href="#t:192"><span class="id" title="binder">t</span></a>: <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Indexed.Sum.html#void1"><span class="id" title="inductive">void1</span></a> <a class="idref" href="ITree.Props.Finite.html#X:191"><span class="id" title="variable">X</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Props.Finite.html#all_finite"><span class="id" title="inductive">all_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#t:192"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="ITree.Props.Finite.html#any_finite"><span class="id" title="inductive">any_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#t:192"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">induction</span> 1; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">first</span> [<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span> | <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_leaf_non_interactive" class="idref" href="#finite_leaf_non_interactive"><span class="id" title="lemma">finite_leaf_non_interactive</span></a> : <span class="id" title="keyword">∀</span> <a id="X:193" class="idref" href="#X:193"><span class="id" title="binder">X</span></a> (<a id="t:194" class="idref" href="#t:194"><span class="id" title="binder">t</span></a>: <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Indexed.Sum.html#void1"><span class="id" title="inductive">void1</span></a> <a class="idref" href="ITree.Props.Finite.html#X:193"><span class="id" title="variable">X</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Props.Finite.html#all_finite"><span class="id" title="inductive">all_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#t:194"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="x:195" class="idref" href="#x:195"><span class="id" title="binder">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="ITree.Props.Finite.html#x:195"><span class="id" title="variable">x</span></a> <a class="idref" href="ITree.Props.Leaf.html#88e5122019f9ab7438ce1069fb6fcc97"><span class="id" title="notation">∈</span></a> <a class="idref" href="ITree.Props.Finite.html#t:194"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Props.Finite.html#finite_non_interactive"><span class="id" title="lemma">finite_non_interactive</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [ <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="ITree.Props.Finite.html#finite_Leaf"><span class="id" title="lemma">finite_Leaf</span></a> | <span class="id" title="tactic">intros</span> []; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="ITree.Props.Finite.html#Leaf_finite"><span class="id" title="lemma">Leaf_finite</span></a> ].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Leaf_non_interactive_singleton" class="idref" href="#Leaf_non_interactive_singleton"><span class="id" title="lemma">Leaf_non_interactive_singleton</span></a> : <span class="id" title="keyword">∀</span> <a id="X:196" class="idref" href="#X:196"><span class="id" title="binder">X</span></a> (<a id="t:197" class="idref" href="#t:197"><span class="id" title="binder">t</span></a>: <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Indexed.Sum.html#void1"><span class="id" title="inductive">void1</span></a> <a class="idref" href="ITree.Props.Finite.html#X:196"><span class="id" title="variable">X</span></a>) <a id="a:198" class="idref" href="#a:198"><span class="id" title="binder">a</span></a> <a id="b:199" class="idref" href="#b:199"><span class="id" title="binder">b</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="ITree.Props.Finite.html#a:198"><span class="id" title="variable">a</span></a> <a class="idref" href="ITree.Props.Leaf.html#88e5122019f9ab7438ce1069fb6fcc97"><span class="id" title="notation">∈</span></a> <a class="idref" href="ITree.Props.Finite.html#t:197"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Props.Finite.html#b:199"><span class="id" title="variable">b</span></a> <a class="idref" href="ITree.Props.Leaf.html#88e5122019f9ab7438ce1069fb6fcc97"><span class="id" title="notation">∈</span></a> <a class="idref" href="ITree.Props.Finite.html#t:197"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Props.Finite.html#a:198"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ITree.Props.Finite.html#b:199"><span class="id" title="variable">b</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> × <span class="id" title="var">IN</span>; <span class="id" title="var">revert</span> <span class="id" title="var">b</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">IN</span>; <span class="id" title="tactic">intros</span> × <span class="id" title="var">IN'</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a>, <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IN'</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Props.Leaf.html#Leaf_Ret_inv"><span class="id" title="lemma">Leaf_Ret_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">IN'</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="ITree.Eq.Eqit.html#itree_eta"><span class="id" title="lemma">itree_eta</span></a>, <span class="id" title="var">H</span>, <a class="idref" href="ITree.Eq.Eqit.html#tau_eutt"><span class="id" title="lemma">tau_eutt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">IN'</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">inv</span> <span class="id" title="var">e</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="ITree.Extra.Dijkstra.PureITreeBasics.html#spin"><span class="id" title="abbreviation">spin</span></a></span> is not finite, in any sense of the term 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="spin_not_all_finite" class="idref" href="#spin_not_all_finite"><span class="id" title="lemma">spin_not_all_finite</span></a>: <span class="id" title="keyword">∀</span> <a id="E:200" class="idref" href="#E:200"><span class="id" title="binder">E</span></a> <a id="X:201" class="idref" href="#X:201"><span class="id" title="binder">X</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">¬</span></a> <a class="idref" href="ITree.Props.Finite.html#all_finite"><span class="id" title="inductive">all_finite</span></a> (@<a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.spin"><span class="id" title="definition">spin</span></a> <a class="idref" href="ITree.Props.Finite.html#E:200"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#X:201"><span class="id" title="variable">X</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> × <span class="id" title="var">FIN</span>; <span class="id" title="var">remember</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.spin"><span class="id" title="definition">spin</span></a> <span class="id" title="keyword">as</span> <span class="id" title="var">t</span>; <span class="id" title="var">revert</span> <span class="id" title="var">Heqt</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">FIN</span>; <span class="id" title="tactic">intros</span> -&gt;;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">inv</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="spin_not_any_finite" class="idref" href="#spin_not_any_finite"><span class="id" title="lemma">spin_not_any_finite</span></a>: <span class="id" title="keyword">∀</span> <a id="E:202" class="idref" href="#E:202"><span class="id" title="binder">E</span></a> <a id="X:203" class="idref" href="#X:203"><span class="id" title="binder">X</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">¬</span></a> <a class="idref" href="ITree.Props.Finite.html#any_finite"><span class="id" title="inductive">any_finite</span></a> (@<a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.spin"><span class="id" title="definition">spin</span></a> <a class="idref" href="ITree.Props.Finite.html#E:202"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#X:203"><span class="id" title="variable">X</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> × <span class="id" title="var">FIN</span>; <span class="id" title="var">remember</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.spin"><span class="id" title="definition">spin</span></a> <span class="id" title="keyword">as</span> <span class="id" title="var">t</span>; <span class="id" title="var">revert</span> <span class="id" title="var">Heqt</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">FIN</span>; <span class="id" title="tactic">intros</span> -&gt;;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">inv</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="spin_empty_Leaf" class="idref" href="#spin_empty_Leaf"><span class="id" title="lemma">spin_empty_Leaf</span></a>: <span class="id" title="keyword">∀</span> <a id="E:204" class="idref" href="#E:204"><span class="id" title="binder">E</span></a> <a id="X:205" class="idref" href="#X:205"><span class="id" title="binder">X</span></a> <a id="x:206" class="idref" href="#x:206"><span class="id" title="binder">x</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">¬</span></a> <a class="idref" href="ITree.Props.Finite.html#x:206"><span class="id" title="variable">x</span></a> <a class="idref" href="ITree.Props.Leaf.html#88e5122019f9ab7438ce1069fb6fcc97"><span class="id" title="notation">∈</span></a> <a class="idref" href="ITree.Props.Leaf.html#88e5122019f9ab7438ce1069fb6fcc97"><span class="id" title="notation">(</span></a>@<a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.spin"><span class="id" title="definition">spin</span></a> <a class="idref" href="ITree.Props.Finite.html#E:204"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#X:205"><span class="id" title="variable">X</span></a><a class="idref" href="ITree.Props.Leaf.html#88e5122019f9ab7438ce1069fb6fcc97"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> × <span class="id" title="var">IN</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Props.Finite.html#Leaf_finite"><span class="id" title="lemma">Leaf_finite</span></a>, <a class="idref" href="ITree.Props.Finite.html#spin_not_any_finite"><span class="id" title="lemma">spin_not_any_finite</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">IN</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <a id="Counterexamples" class="idref" href="#Counterexamples"><span class="id" title="module">Counterexamples</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab120"></a><h1 class="section">Counterexamples</h1>

<div class="paragraph"> </div>

 Counterexamples to statements that could be expected to be true at firt glance. 
<div class="paragraph"> </div>

 <span class="inlinecode"><a class="idref" href="ITree.Props.Finite.html#all_finite"><span class="id" title="inductive">all_finite</span></a></span> does <i>not</i> entail <span class="inlinecode"><a class="idref" href="ITree.Props.Finite.html#any_finite"><span class="id" title="inductive">any_finite</span></a></span>.

<div class="paragraph"> </div>

  Indeed, <span class="inlinecode"><a class="idref" href="ITree.Props.Finite.html#any_finite"><span class="id" title="inductive">any_finite</span></a></span> guarantees that a finite branch exists,
  where <span class="inlinecode"><a class="idref" href="ITree.Props.Finite.html#all_finite"><span class="id" title="inductive">all_finite</span></a></span> enforces that no infinite branch exists.
  If the computation has no branch, <span class="inlinecode"><a class="idref" href="ITree.Props.Finite.html#all_finite"><span class="id" title="inductive">all_finite</span></a></span> can be satisfied
  while <span class="inlinecode"><a class="idref" href="ITree.Props.Finite.html#any_finite"><span class="id" title="inductive">any_finite</span></a></span> is not.
  The <span class="inlinecode"><span class="id" title="tactic">fail</span></span> computation is the simplest counterexample 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a id="Counterexamples.fail" class="idref" href="#Counterexamples.fail"><span class="id" title="abbreviation">fail</span></a> := (@<a class="idref" href="ITree.Events.Exception.html#throw"><span class="id" title="definition">throw</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> (<a class="idref" href="ITree.Events.Exception.html#exceptE"><span class="id" title="inductive">exceptE</span></a> <span class="id" title="var">_</span>) <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fact</span> <a id="Counterexamples.fail_all_finite" class="idref" href="#Counterexamples.fail_all_finite"><span class="id" title="lemma">fail_all_finite</span></a>: <a class="idref" href="ITree.Props.Finite.html#all_finite"><span class="id" title="inductive">all_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#Counterexamples.fail"><span class="id" title="abbreviation">fail</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="tactic">fail</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Props.Finite.html#all_finite_Vis"><span class="id" title="lemma">all_finite_Vis</span></a>; <span class="id" title="tactic">intros</span> [].<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fact</span> <a id="Counterexamples.fail_not_any_finite" class="idref" href="#Counterexamples.fail_not_any_finite"><span class="id" title="lemma">fail_not_any_finite</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">¬</span></a> <a class="idref" href="ITree.Props.Finite.html#any_finite"><span class="id" title="inductive">any_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#Counterexamples.fail"><span class="id" title="abbreviation">fail</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="tactic">fail</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">FIN</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Props.Finite.html#any_finite_Vis_inv"><span class="id" title="lemma">any_finite_Vis_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">FIN</span> <span class="id" title="keyword">as</span> ([] &amp; ? &amp; ?).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
The <span class="inlinecode"><a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.bind"><span class="id" title="definition">bind</span></a></span> proof rule for <span class="inlinecode"><a class="idref" href="ITree.Props.Finite.html#any_finite"><span class="id" title="inductive">any_finite</span></a></span> <i>must</i> quantify
    on the <span class="inlinecode"><a class="idref" href="ITree.Props.Leaf.html#Leaf"><span class="id" title="inductive">Leaf</span></a></span>
    It could be tempting to hope for a simpler lemma than
    <span class="inlinecode"><a class="idref" href="ITree.Props.Finite.html#any_finite"><span class="id" title="inductive">any_finite</span></a></span>, simply ensure diamond on the prefix and
    at a point in the continuation:
    any_finite t -&gt;
    any_finite (k x) -&gt;
    any_finite (t &gt;&gt;= k)
    It is however primordial to ensure that the finite path exhibited by k
    is reachable for t, as illustrated in the following 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Counterexamples.t" class="idref" href="#Counterexamples.t"><span class="id" title="definition">t</span></a> : <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Events.Nondeterminism.html#nondetE"><span class="id" title="inductive">nondetE</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ITree.Events.Nondeterminism.html#or"><span class="id" title="definition">or</span></a> (<a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>) <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.spin"><span class="id" title="definition">spin</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Counterexamples.k" class="idref" href="#Counterexamples.k"><span class="id" title="definition">k</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#itree"><span class="id" title="record">itree</span></a> <a class="idref" href="ITree.Events.Nondeterminism.html#nondetE"><span class="id" title="inductive">nondetE</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="b:207" class="idref" href="#b:207"><span class="id" title="binder">b</span></a> ⇒ <span class="id" title="keyword">if</span> <a class="idref" href="ITree.Props.Finite.html#b:207"><span class="id" title="variable">b</span></a> <span class="id" title="keyword">then</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.spin"><span class="id" title="definition">spin</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#Ret"><span class="id" title="abbreviation">Ret</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Counterexamples.spin_not_any_finite" class="idref" href="#Counterexamples.spin_not_any_finite"><span class="id" title="lemma">spin_not_any_finite</span></a>: <span class="id" title="keyword">∀</span> <a id="E:208" class="idref" href="#E:208"><span class="id" title="binder">E</span></a> <a id="X:209" class="idref" href="#X:209"><span class="id" title="binder">X</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">¬</span></a> <a class="idref" href="ITree.Props.Finite.html#any_finite"><span class="id" title="inductive">any_finite</span></a> (@<a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.spin"><span class="id" title="definition">spin</span></a> <a class="idref" href="ITree.Props.Finite.html#E:208"><span class="id" title="variable">E</span></a> <a class="idref" href="ITree.Props.Finite.html#X:209"><span class="id" title="variable">X</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> × <span class="id" title="var">FIN</span>; <span class="id" title="var">remember</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#ITree.spin"><span class="id" title="definition">spin</span></a> <span class="id" title="keyword">as</span> <span class="id" title="var">t</span>; <span class="id" title="var">revert</span> <span class="id" title="var">Heqt</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">FIN</span>; <span class="id" title="tactic">intros</span> -&gt;;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Core.ITreeDefinition.html#observe"><span class="id" title="definition">observe</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">inv</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fact</span> <a id="Counterexamples.DFt" class="idref" href="#Counterexamples.DFt"><span class="id" title="lemma">DFt</span></a> : <a class="idref" href="ITree.Props.Finite.html#any_finite"><span class="id" title="inductive">any_finite</span></a> <a class="idref" href="ITree.Props.Finite.html#Counterexamples.t"><span class="id" title="definition">t</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Props.Finite.html#any_finite_Vis"><span class="id" title="lemma">any_finite_Vis</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fact</span> <a id="Counterexamples.DFk" class="idref" href="#Counterexamples.DFk"><span class="id" title="lemma">DFk</span></a> : <a class="idref" href="ITree.Props.Finite.html#any_finite"><span class="id" title="inductive">any_finite</span></a> (<a class="idref" href="ITree.Props.Finite.html#Counterexamples.k"><span class="id" title="definition">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">itree</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fact</span> <a id="Counterexamples.NotDFtk" class="idref" href="#Counterexamples.NotDFtk"><span class="id" title="lemma">NotDFtk</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.15.1/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">¬</span></a> <a class="idref" href="ITree.Props.Finite.html#any_finite"><span class="id" title="inductive">any_finite</span></a> (<a class="idref" href="ITree.Props.Finite.html#Counterexamples.t"><span class="id" title="definition">t</span></a> <a class="idref" href="ITree.Core.ITreeDefinition.html#3530f89eeba6738f103e1c4744407abc"><span class="id" title="notation">&gt;&gt;=</span></a> <a class="idref" href="ITree.Props.Finite.html#Counterexamples.k"><span class="id" title="definition">k</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">abs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Props.Finite.html#any_finite_bind_inv"><span class="id" title="lemma">any_finite_bind_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">abs</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">FINt</span> &amp; <span class="id" title="var">b</span> &amp; <span class="id" title="var">IN</span> &amp; <span class="id" title="var">FINk</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Props.Finite.html#Counterexamples.spin_not_any_finite"><span class="id" title="lemma">spin_not_any_finite</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="ITree.Props.Finite.html#Counterexamples.t"><span class="id" title="definition">t</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">IN</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">FINk</span> <span class="id" title="var">FINt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">IN</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Props.Leaf.html#Leaf_Ret_inv"><span class="id" title="lemma">Leaf_Ret_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ITree.Props.Finite.html#Leaf_finite"><span class="id" title="lemma">Leaf_finite</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ITree.Props.Finite.html#Counterexamples.spin_not_any_finite"><span class="id" title="lemma">spin_not_any_finite</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="ITree.Props.Finite.html#Counterexamples"><span class="id" title="module">Counterexamples</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
